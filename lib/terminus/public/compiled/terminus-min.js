var Pathology={evaluate:function(e,t,n,r,i){i=i||new Pathology.XPathResult(r);var s=Pathology.XPathParser.parse(e);return s.evaluate(t,t,r,i),i},atomize:function(e,t,n){var r=e.evaluate(t,n);return r&&r.atomize&&(r=r.atomize()),r},array:function(e){if(!e)return[];var t=[],n=e.length;while(n--)t[n]=e[n];return t},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}};typeof XPathResult=="undefined"&&(XPathResult={ANY_TYPE:0,NUMBER_TYPE:1,STRING_TYPE:2,BOOLEAN_TYPE:3,UNORDERED_NODE_ITERATOR_TYPE:4,ORDERED_NODE_ITERATOR_TYPE:5,UNORDERED_NODE_SNAPSHOT_TYPE:6,ORDERED_NODE_SNAPSHOT_TYPE:7,ANY_UNORDERED_NODE_TYPE:8,FIRST_ORDERED_NODE_TYPE:9}),typeof document.evaluate=="undefined"&&(document.evaluate=function(){return Pathology.evaluate.apply(Pathology,arguments)}),Pathology.XPathResult=function(e){this._type=e,this._nodes=[],this._index=0},Pathology.XPathResult.prototype.push=function(e){if(this._type!==0&&e.nodeType!==this._type)return;if(Pathology.indexOf(this._nodes,e)>=0)return;this._nodes.push(e)},Pathology.XPathResult.prototype.iterateNext=function(){var e=this._nodes[this._index];return e?(this._index+=1,e):null},Pathology.XPathResult.prototype.atomize=function(){if(this._nodes.length===0)return null;if(this._nodes.length===1){var e=this._nodes[0];return e.nodeValue===undefined||e.nodeValue===null?e:e.nodeValue}var t=[];for(var n=0,r=this._nodes.length;n<r;n++)t.push(this._nodes[n].nodeValue);return t},Pathology.XPathResult.prototype.makeString=function(){var e=this._nodes[0];if(!e)return"";switch(e.nodeType){case XPathResult.STRING_TYPE:return this.atomize();case XPathResult.BOOLEAN_TYPE:var t=[];for(var n=0,r=this._nodes.length;n<r;n++)t.push(this._nodes[n].nodeValue);return t.join("");default:var i=document.evaluate("//text()",e,null,XPathResult.ANY_TYPE,null);return i.makeString()}},function(){var e=function(e,t){if(!e||!t)return e;for(var n in t)e[n]!==t[n]&&(e[n]=t[n]);return e},t=function(e,t){var n=t.split("."),r;while(r=n.shift()){e=e[r];if(e===undefined)throw new Error("Cannot find object named "+t)}return e},n=function(e){var t=e.input.split(/\n/g),n=0,r=0;while(r<e.offset+1)r+=t[n].length+1,n+=1;var i="Line "+n+": expected "+e.expected+"\n",s=t[n-1];i+=s+"\n",r-=s.length+1;while(r<e.offset)i+=" ",r+=1;return i+"^"},r={__consume__union_expression:function(n){var r=null,i=this._offset;this._nodeCache.union_expression=this._nodeCache.union_expression||{};var s=this._nodeCache.union_expression[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=[],a={},f="",l=null;l=this.__consume__location_path();if(l){u.push(l),f+=l.textValue,a.head=l;var c=null,h=0,p=this._offset,d=[],v="",m=!0;while(m){var g=this._offset,y=[],b={},w="",E=null;E=this.__consume__space();if(E){y.push(E),w+=E.textValue,b.space=E;var S=null,x=null;this._input.length>this._offset?x=this._input.substring(this._offset,this._offset+1):x=null;if(x==="|"){var T=this.constructor.SyntaxNode,N=null;S=new T("|",this._offset,[]),typeof N=="object"&&e(S,N),this._offset+=1}else{S=null;var C=null;this._input.length>this._offset?C=this._input.substring(this._offset,this._offset+1):C=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"|"'}}if(S){y.push(S),w+=S.textValue;var k=null;k=this.__consume__space();if(k){y.push(k),w+=k.textValue,b.space=k;var L=null;L=this.__consume__location_path(),L?(y.push(L),w+=L.textValue,b.location_path=L):(y=null,this._offset=g)}else y=null,this._offset=g}else y=null,this._offset=g}else y=null,this._offset=g;if(y){this._offset=g;var A=this.constructor.SyntaxNode,O=null;m=new A(w,this._offset,y,b),typeof O=="object"&&e(m,O),this._offset+=w.length}else m=null;m&&(d.push(m),v+=m.textValue,h-=1)}if(h<=0){this._offset=p;var M=this.constructor.SyntaxNode,_=null;c=new M(v,this._offset,d),typeof _=="object"&&e(c,_),this._offset+=v.length}else c=null;c?(u.push(c),f+=c.textValue,a.rest=c):(u=null,this._offset=o)}else u=null,this._offset=o;if(u){this._offset=o;var D=this.constructor.SyntaxNode,P=t(this.constructor,"Union");r=new D(f,this._offset,u,a),typeof P=="object"&&e(r,P),this._offset+=f.length}else r=null;return this._nodeCache.union_expression[i]=r},__consume__location_path:function(n){var r=null,i=this._offset;this._nodeCache.location_path=this._nodeCache.location_path||{};var s=this._nodeCache.location_path[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=[],a={},f="",l=null;l=this.__consume__location_step();if(l){u.push(l),f+=l.textValue,a.head=l;var c=null,h=0,p=this._offset,d=[],v="",m=!0;while(m)m=this.__consume__location_step(),m&&(d.push(m),v+=m.textValue,h-=1);if(h<=0){this._offset=p;var g=this.constructor.SyntaxNode,y=null;c=new g(v,this._offset,d),typeof y=="object"&&e(c,y),this._offset+=v.length}else c=null;c?(u.push(c),f+=c.textValue,a.rest=c):(u=null,this._offset=o)}else u=null,this._offset=o;if(u){this._offset=o;var b=this.constructor.SyntaxNode,w=t(this.constructor,"LocationPath");r=new b(f,this._offset,u,a),typeof w=="object"&&e(r,w),this._offset+=f.length}else r=null;return this._nodeCache.location_path[i]=r},__consume__location_step:function(n){var r=null,i=this._offset;this._nodeCache.location_step=this._nodeCache.location_step||{};var s=this._nodeCache.location_step[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=[],a={},f="",l=null,c=this._offset,h=null;this._input.length>this._offset?h=this._input.substring(this._offset,this._offset+1):h=null;if(h==="/"){var p=this.constructor.SyntaxNode,d=null;l=new p("/",this._offset,[]),typeof d=="object"&&e(l,d),this._offset+=1}else{l=null;var v=null;this._input.length>this._offset?v=this._input.substring(this._offset,this._offset+1):v=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"/"'}}if(!l){this._offset=c;var m=this.constructor.SyntaxNode,g=null;l=new m("",this._offset,[]),typeof g=="object"&&e(l,g),this._offset+=0}if(l){u.push(l),f+=l.textValue;var y=null,b=this._offset,w=this._offset,E=[],S={},x="",T=null;T=this.__consume__axis();if(T){E.push(T),x+=T.textValue,S.axis=T;var N=null,C=this._offset;N=this.__consume__node_test();if(!N){this._offset=C;var k=this.constructor.SyntaxNode,L=null;N=new k("",this._offset,[]),typeof L=="object"&&e(N,L),this._offset+=0}N?(E.push(N),x+=N.textValue,S.test=N):(E=null,this._offset=w)}else E=null,this._offset=w;if(E){this._offset=w;var A=this.constructor.SyntaxNode,O=null;y=new A(x,this._offset,E,S),typeof O=="object"&&e(y,O),this._offset+=x.length}else y=null;if(!y){this._offset=b;var M=this._offset,_=[],D={},P="",H=null,B=this._offset;H=this.__consume__axis();if(!H){this._offset=B;var j=this.constructor.SyntaxNode,F=null;H=new j("",this._offset,[]),typeof F=="object"&&e(H,F),this._offset+=0}if(H){_.push(H),P+=H.textValue,D.axis=H;var I=null;I=this.__consume__node_test(),I?(_.push(I),P+=I.textValue,D.test=I):(_=null,this._offset=M)}else _=null,this._offset=M;if(_){this._offset=M;var q=this.constructor.SyntaxNode,R=null;y=new q(P,this._offset,_,D),typeof R=="object"&&e(y,R),this._offset+=P.length}else y=null;y||(this._offset=b)}if(y){u.push(y),f+=y.textValue,a.selector=y;var U=null,z=0,W=this._offset,X=[],V="",$=!0;while($)$=this.__consume__node_predicate(),$&&(X.push($),V+=$.textValue,z-=1);if(z<=0){this._offset=W;var J=this.constructor.SyntaxNode,K=null;U=new J(V,this._offset,X),typeof K=="object"&&e(U,K),this._offset+=V.length}else U=null;U?(u.push(U),f+=U.textValue,a.predicates=U):(u=null,this._offset=o)}else u=null,this._offset=o}else u=null,this._offset=o;if(u){this._offset=o;var Q=this.constructor.SyntaxNode,G=t(this.constructor,"LocationStep");r=new Q(f,this._offset,u,a),typeof G=="object"&&e(r,G),this._offset+=f.length}else r=null;return this._nodeCache.location_step[i]=r},__consume__axis:function(t){var n=null,r=this._offset;this._nodeCache.axis=this._nodeCache.axis||{};var i=this._nodeCache.axis[r];if(i)return this._offset+=i.textValue.length,i;var s=this._offset,o=this._offset,u=[],a={},f="",l=null,c=1,h=this._offset,p=[],d="",v=!0;while(v){var m=null;this._input.length>this._offset?m=this._input.substring(this._offset,this._offset+1):m=null;if(m&&/^[a-z\-]/.test(m)){var g=this.constructor.SyntaxNode,y=null;v=new g(m,this._offset,[]),typeof y=="object"&&e(v,y),this._offset+=1}else{v=null;var b=null;this._input.length>this._offset?b=this._input.substring(this._offset,this._offset+1):b=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:"[a-z\\-]"}}v&&(p.push(v),d+=v.textValue,c-=1)}if(c<=0){this._offset=h;var w=this.constructor.SyntaxNode,E=null;l=new w(d,this._offset,p),typeof E=="object"&&e(l,E),this._offset+=d.length}else l=null;if(l){u.push(l),f+=l.textValue,a.axis_name=l;var S=null,x=null;this._input.length>this._offset?x=this._input.substring(this._offset,this._offset+2):x=null;if(x==="::"){var T=this.constructor.SyntaxNode,N=null;S=new T("::",this._offset,[]),typeof N=="object"&&e(S,N),this._offset+=2}else{S=null;var C=null;this._input.length>this._offset?C=this._input.substring(this._offset,this._offset+1):C=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"::"'}}S?(u.push(S),f+=S.textValue):(u=null,this._offset=o)}else u=null,this._offset=o;if(u){this._offset=o;var k=this.constructor.SyntaxNode,L=null;n=new k(f,this._offset,u,a),typeof L=="object"&&e(n,L),this._offset+=f.length}else n=null;return n||(this._offset=s,n=this.__consume__axis_shorthand(),n||(this._offset=s)),this._nodeCache.axis[r]=n},__consume__axis_shorthand:function(t){var n=null,r=this._offset;this._nodeCache.axis_shorthand=this._nodeCache.axis_shorthand||{};var i=this._nodeCache.axis_shorthand[r];if(i)return this._offset+=i.textValue.length,i;var s=this._offset,o=null;this._input.length>this._offset?o=this._input.substring(this._offset,this._offset+1):o=null;if(o==="@"){var u=this.constructor.SyntaxNode,a=null;n=new u("@",this._offset,[]),typeof a=="object"&&e(n,a),this._offset+=1}else{n=null;var f=null;this._input.length>this._offset?f=this._input.substring(this._offset,this._offset+1):f=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"@"'}}if(!n){this._offset=s;var l=null;this._input.length>this._offset?l=this._input.substring(this._offset,this._offset+2):l=null;if(l===".."){var c=this.constructor.SyntaxNode,h=null;n=new c("..",this._offset,[]),typeof h=="object"&&e(n,h),this._offset+=2}else{n=null;var p=null;this._input.length>this._offset?p=this._input.substring(this._offset,this._offset+1):p=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'".."'}}if(!n){this._offset=s;var d=null;this._input.length>this._offset?d=this._input.substring(this._offset,this._offset+1):d=null;if(d==="."){var v=this.constructor.SyntaxNode,m=null;n=new v(".",this._offset,[]),typeof m=="object"&&e(n,m),this._offset+=1}else{n=null;var g=null;this._input.length>this._offset?g=this._input.substring(this._offset,this._offset+1):g=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"."'}}if(!n){this._offset=s;var y=null;this._input.length>this._offset?y=this._input.substring(this._offset,this._offset+1):y=null;if(y==="/"){var b=this.constructor.SyntaxNode,w=null;n=new b("/",this._offset,[]),typeof w=="object"&&e(n,w),this._offset+=1}else{n=null;var E=null;this._input.length>this._offset?E=this._input.substring(this._offset,this._offset+1):E=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"/"'}}n||(this._offset=s)}}}return this._nodeCache.axis_shorthand[r]=n},__consume__node_test:function(n){var r=null,i=this._offset;this._nodeCache.node_test=this._nodeCache.node_test||{};var s=this._nodeCache.node_test[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=[],a={},f="",l=null,c=this._offset;l=this.__consume__node_condition();if(!l){this._offset=c,l=this.__consume__node_name();if(!l){this._offset=c;var h=null;this._input.length>this._offset?h=this._input.substring(this._offset,this._offset+1):h=null;if(h==="*"){var p=this.constructor.SyntaxNode,d=null;l=new p("*",this._offset,[]),typeof d=="object"&&e(l,d),this._offset+=1}else{l=null;var v=null;this._input.length>this._offset?v=this._input.substring(this._offset,this._offset+1):v=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"*"'}}l||(this._offset=c)}}if(l){u.push(l),f+=l.textValue;var m=null,g=this._offset;m=this.__consume__subscript();if(!m){this._offset=g;var y=this.constructor.SyntaxNode,b=null;m=new y("",this._offset,[]),typeof b=="object"&&e(m,b),this._offset+=0}m?(u.push(m),f+=m.textValue,a.subscript=m):(u=null,this._offset=o)}else u=null,this._offset=o;if(u){this._offset=o;var w=this.constructor.SyntaxNode,E=t(this.constructor,"NodeTest");r=new w(f,this._offset,u,a),typeof E=="object"&&e(r,E),this._offset+=f.length}else r=null;return this._nodeCache.node_test[i]=r},__consume__node_condition:function(t){var n=null,r=this._offset;this._nodeCache.node_condition=this._nodeCache.node_condition||{};var i=this._nodeCache.node_condition[r];if(i)return this._offset+=i.textValue.length,i;var s=this._offset,o=[],u={},a="",f=null,l=1,c=this._offset,h=[],p="",d=!0;while(d){var v=null;this._input.length>this._offset?v=this._input.substring(this._offset,this._offset+1):v=null;if(v&&/^[a-z\-]/.test(v)){var m=this.constructor.SyntaxNode,g=null;d=new m(v,this._offset,[]),typeof g=="object"&&e(d,g),this._offset+=1}else{d=null;var y=null;this._input.length>this._offset?y=this._input.substring(this._offset,this._offset+1):y=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:"[a-z\\-]"}}d&&(h.push(d),p+=d.textValue,l-=1)}if(l<=0){this._offset=c;var b=this.constructor.SyntaxNode,w=null;f=new b(p,this._offset,h),typeof w=="object"&&e(f,w),this._offset+=p.length}else f=null;if(f){o.push(f),a+=f.textValue,u.condition_name=f;var E=null,S=null;this._input.length>this._offset?S=this._input.substring(this._offset,this._offset+2):S=null;if(S==="()"){var x=this.constructor.SyntaxNode,T=null;E=new x("()",this._offset,[]),typeof T=="object"&&e(E,T),this._offset+=2}else{E=null;var N=null;this._input.length>this._offset?N=this._input.substring(this._offset,this._offset+1):N=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"()"'}}E?(o.push(E),a+=E.textValue):(o=null,this._offset=s)}else o=null,this._offset=s;if(o){this._offset=s;var C=this.constructor.SyntaxNode,k=null;n=new C(a,this._offset,o,u),typeof k=="object"&&e(n,k),this._offset+=a.length}else n=null;return this._nodeCache.node_condition[r]=n},__consume__node_name:function(t){var n=null,r=this._offset;this._nodeCache.node_name=this._nodeCache.node_name||{};var i=this._nodeCache.node_name[r];if(i)return this._offset+=i.textValue.length,i;var s=1,o=this._offset,u=[],a="",f=!0;while(f){var l=null;this._input.length>this._offset?l=this._input.substring(this._offset,this._offset+1):l=null;if(l&&/^[A-Za-z0-9\-]/.test(l)){var c=this.constructor.SyntaxNode,h=null;f=new c(l,this._offset,[]),typeof h=="object"&&e(f,h),this._offset+=1}else{f=null;var p=null;this._input.length>this._offset?p=this._input.substring(this._offset,this._offset+1):p=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:"[A-Za-z0-9\\-]"}}f&&(u.push(f),a+=f.textValue,s-=1)}if(s<=0){this._offset=o;var d=this.constructor.SyntaxNode,v=null;n=new d(a,this._offset,u),typeof v=="object"&&e(n,v),this._offset+=a.length}else n=null;return this._nodeCache.node_name[r]=n},__consume__subscript:function(t){var n=null,r=this._offset;this._nodeCache.subscript=this._nodeCache.subscript||{};var i=this._nodeCache.subscript[r];if(i)return this._offset+=i.textValue.length,i;var s=this._offset,o=[],u={},a="",f=null,l=null;this._input.length>this._offset?l=this._input.substring(this._offset,this._offset+1):l=null;if(l==="["){var c=this.constructor.SyntaxNode,h=null;f=new c("[",this._offset,[]),typeof h=="object"&&e(f,h),this._offset+=1}else{f=null;var p=null;this._input.length>this._offset?p=this._input.substring(this._offset,this._offset+1):p=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"["'}}if(f){o.push(f),a+=f.textValue;var d=null;d=this.__consume__space();if(d){o.push(d),a+=d.textValue,u.space=d;var v=null;v=this.__consume__integer();if(v){o.push(v),a+=v.textValue,u.integer=v;var m=null;m=this.__consume__space();if(m){o.push(m),a+=m.textValue,u.space=m;var g=null,y=null;this._input.length>this._offset?y=this._input.substring(this._offset,this._offset+1):y=null;if(y==="]"){var b=this.constructor.SyntaxNode,w=null;g=new b("]",this._offset,[]),typeof w=="object"&&e(g,w),this._offset+=1}else{g=null;var E=null;this._input.length>this._offset?E=this._input.substring(this._offset,this._offset+1):E=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"]"'}}g?(o.push(g),a+=g.textValue):(o=null,this._offset=s)}else o=null,this._offset=s}else o=null,this._offset=s}else o=null,this._offset=s}else o=null,this._offset=s;if(o){this._offset=s;var S=this.constructor.SyntaxNode,x=null;n=new S(a,this._offset,o,u),typeof x=="object"&&e(n,x),this._offset+=a.length}else n=null;return this._nodeCache.subscript[r]=n},__consume__node_predicate:function(t){var n=null,r=this._offset;this._nodeCache.node_predicate=this._nodeCache.node_predicate||{};var i=this._nodeCache.node_predicate[r];if(i)return this._offset+=i.textValue.length,i;var s=this._offset,o=[],u={},a="",f=null,l=null;this._input.length>this._offset?l=this._input.substring(this._offset,this._offset+1):l=null;if(l==="["){var c=this.constructor.SyntaxNode,h=null;f=new c("[",this._offset,[]),typeof h=="object"&&e(f,h),this._offset+=1}else{f=null;var p=null;this._input.length>this._offset?p=this._input.substring(this._offset,this._offset+1):p=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"["'}}if(f){o.push(f),a+=f.textValue;var d=null;d=this.__consume__expression();if(d){o.push(d),a+=d.textValue,u.expression=d;var v=null,m=null;this._input.length>this._offset?m=this._input.substring(this._offset,this._offset+1):m=null;if(m==="]"){var g=this.constructor.SyntaxNode,y=null;v=new g("]",this._offset,[]),typeof y=="object"&&e(v,y),this._offset+=1}else{v=null;var b=null;this._input.length>this._offset?b=this._input.substring(this._offset,this._offset+1):b=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"]"'}}if(v){o.push(v),a+=v.textValue;var w=null,E=this._offset;w=this.__consume__subscript();if(!w){this._offset=E;var S=this.constructor.SyntaxNode,x=null;w=new S("",this._offset,[]),typeof x=="object"&&e(w,x),this._offset+=0}w?(o.push(w),a+=w.textValue,u.subscript=w):(o=null,this._offset=s)}else o=null,this._offset=s}else o=null,this._offset=s}else o=null,this._offset=s;if(o){this._offset=s;var T=this.constructor.SyntaxNode,N=null;n=new T(a,this._offset,o,u),typeof N=="object"&&e(n,N),this._offset+=a.length}else n=null;return this._nodeCache.node_predicate[r]=n},__consume__expression:function(e){var t=null,n=this._offset;this._nodeCache.expression=this._nodeCache.expression||{};var r=this._nodeCache.expression[n];if(r)return this._offset+=r.textValue.length,r;var i=this._offset;return t=this.__consume__or_expression(),t||(this._offset=i,t=this.__consume__and_expression(),t||(this._offset=i,t=this.__consume__comparison(),t||(this._offset=i,t=this.__consume__atom(),t||(this._offset=i)))),this._nodeCache.expression[n]=t},__consume__or_expression:function(n){var r=null,i=this._offset;this._nodeCache.or_expression=this._nodeCache.or_expression||{};var s=this._nodeCache.or_expression[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=this._offset,a=[],f={},l="",c=null;c=this.__consume__and_expression();if(c){a.push(c),l+=c.textValue,f.left=c;var h=null,p=null;this._input.length>this._offset?p=this._input.substring(this._offset,this._offset+2):p=null;if(p==="or"){var d=this.constructor.SyntaxNode,v=null;h=new d("or",this._offset,[]),typeof v=="object"&&e(h,v),this._offset+=2}else{h=null;var m=null;this._input.length>this._offset?m=this._input.substring(this._offset,this._offset+1):m=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"or"'}}if(h){a.push(h),l+=h.textValue;var g=null;g=this.__consume__or_expression(),g?(a.push(g),l+=g.textValue,f.right=g):(a=null,this._offset=u)}else a=null,this._offset=u}else a=null,this._offset=u;if(a){this._offset=u;var y=this.constructor.SyntaxNode,b=t(this.constructor,"Or");r=new y(l,this._offset,a,f),typeof b=="object"&&e(r,b),this._offset+=l.length}else r=null;return r||(this._offset=o,r=this.__consume__and_expression(),r||(this._offset=o)),this._nodeCache.or_expression[i]=r},__consume__and_expression:function(n){var r=null,i=this._offset;this._nodeCache.and_expression=this._nodeCache.and_expression||{};var s=this._nodeCache.and_expression[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=this._offset,a=[],f={},l="",c=null;c=this.__consume__comparison();if(c){a.push(c),l+=c.textValue,f.left=c;var h=null,p=null;this._input.length>this._offset?p=this._input.substring(this._offset,this._offset+3):p=null;if(p==="and"){var d=this.constructor.SyntaxNode,v=null;h=new d("and",this._offset,[]),typeof v=="object"&&e(h,v),this._offset+=3}else{h=null;var m=null;this._input.length>this._offset?m=this._input.substring(this._offset,this._offset+1):m=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"and"'}}if(h){a.push(h),l+=h.textValue;var g=null;g=this.__consume__and_expression(),g?(a.push(g),l+=g.textValue,f.right=g):(a=null,this._offset=u)}else a=null,this._offset=u}else a=null,this._offset=u;if(a){this._offset=u;var y=this.constructor.SyntaxNode,b=t(this.constructor,"And");r=new y(l,this._offset,a,f),typeof b=="object"&&e(r,b),this._offset+=l.length}else r=null;return r||(this._offset=o,r=this.__consume__comparison(),r||(this._offset=o)),this._nodeCache.and_expression[i]=r},__consume__comparison:function(n){var r=null,i=this._offset;this._nodeCache.comparison=this._nodeCache.comparison||{};var s=this._nodeCache.comparison[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=this._offset,a=[],f={},l="",c=null;c=this.__consume__atom();if(c){a.push(c),l+=c.textValue,f.left=c;var h=null;h=this.__consume__comparator();if(h){a.push(h),l+=h.textValue,f.comparator=h;var p=null;p=this.__consume__comparison(),p?(a.push(p),l+=p.textValue,f.right=p):(a=null,this._offset=u)}else a=null,this._offset=u}else a=null,this._offset=u;if(a){this._offset=u;var d=this.constructor.SyntaxNode,v=t(this.constructor,"Comparison");r=new d(l,this._offset,a,f),typeof v=="object"&&e(r,v),this._offset+=l.length}else r=null;return r||(this._offset=o,r=this.__consume__atom(),r||(this._offset=o)),this._nodeCache.comparison[i]=r},__consume__comparator:function(t){var n=null,r=this._offset;this._nodeCache.comparator=this._nodeCache.comparator||{};var i=this._nodeCache.comparator[r];if(i)return this._offset+=i.textValue.length,i;var s=this._offset,o=null;this._input.length>this._offset?o=this._input.substring(this._offset,this._offset+2):o=null;if(o==="!="){var u=this.constructor.SyntaxNode,a=null;n=new u("!=",this._offset,[]),typeof a=="object"&&e(n,a),this._offset+=2}else{n=null;var f=null;this._input.length>this._offset?f=this._input.substring(this._offset,this._offset+1):f=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"!="'}}if(!n){this._offset=s;var l=null;this._input.length>this._offset?l=this._input.substring(this._offset,this._offset+1):l=null;if(l==="="){var c=this.constructor.SyntaxNode,h=null;n=new c("=",this._offset,[]),typeof h=="object"&&e(n,h),this._offset+=1}else{n=null;var p=null;this._input.length>this._offset?p=this._input.substring(this._offset,this._offset+1):p=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"="'}}n||(this._offset=s)}return this._nodeCache.comparator[r]=n},__consume__atom:function(n){var r=null,i=this._offset;this._nodeCache.atom=this._nodeCache.atom||{};var s=this._nodeCache.atom[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=[],a={},f="",l=null;l=this.__consume__space();if(l){u.push(l),f+=l.textValue,a.space=l;var c=null,h=this._offset,p=this._offset,d=[],v={},m="",g=null,y=null;this._input.length>this._offset?y=this._input.substring(this._offset,this._offset+1):y=null;if(y==="("){var b=this.constructor.SyntaxNode,w=null;g=new b("(",this._offset,[]),typeof w=="object"&&e(g,w),this._offset+=1}else{g=null;var E=null;this._input.length>this._offset?E=this._input.substring(this._offset,this._offset+1):E=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"("'}}if(g){d.push(g),m+=g.textValue;var S=null;S=this.__consume__expression();if(S){d.push(S),m+=S.textValue,v.in_parens=S;var x=null,T=null;this._input.length>this._offset?T=this._input.substring(this._offset,this._offset+1):T=null;if(T===")"){var N=this.constructor.SyntaxNode,C=null;x=new N(")",this._offset,[]),typeof C=="object"&&e(x,C),this._offset+=1}else{x=null;var k=null;this._input.length>this._offset?k=this._input.substring(this._offset,this._offset+1):k=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'")"'}}x?(d.push(x),m+=x.textValue):(d=null,this._offset=p)}else d=null,this._offset=p}else d=null,this._offset=p;if(d){this._offset=p;var L=this.constructor.SyntaxNode,A=null;c=new L(m,this._offset,d,v),typeof A=="object"&&e(c,A),this._offset+=m.length}else c=null;c||(this._offset=h,c=this.__consume__value(),c||(this._offset=h));if(c){u.push(c),f+=c.textValue,a.expression=c;var O=null;O=this.__consume__space(),O?(u.push(O),f+=O.textValue,a.space=O):(u=null,this._offset=o)}else u=null,this._offset=o}else u=null,this._offset=o;if(u){this._offset=o;var M=this.constructor.SyntaxNode,_=t(this.constructor,"Atom");r=new M(f,this._offset,u,a),typeof _=="object"&&e(r,_),this._offset+=f.length}else r=null;return this._nodeCache.atom[i]=r},__consume__value:function(e){var t=null,n=this._offset;this._nodeCache.value=this._nodeCache.value||{};var r=this._nodeCache.value[n];if(r)return this._offset+=r.textValue.length,r;var i=this._offset;return t=this.__consume__function_call(),t||(this._offset=i,t=this.__consume__string(),t||(this._offset=i,t=this.__consume__union_expression(),t||(this._offset=i))),this._nodeCache.value[n]=t},__consume__function_call:function(n){var r=null,i=this._offset;this._nodeCache.function_call=this._nodeCache.function_call||{};var s=this._nodeCache.function_call[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=[],a={},f="",l=null;l=this.__consume__function_name();if(l){u.push(l),f+=l.textValue,a.function_name=l;var c=null,h=null;this._input.length>this._offset?h=this._input.substring(this._offset,this._offset+1):h=null;if(h==="("){var p=this.constructor.SyntaxNode,d=null;c=new p("(",this._offset,[]),typeof d=="object"&&e(c,d),this._offset+=1}else{c=null;var v=null;this._input.length>this._offset?v=this._input.substring(this._offset,this._offset+1):v=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"("'}}if(c){u.push(c),f+=c.textValue;var m=null;m=this.__consume__function_args();if(m){u.push(m),f+=m.textValue,a.function_args=m;var g=null,y=null;this._input.length>this._offset?y=this._input.substring(this._offset,this._offset+1):y=null;if(y===")"){var b=this.constructor.SyntaxNode,w=null;g=new b(")",this._offset,[]),typeof w=="object"&&e(g,w),this._offset+=1}else{g=null;var E=null;this._input.length>this._offset?E=this._input.substring(this._offset,this._offset+1):E=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'")"'}}g?(u.push(g),f+=g.textValue):(u=null,this._offset=o)}else u=null,this._offset=o}else u=null,this._offset=o}else u=null,this._offset=o;if(u){this._offset=o;var S=this.constructor.SyntaxNode,x=t(this.constructor,"FunctionCall");r=new S(f,this._offset,u,a),typeof x=="object"&&e(r,x),this._offset+=f.length}else r=null;return this._nodeCache.function_call[i]=r},__consume__function_name:function(t){var n=null,r=this._offset;this._nodeCache.function_name=this._nodeCache.function_name||{};var i=this._nodeCache.function_name[r];if(i)return this._offset+=i.textValue.length,i;var s=1,o=this._offset,u=[],a="",f=!0;while(f){var l=null;this._input.length>this._offset?l=this._input.substring(this._offset,this._offset+1):l=null;if(l&&/^[a-z\-]/.test(l)){var c=this.constructor.SyntaxNode,h=null;f=new c(l,this._offset,[]),typeof h=="object"&&e(f,h),this._offset+=1}else{f=null;var p=null;this._input.length>this._offset?p=this._input.substring(this._offset,this._offset+1):p=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:"[a-z\\-]"}}f&&(u.push(f),a+=f.textValue,s-=1)}if(s<=0){this._offset=o;var d=this.constructor.SyntaxNode,v=null;n=new d(a,this._offset,u),typeof v=="object"&&e(n,v),this._offset+=a.length}else n=null;return this._nodeCache.function_name[r]=n},__consume__function_args:function(t){var n=null,r=this._offset;this._nodeCache.function_args=this._nodeCache.function_args||{};var i=this._nodeCache.function_args[r];if(i)return this._offset+=i.textValue.length,i;var s=this._offset,o=this._offset,u=[],a={},f="",l=null;l=this.__consume__expression();if(l){u.push(l),f+=l.textValue,a.first=l;var c=null,h=0,p=this._offset,d=[],v="",m=!0;while(m){var g=this._offset,y=[],b={},w="",E=null,S=null;this._input.length>this._offset?S=this._input.substring(this._offset,this._offset+1):S=null;if(S===","){var x=this.constructor.SyntaxNode,T=null;E=new x(",",this._offset,[]),typeof T=="object"&&e(E,T),this._offset+=1}else{E=null;var N=null;this._input.length>this._offset?N=this._input.substring(this._offset,this._offset+1):N=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'","'}}if(E){y.push(E),w+=E.textValue;var C=null;C=this.__consume__expression(),C?(y.push(C),w+=C.textValue,b.expression=C):(y=null,this._offset=g)}else y=null,this._offset=g;if(y){this._offset=g;var k=this.constructor.SyntaxNode,L=null;m=new k(w,this._offset,y,b),typeof L=="object"&&e(m,L),this._offset+=w.length}else m=null;m&&(d.push(m),v+=m.textValue,h-=1)}if(h<=0){this._offset=p;var A=this.constructor.SyntaxNode,O=null;c=new A(v,this._offset,d),typeof O=="object"&&e(c,O),this._offset+=v.length}else c=null;c?(u.push(c),f+=c.textValue,a.rest=c):(u=null,this._offset=o)}else u=null,this._offset=o;if(u){this._offset=o;var M=this.constructor.SyntaxNode,_=null;n=new M(f,this._offset,u,a),typeof _=="object"&&e(n,_),this._offset+=f.length}else n=null;if(!n){this._offset=s;var D=this.constructor.SyntaxNode,P=null;n=new D("",this._offset,[]),typeof P=="object"&&e(n,P),this._offset+=0}return this._nodeCache.function_args[r]=n},__consume__integer:function(n){var r=null,i=this._offset;this._nodeCache.integer=this._nodeCache.integer||{};var s=this._nodeCache.integer[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=[],a={},f="",l=null,c=null;this._input.length>this._offset?c=this._input.substring(this._offset,this._offset+1):c=null;if(c&&/^[1-9]/
.test(c)){var h=this.constructor.SyntaxNode,p=null;l=new h(c,this._offset,[]),typeof p=="object"&&e(l,p),this._offset+=1}else{l=null;var d=null;this._input.length>this._offset?d=this._input.substring(this._offset,this._offset+1):d=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:"[1-9]"}}if(l){u.push(l),f+=l.textValue;var v=null,m=0,g=this._offset,y=[],b="",w=!0;while(w){var E=null;this._input.length>this._offset?E=this._input.substring(this._offset,this._offset+1):E=null;if(E&&/^[0-9]/.test(E)){var S=this.constructor.SyntaxNode,x=null;w=new S(E,this._offset,[]),typeof x=="object"&&e(w,x),this._offset+=1}else{w=null;var T=null;this._input.length>this._offset?T=this._input.substring(this._offset,this._offset+1):T=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:"[0-9]"}}w&&(y.push(w),b+=w.textValue,m-=1)}if(m<=0){this._offset=g;var N=this.constructor.SyntaxNode,C=null;v=new N(b,this._offset,y),typeof C=="object"&&e(v,C),this._offset+=b.length}else v=null;v?(u.push(v),f+=v.textValue):(u=null,this._offset=o)}else u=null,this._offset=o;if(u){this._offset=o;var k=this.constructor.SyntaxNode,L=t(this.constructor,"Integer");r=new k(f,this._offset,u,a),typeof L=="object"&&e(r,L),this._offset+=f.length}else r=null;return this._nodeCache.integer[i]=r},__consume__string:function(n){var r=null,i=this._offset;this._nodeCache.string=this._nodeCache.string||{};var s=this._nodeCache.string[i];if(s)return this._offset+=s.textValue.length,s;var o=this._offset,u=this._offset,a=[],f={},l="",c=null,h=null;this._input.length>this._offset?h=this._input.substring(this._offset,this._offset+1):h=null;if(h==="'"){var p=this.constructor.SyntaxNode,d=null;c=new p("'",this._offset,[]),typeof d=="object"&&e(c,d),this._offset+=1}else{c=null;var v=null;this._input.length>this._offset?v=this._input.substring(this._offset,this._offset+1):v=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"\'"'}}if(c){a.push(c),l+=c.textValue;var m=null,g=0,y=this._offset,b=[],w="",E=!0;while(E){var S=this._offset,x=this._offset,T=[],N={},C="",k=null,L=null;this._input.length>this._offset?L=this._input.substring(this._offset,this._offset+1):L=null;if(L==="\\"){var A=this.constructor.SyntaxNode,O=null;k=new A("\\",this._offset,[]),typeof O=="object"&&e(k,O),this._offset+=1}else{k=null;var M=null;this._input.length>this._offset?M=this._input.substring(this._offset,this._offset+1):M=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"\\\\"'}}if(k){T.push(k),C+=k.textValue;var _=null,D=null;this._input.length>this._offset?D=this._input.substring(this._offset,this._offset+1):D=null;var P=D;if(P===null){_=null;var H=null;this._input.length>this._offset?H=this._input.substring(this._offset,this._offset+1):H=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:"<any char>"}}else{var B=this.constructor.SyntaxNode,j=null;_=new B(P,this._offset,[]),typeof j=="object"&&e(_,j),this._offset+=1}_?(T.push(_),C+=_.textValue):(T=null,this._offset=x)}else T=null,this._offset=x;if(T){this._offset=x;var F=this.constructor.SyntaxNode,I=null;E=new F(C,this._offset,T,N),typeof I=="object"&&e(E,I),this._offset+=C.length}else E=null;if(!E){this._offset=S;var q=null;this._input.length>this._offset?q=this._input.substring(this._offset,this._offset+1):q=null;if(q&&/^[^']/.test(q)){var R=this.constructor.SyntaxNode,U=null;E=new R(q,this._offset,[]),typeof U=="object"&&e(E,U),this._offset+=1}else{E=null;var z=null;this._input.length>this._offset?z=this._input.substring(this._offset,this._offset+1):z=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:"[^']"}}E||(this._offset=S)}E&&(b.push(E),w+=E.textValue,g-=1)}if(g<=0){this._offset=y;var W=this.constructor.SyntaxNode,X=null;m=new W(w,this._offset,b),typeof X=="object"&&e(m,X),this._offset+=w.length}else m=null;if(m){a.push(m),l+=m.textValue;var V=null,$=null;this._input.length>this._offset?$=this._input.substring(this._offset,this._offset+1):$=null;if($==="'"){var J=this.constructor.SyntaxNode,K=null;V=new J("'",this._offset,[]),typeof K=="object"&&e(V,K),this._offset+=1}else{V=null;var Q=null;this._input.length>this._offset?Q=this._input.substring(this._offset,this._offset+1):Q=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"\'"'}}V?(a.push(V),l+=V.textValue):(a=null,this._offset=u)}else a=null,this._offset=u}else a=null,this._offset=u;if(a){this._offset=u;var G=this.constructor.SyntaxNode,Y=null;r=new G(l,this._offset,a,f),typeof Y=="object"&&e(r,Y),this._offset+=l.length}else r=null;if(r){var Z=t(this.constructor,"String");typeof Z=="object"&&e(r,Z)}else{this._offset=o;var et=this._offset,tt=[],nt={},rt="",it=null,st=null;this._input.length>this._offset?st=this._input.substring(this._offset,this._offset+1):st=null;if(st==='"'){var ot=this.constructor.SyntaxNode,ut=null;it=new ot('"',this._offset,[]),typeof ut=="object"&&e(it,ut),this._offset+=1}else{it=null;var at=null;this._input.length>this._offset?at=this._input.substring(this._offset,this._offset+1):at=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"\\""'}}if(it){tt.push(it),rt+=it.textValue;var ft=null,lt=0,ct=this._offset,ht=[],pt="",dt=!0;while(dt){var vt=this._offset,mt=this._offset,gt=[],yt={},bt="",wt=null,Et=null;this._input.length>this._offset?Et=this._input.substring(this._offset,this._offset+1):Et=null;if(Et==="\\"){var St=this.constructor.SyntaxNode,xt=null;wt=new St("\\",this._offset,[]),typeof xt=="object"&&e(wt,xt),this._offset+=1}else{wt=null;var Tt=null;this._input.length>this._offset?Tt=this._input.substring(this._offset,this._offset+1):Tt=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"\\\\"'}}if(wt){gt.push(wt),bt+=wt.textValue;var Nt=null,Ct=null;this._input.length>this._offset?Ct=this._input.substring(this._offset,this._offset+1):Ct=null;var kt=Ct;if(kt===null){Nt=null;var Lt=null;this._input.length>this._offset?Lt=this._input.substring(this._offset,this._offset+1):Lt=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:"<any char>"}}else{var At=this.constructor.SyntaxNode,Ot=null;Nt=new At(kt,this._offset,[]),typeof Ot=="object"&&e(Nt,Ot),this._offset+=1}Nt?(gt.push(Nt),bt+=Nt.textValue):(gt=null,this._offset=mt)}else gt=null,this._offset=mt;if(gt){this._offset=mt;var Mt=this.constructor.SyntaxNode,_t=null;dt=new Mt(bt,this._offset,gt,yt),typeof _t=="object"&&e(dt,_t),this._offset+=bt.length}else dt=null;if(!dt){this._offset=vt;var Dt=null;this._input.length>this._offset?Dt=this._input.substring(this._offset,this._offset+1):Dt=null;if(Dt&&/^[^"]/.test(Dt)){var Pt=this.constructor.SyntaxNode,Ht=null;dt=new Pt(Dt,this._offset,[]),typeof Ht=="object"&&e(dt,Ht),this._offset+=1}else{dt=null;var Bt=null;this._input.length>this._offset?Bt=this._input.substring(this._offset,this._offset+1):Bt=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'[^"]'}}dt||(this._offset=vt)}dt&&(ht.push(dt),pt+=dt.textValue,lt-=1)}if(lt<=0){this._offset=ct;var jt=this.constructor.SyntaxNode,Ft=null;ft=new jt(pt,this._offset,ht),typeof Ft=="object"&&e(ft,Ft),this._offset+=pt.length}else ft=null;if(ft){tt.push(ft),rt+=ft.textValue;var It=null,qt=null;this._input.length>this._offset?qt=this._input.substring(this._offset,this._offset+1):qt=null;if(qt==='"'){var Rt=this.constructor.SyntaxNode,Ut=null;It=new Rt('"',this._offset,[]),typeof Ut=="object"&&e(It,Ut),this._offset+=1}else{It=null;var zt=null;this._input.length>this._offset?zt=this._input.substring(this._offset,this._offset+1):zt=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'"\\""'}}It?(tt.push(It),rt+=It.textValue):(tt=null,this._offset=et)}else tt=null,this._offset=et}else tt=null,this._offset=et;if(tt){this._offset=et;var Wt=this.constructor.SyntaxNode,Xt=null;r=new Wt(rt,this._offset,tt,nt),typeof Xt=="object"&&e(r,Xt),this._offset+=rt.length}else r=null;if(r){var Vt=t(this.constructor,"String");typeof Vt=="object"&&e(r,Vt)}else this._offset=o}return this._nodeCache.string[i]=r},__consume__space:function(t){var n=null,r=this._offset;this._nodeCache.space=this._nodeCache.space||{};var i=this._nodeCache.space[r];if(i)return this._offset+=i.textValue.length,i;var s=0,o=this._offset,u=[],a="",f=!0;while(f){var l=null;this._input.length>this._offset?l=this._input.substring(this._offset,this._offset+1):l=null;if(l===" "){var c=this.constructor.SyntaxNode,h=null;f=new c(" ",this._offset,[]),typeof h=="object"&&e(f,h),this._offset+=1}else{f=null;var p=null;this._input.length>this._offset?p=this._input.substring(this._offset,this._offset+1):p=null;if(!this.error||this.error.offset<=this._offset)this.error=this.constructor.lastError={input:this._input,offset:this._offset,expected:'" "'}}f&&(u.push(f),a+=f.textValue,s-=1)}if(s<=0){this._offset=o;var d=this.constructor.SyntaxNode,v=null;n=new d(a,this._offset,u),typeof v=="object"&&e(n,v),this._offset+=a.length}else n=null;return this._nodeCache.space[r]=n}},i=function(e){this._input=e,this._offset=0,this._nodeCache={}};i.prototype.parse=function(){var e=this.__consume__union_expression();if(e&&this._offset===this._input.length)return e;this.error||(this.error={input:this._input,offset:this._offset,expected:"<EOF>"});var t=n(this.error),r=new Error(t);throw r},i.parse=function(e){var t=new i(e);return t.parse()},e(i.prototype,r);var s=function(e,t,n,r){this.textValue=e,this.offset=t,this.elements=n||[];if(!r)return;for(var i in r)this[i]=r[i]};s.prototype.forEach=function(e,t){for(var n=0,r=this.elements.length;n<r;n++)e.call(t,this.elements[n],n)},i.SyntaxNode=s;if(typeof require=="function"&&typeof exports=="object")exports.Grammar=r,exports.Parser=i,exports.parse=i.parse,typeof Pathology!="undefined"&&(Pathology.XPath=r,Pathology.XPathParser=i,Pathology.XPathParser.formatError=n);else{var o=this;o=o.Pathology=o.Pathology||{},Pathology.XPath=r,Pathology.XPathParser=i,Pathology.XPathParser.formatError=n}}(),Pathology.XPathParser.And={evaluate:function(e,t){return Pathology.atomize(this.left,e,t)&&Pathology.atomize(this.right,e,t)}},Pathology.XPathParser.Atom={evaluate:function(e,t){var n=this.expression.in_parens||this.expression;return n.evaluate(e,t)}},Pathology.Axis=function(e){this.name=e},Pathology.Axis.prototype.walk=function(e,t,n){var r=e.childNodes,i=Pathology.array(e.attributes),s;e.checked&&i.push({nodeName:"checked",nodeValue:!0,nodeType:XPathResult.STRING_TYPE}),e.selected&&i.push({nodeName:"selected",nodeValue:!0,nodeType:XPathResult.STRING_TYPE});switch(this.name){case"attribute":for(var o=0,u=i.length;o<u;o++)t.call(n,i[o]);break;case"child":for(var o=0,u=r.length;o<u;o++)t.call(n,r[o]);break;case"descendant-or-self":t.call(n,e);for(var o=0,u=r.length;o<u;o++)this.walk(r[o],t,n);break;case"following-sibling":s=e.nextSibling;while(s)t.call(n,s),s=s.nextSibling;break;case"parent":t.call(n,e.parentNode);break;case"self":t.call(n,e)}},Pathology.Axis.SHORTHANDS={"@":"attribute","..":"parent",".":"self","/":"descendant-or-self","":"child"},Pathology.Axis.fromAST=function(e){var t=e.axis_name?e.axis_name.textValue:e.textValue;return new this(this.SHORTHANDS[t]||t)},Pathology.XPathParser.Comparison={evaluate:function(e,t){var n=this.comparator.textValue,r=this.left.evaluate(e,t),i=Pathology.atomize(this.right,e,t),s=!1,o=i instanceof Array,u;if(r._nodes){for(var a=0,f=r._nodes.length;a<f;a++)u=r._nodes[a],n==="="?s=s||(o?Pathology.indexOf(i,u.nodeValue)>=0:u.nodeValue===i||u.innerHTML===i):n==="!="&&(s=s||(o?Pathology.indexOf(i,u.nodeValue)<0:u.nodeValue!==i&&u.innerHTML!==i));return s}switch(n){case"=":return o?Pathology.indexOf(i,r.nodeValue)>=0:r==i;case"!=":return o?Pathology.indexOf(i,u.nodeValue)<0:r!=i}}},Pathology.XPathParser.FunctionCall={getArguments:function(e,t){var n=[],r=this.function_args.rest;this.function_args.first&&this.function_args.first.evaluate&&n.push(this.function_args.first.evaluate(e,t));if(r)for(var i=0,s=r.elements.length;i<s;i++)n.push(r.elements[i].expression.evaluate(e,t));return n},evaluate:function(e,t){var n=this.getArguments(e,t),r=this.REGISTER[this.function_name.textValue];return r.apply(e,n)},REGISTER:{concat:function(){var e="";for(var t=0,n=arguments.length;t<n;t++)e+=arguments[t].makeString?arguments[t].makeString():arguments[t];return e},contains:function(e,t){return e?(e.makeString&&(e=e.makeString()),e.toString().indexOf(t)>=0):!1},"normalize-space":function(e){return e.makeString&&(e=e.makeString()),e.toString().replace(/^\s*/g,"").replace(/\s*$/g,"").replace(/\s+/g," ")},name:function(){return this.nodeName.toLowerCase()},not:function(e){return e&&e.atomize&&(e=e.atomize()),typeof e=="string"?!1:!e},string:function(e){return e.atomize().innerText},text:function(){return document.evaluate("/text()",this,null,XPathResult.ANY_TYPE,null)}}},Pathology.XPathParser.LocationPath={eachStep:function(e,t){var n=[this.head].concat(this.rest.elements);for(var r=0,i=n.length;r<i;r++)e.call(t,n[r])},evaluate:function(e,t,n,r){r=r||new Pathology.XPathResult(XPathResult.ANY_TYPE),n=n||XPathResult.ANY_TYPE;var i=new Pathology.XPathResult(n),s=this.head.isRelative()?e:t,o=[this.head].concat(this.rest.elements),u,a,f,l,c,h;i.push(s);for(f=0,c=o.length;f<c;f++){u=o[f],a=new Pathology.XPathResult(n);for(l=0,h=i._nodes.length;l<h;l++)u.evaluate(i._nodes[l],t,n,a);i=a}for(f=0,c=i._nodes.length;f<c;f++)r.push(i._nodes[f]);return r}},Pathology.XPathParser.LocationStep={isRelative:function(){return this.elements[0].textValue!=="/"},evaluate:function(e,t,n,r){var i=this.selector.axis,s=this.selector.test,o=[[]];Pathology.Axis.fromAST(i).walk(e,function(e){if(!s||!s.evaluate)return r.push(e);s.evaluate(e,this.predicates,t,n,o,r)},this)}},Pathology.XPathParser.NodeTest={evaluate:function(e,t,n,r,i,s){var o=this.elements[0].condition_name,u=u=this.elements[0].textValue.toLowerCase(),a={expression:{evaluate:function(){if(o&&o.textValue==="node")return!0;if(o&&o.textValue==="text"){if(e.nodeType!==XPathResult.BOOLEAN_TYPE)return!1}else if(u==="*"){if(e.nodeType!==1)return!1}else{if(!e.nodeName)return!1;if(e.nodeName.toLowerCase()!==u)return!1}return!0}},subscript:this.subscript};t=[a].concat(t.elements);var f,l;for(var c=0,h=t.length;c<h;c++){i[c]=i[c]||[],l=t[c],f=Pathology.atomize(l.expression,e,n),typeof f=="string"&&(f=!0);if(!f)return;i[c].push(e);if(l.subscript.integer&&l.subscript.integer.evaluate()!==i[c].length)return}s.push(e)}},Pathology.XPathParser.Or={evaluate:function(e,t){return Pathology.atomize(this.left,e,t)||Pathology.atomize(this.right,e,t)}},Pathology.XPathParser.Integer={evaluate:function(e,t){return parseInt(this.textValue,10)}},Pathology.XPathParser.String={evaluate:function(context,root){return eval(this.textValue)}},Pathology.XPathParser.Union={evaluate:function(e,t,n,r){r=r||new Pathology.XPathResult(XPathResult.ANY_TYPE),n=n||XPathResult.ANY_TYPE,this.head.evaluate(e,t,n,r);var i=this.rest.elements;for(var s=0,o=i.length;s<o;s++)i[s].location_path.evaluate(e,t,n,r);return r}},function(){var e=function(e,t){var n;for(n in t)e[n]=t[n];return e},t={msie:!!window.attachEvent&&!window.opera,opera:!!window.opera,webkit:navigator.userAgent.indexOf("AppleWebKit/")>-1,safari:navigator.userAgent.indexOf("AppleWebKit/")>-1&&navigator.userAgent.indexOf("Chrome/")===-1,gecko:navigator.userAgent.indexOf("Gecko")>-1,mobilesafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/),rhino:navigator.userAgent.match(/Rhino/)&&!0},n=function(t,n,r){var i=r.ownerDocument.createEventObject();return e(i,n)},r={},i=1,s="_synthetic"+(new Date).getTime(),o,u,a=/keypress|keyup|keydown/,f=/load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll/,l,c=function(e,t,n,r){return new c.init(e,t,n,r)};o=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},u=function(e,t,n){return e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},e(c,{init:function(e,t,n,r){var i=c.args(t,n,r),s=this;this.queue=[],this.element=i.element,typeof this[e]=="function"?this[e](i.options,i.element,function(e,t){i.callback&&i.callback.apply(s,arguments),s.done.apply(s,arguments)}):(this.result=c.trigger(e,i.options,i.element),i.callback&&i.callback.call(this,i.element,this.result))},jquery:function(e,t){return window.FuncUnit&&window.FuncUnit.jQuery?window.FuncUnit.jQuery:e?c.helpers.getWindow(e).jQuery||window.jQuery:window.jQuery},args:function(){var e={},t=0;for(;t<arguments.length;t++)typeof arguments[t]=="function"?e.callback=arguments[t]:arguments[t]&&arguments[t].jquery?e.element=arguments[t][0]:arguments[t]&&arguments[t].nodeName?e.element=arguments[t]:e.options&&typeof arguments[t]=="string"?e.element=document.getElementById(arguments[t]):arguments[t]&&(e.options=arguments[t]);return e},click:function(e,t,n){c("click!",e,t,n)},defaults:{focus:function(){if(!c.support.focusChanges){var e=this,t=e.nodeName.toLowerCase();c.data(e,"syntheticvalue",e.value),(t==="input"||t==="textarea")&&o(e,"blur",function(){c.data(e,"syntheticvalue")!=e.value&&c.trigger("change",{},e),u(e,"blur",arguments.callee)})}},submit:function(){c.onParents(this,function(e){if(e.nodeName.toLowerCase()==="form")return e.submit(),!1})}},changeOnBlur:function(e,t,n){o(e,"blur",function(){n!==e[t]&&c.trigger("change",{},e),u(e,"blur",arguments.callee)})},closest:function(e,t){while(e&&e.nodeName.toLowerCase()!==t.toLowerCase())e=e.parentNode;return e},data:function(e,t,n){var o;e[s]||(e[s]=i++),r[e[s]]||(r[e[s]]={}),o=r[e[s]];if(!n)return r[e[s]][t];r[e[s]][t]=n},onParents:function(e,t){var n;while(e&&n!==!1)n=t(e),e=e.parentNode;return e},focusable:/^(a|area|frame|iframe|label|input|select|textarea|button|html|object)$/i,isFocusable:function(e){var t;return(this.focusable.test(e.nodeName)||(t=e.getAttributeNode("tabIndex"))&&t.specified)&&c.isVisible(e)},isVisible:function(e){return e.offsetWidth&&e.offsetHeight||e.clientWidth&&e.clientHeight},tabIndex:function(e){var t=e.getAttributeNode("tabIndex");return t&&t.specified&&(parseInt(e.getAttribute("tabIndex"))||0)},bind:o,unbind:u,browser:t,helpers:{createEventObject:n,createBasicStandardEvent:function(t,n,r){var i;try{i=r.createEvent("Events")}catch(s){i=r.createEvent("UIEvents")}finally{i.initEvent(t,!0,!0),e(i,n)}return i},inArray:function(e,t){var n=0;for(;n<t.length;n++)if(t[n]===e)return n;return-1},getWindow:function(e){return e.ownerDocument.defaultView||e.ownerDocument.parentWindow},extend:e,scrollOffset:function(e,t){var n=e.document.documentElement,r=e.document.body;if(!t)return{left:(n&&n.scrollLeft||r&&r.scrollLeft||0)+(n.clientLeft||0),top:(n&&n.scrollTop||r&&r.scrollTop||0)+(n.clientTop||0)};window.scrollTo(t.left,t.top)},scrollDimensions:function(e){var t=e.document.documentElement,n=e.document.body,r=t.clientWidth,i=t.clientHeight,s=e.document.compatMode==="CSS1Compat";return{height:s&&i||n.clientHeight||i,width:s&&r||n.clientWidth||r}},addOffset:function(e,t){var n=c.jquery(t),r;typeof e=="object"&&e.clientX===undefined&&e.clientY===undefined&&e.pageX===undefined&&e.pageY===undefined&&n&&(t=n(t),r=t.offset(),e.pageX=r.left+t.width()/2,e.pageY=r.top+t.height()/2)}},key:{ctrlKey:null,altKey:null,shiftKey:null,metaKey:null},dispatch:function(e,t,n,r){if(t.dispatchEvent&&e){var i=e.preventDefault,s=r?-1:0;return r&&o(t,n,function(e){e.preventDefault(),u(this,n,arguments.callee)}),e.preventDefault=function(){s++,++s>0&&i.apply(this,[])},t.dispatchEvent(e),s<=0}try{window.event=e}catch(a){}return t.sourceIndex<=0||t.fireEvent&&t.fireEvent("on"+n,e)},create:{page:{event:function(e,t,r){var i=c.helpers.getWindow(r).document||document,s;if(i.createEvent)return s=i.createEvent("Events"),s.initEvent(e,!0,!0),s;try{s=n(e,t,r)}catch(o){}return s}},focus:{event:function(e,t,n){return c.onParents(n,function(e){if(c.isFocusable(e)){if(e.nodeName.toLowerCase()!=="html")e.focus(),l=e;else if(l){var t=c.helpers.getWindow(n).document;if(t!==window.document)return!1;t.activeElement?(t.activeElement.blur(),l=null):(l.blur(),l=null)}return!1}}),!0}}},support:{clickChanges:!1,clickSubmits:!1,keypressSubmits:!1,mouseupSubmits:!1,radioClickChanges:!1,focusChanges:!1,linkHrefJS:!1,keyCharacters:!1,backspaceWorks:!1,mouseDownUpClicks:!1,tabKeyTabs:!1,keypressOnAnchorClicks:!1,optionClickBubbles:!1,ready:0},trigger:function(e,t,n){t||(t={});var r=c.create,i=r[e]&&r[e].setup,s=a.test(e)?"key":f.test(e)?"page":"mouse",o=r[e]||{},u=r[s],l,h,p,d=n;return c.support.ready===2&&i&&i(e,t,n),p=t._autoPrevent,delete t._autoPrevent,o.event?h=o.event(e,t,n):(t=u.options?u.options(e,t,n):t,!c.support.changeBubbles&&/option/i.test(n.nodeName)&&(d=n.parentNode),l=u.event(e,t,d),h=c.dispatch(l,d,e,p)),h&&c.support.ready===2&&c.defaults[e]&&c.defaults[e].call(n,t,p),h},eventSupported:function(e){var t=document.createElement("div");e="on"+e;var n=e in t;return n||(t.setAttribute(e,"return;"),n=typeof t[e]=="function"),t=null,n}}),e(c.init.prototype,{then:function(e,t,n,r){c.autoDelay&&this.delay();var i=c.args(t,n,r),s=this;return this.queue.unshift(function(t,n){if(typeof this[e]!="function")return this.result=c.trigger(e,i.options,i.element),i.callback&&i.callback.call(this,i.element,this.result),this;this.element=i.element||t,this[e](i.options,this.element,function(e,t){i.callback&&i.callback.apply(s,arguments),s.done.apply(s,arguments)})}),this},delay:function(e,t){typeof e=="function"&&(t=e,e=null),e=e||600;var n=this;return this.queue.unshift(function(){setTimeout(function(){t&&t.apply(n,[]),n.done.apply(n,arguments)},e)}),this},done:function(e,t){t&&(this.element=t),this.queue.length&&this.queue.pop().call(this,this.element,e)},_click:function(e,t,n,r){c.helpers.addOffset(e,t),c.trigger("mousedown",e,t),setTimeout(function(){c.trigger("mouseup",e,t),!c.support.mouseDownUpClicks||r?(c.trigger("click",e,t),n(!0)):(c.create.click.setup("click",e,t),c.defaults.click.call(t),setTimeout(function(){n(!0)},1))},1)},_rightClick:function(t,n,r){c.helpers.addOffset(t,n);var i=e(e({},c.mouse.browser.right.mouseup),t);c.trigger("mousedown",i,n),setTimeout(function(){c.trigger("mouseup",i,n),c.mouse.browser.right.contextmenu&&c.trigger("contextmenu",e(e({},c.mouse.browser.right.contextmenu),t),n),r(!0)},1)},_dblclick:function(e,t,n){c.helpers.addOffset(e,t);var r=this;this._click(e,t,function(){setTimeout(function(){r._click(e,t,function(){c.trigger("dblclick",e,t),n(!0)},!0)},2)})}});var h=["click","dblclick","move","drag","key","type","rightClick"],p=function(e){c[e]=function(t,n,r){return c("_"+e,t,n,r)},c.init.prototype[e]=function(t,n,r){return this.then("_"+e,t,n,r)}},d=0;for(;d<h.length;d++)p(h[d]);if(window.FuncUnit&&window.FuncUnit.jQuery||window.jQuery)(window.FuncUnit&&window.FuncUnit.jQuery||window.jQuery).fn.triggerSyn=function(e,t,n){if(!this[0])throw"Can't "+e.substring(1)+" because no element matching '"+this.selector+"' was found";return c(e,t,this[0],n),this};window.Syn=c}(),function(){var h=Syn.helpers,getWin=h.getWindow;Syn.mouse={},h.extend(Syn.defaults,{mousedown:function(e){Syn.trigger("focus",{},this)},click:function(){var element=this;try{element.nodeType}catch(e){return}var href,radioChanged=Syn.data(element,"radioChanged"),scope=getWin(element),nodeName=element.nodeName.toLowerCase();if(!Syn.support.linkHrefJS&&/^\s*javascript:/.test(element.href)){var code=element.href.replace(/^\s*javascript:/,"");code!="//"&&code.indexOf("void(0)")==-1&&(window.selenium?eval("with(selenium.browserbot.getCurrentWindow()){"+code+"}"):eval("with(scope){"+code+"}"))}if(!Syn.support.clickSubmits&&nodeName=="input"&&element.type=="submit"||nodeName=="button"){var form=Syn.closest(element,"form");form&&Syn.trigger("submit",{},form)}nodeName=="a"&&element.href&&!/^\s*javascript:/.test(element.href)&&(scope.location.href=element.href),nodeName=="input"&&element.type=="checkbox"&&(Syn.support.clickChanges||Syn.trigger("change",{},element)),nodeName=="input"&&element.type=="radio"&&radioChanged&&!Syn.support.radioClickChanges&&Syn.trigger("change",{},element),nodeName=="option"&&Syn.data(element,"createChange")&&(Syn.trigger("change",{},element.parentNode),Syn.data(element,"createChange",!1))}}),h.extend(Syn.create,{mouse:{options:function(e,t,n){var r=document.documentElement,i=document.body,s=[t.pageX||0,t.pageY||0],o=Syn.mouse.browser&&Syn.mouse.browser.left[e],u=Syn.mouse.browser&&Syn.mouse.browser.right[e];return h.extend({bubbles:!0,cancelable:!0,view:window,detail:1,screenX:1,screenY:1,clientX:t.clientX||s[0]-(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r.clientLeft||0),clientY:t.clientY||s[1]-(r&&r.scrollTop||i&&i.scrollTop||0)-(r.clientTop||0),ctrlKey:!!Syn.key.ctrlKey,altKey:!!Syn.key.altKey,shiftKey:!!Syn.key.shiftKey,metaKey:!!Syn.key.metaKey,button:o&&o.button!=null?o.button:u&&u.button||(e=="contextmenu"?2:0),relatedTarget:document.documentElement},t)},event:function(e,t,n){var r=getWin(n).document||document;if(r.createEvent){var i;try{i=r.createEvent("MouseEvents"),i.initMouseEvent(e,t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}catch(s){i=h.createBasicStandardEvent(e,t,r)}return i.synthetic=!0,i}var i;try{i=h.createEventObject(e,t,n)}catch(s){}return i}},click:{setup:function(e,t,n){var r=n.nodeName.toLowerCase(),e;if(!Syn.support.clickChecks&&!Syn.support.changeChecks&&r==="input"){e=n.type.toLowerCase(),e==="checkbox"&&(n.checked=!n.checked);if(e==="radio"&&!n.checked){try{Syn.data(n,"radioChanged",!0)}catch(i){}n.checked=!0}}r=="a"&&n.href&&!/^\s*javascript:/.test(n.href)&&Syn.data(n,"href",n.href);if(/option/i.test(n.nodeName)){var s=n.parentNode.firstChild,o=-1;while(s){if(s.nodeType==1){o++;if(s==n)break}s=s.nextSibling}o!==n.parentNode.selectedIndex&&(n.parentNode.selectedIndex=o,Syn.data(n,"createChange",!0))}}},mousedown:{setup:function(e,t,n){var r=n.nodeName.toLowerCase();Syn.browser.safari&&(r=="select"||r=="option")&&(t._autoPrevent=!0)}}}),function(){if(!document.body){setTimeout(arguments.callee,1);return}var e=window.__synthTest;window.__synthTest=function(){Syn.support.linkHrefJS=!0};var t=document.createElement("div"),n,r,i,s,o;t.innerHTML="<form id='outer'><input name='checkbox' type='checkbox'/><input name='radio' type='radio' /><input type='submit' name='submitter'/><input type='input' name='inputter'/><input name='one'><input name='two'/><a href='javascript:__synthTest()' id='synlink'></a><select><option></option></select></form>",document.documentElement.appendChild(t),i=t.firstChild,n=i.childNodes[0],r=i.childNodes[2],o=i.getElementsByTagName("select")[0],n.checked=!1,n.onchange=function(){Syn.support.clickChanges=!0},Syn.trigger("click",{},n),Syn.support.clickChecks=n.checked,n.checked=!1,Syn.trigger("change",{},n),Syn.support.changeChecks=n.checked,i.onsubmit=function(e){return e.preventDefault&&e.preventDefault(),Syn.support.clickSubmits=!0,!1},Syn.trigger("click",{},r),i.childNodes[1].onchange=function(){Syn.support.radioClickChanges=!0},Syn.trigger("click",{},i.childNodes[1]),Syn.bind(t,"click",function(){Syn.support.optionClickBubbles=!0,Syn.unbind(t,"click",arguments.callee)}),Syn.trigger("click",{},o.firstChild),Syn.support.changeBubbles=Syn.eventSupported("change");var u=0;t.onclick=function(){Syn.support.mouseDownUpClicks=!0},Syn.trigger("mousedown",{},t),Syn.trigger("mouseup",{},t),document.documentElement.removeChild(t),window.__synthTest=e,Syn.support.ready++}()}(),function(){Syn.key.browsers={webkit:{prevent:{keyup:[],keydown:["char","keypress"],keypress:["char"]},character:{keydown:[0,"key"],keypress:["char","char"],keyup:[0,"key"]},specialChars:{keydown:[0,"char"],keyup:[0,"char"]},navigation:{keydown:[0,"key"],keyup:[0,"key"]},special:{keydown:[0,"key"],keyup:[0,"key"]},tab:{keydown:[0,"char"],keyup:[0,"char"]},"pause-break":{keydown:[0,"key"],keyup:[0,"key"]},caps:{keydown:[0,"key"],keyup:[0,"key"]},escape:{keydown:[0,"key"],keyup:[0,"key"]},"num-lock":{keydown:[0,"key"],keyup:[0,"key"]},"scroll-lock":{keydown:[0,"key"],keyup:[0,"key"]},print:{keyup:[0,"key"]},"function":{keydown:[0,"key"],keyup:[0,"key"]},"\r":{keydown:[0,"key"],keypress:["char","key"],keyup:[0,"key"]}},gecko:{prevent:{keyup:[],keydown:["char"],keypress:["char"]},character:{keydown:[0,"key"],keypress:["char",0],keyup:[0,"key"]},specialChars:{keydown:[0,"key"],keypress:[0,"key"],keyup:[0,"key"]},navigation:{keydown:[0,"key"],keypress:[0,"key"],keyup:[0,"key"]},special:{keydown:[0,"key"],keyup:[0,"key"]},"	":{keydown:[0,"key"],keypress:[0,"key"],keyup:[0,"key"]},"pause-break":{keydown:[0,"key"],keypress:[0,"key"],keyup:[0,"key"]},caps:{keydown:[0,"key"],keyup:[0,"key"]},escape:{keydown:[0,"key"],keypress:[0,"key"],keyup:[0,"key"]},"num-lock":{keydown:[0,"key"],keyup:[0,"key"]},"scroll-lock":{keydown:[0,"key"],keyup:[0,"key"]},print:{keyup:[0,"key"]},"function":{keydown:[0,"key"],keyup:[0,"key"]},"\r":{keydown:[0,"key"],keypress:[0,"key"],keyup:[0,"key"]}},msie:{prevent:{keyup:[],keydown:["char","keypress"],keypress:["char"]},character:{keydown:[null,"key"],keypress:[null,"char"],keyup:[null,"key"]},specialChars:{keydown:[null,"char"],keyup:[null,"char"]},navigation:{keydown:[null,"key"],keyup:[null,"key"]},special:{keydown:[null,"key"],keyup:[null,"key"]},tab:{keydown:[null,"char"],keyup:[null,"char"]},"pause-break":{keydown:[null,"key"],keyup:[null,"key"]},caps:{keydown:[null,"key"],keyup:[null,"key"]},escape:{keydown:[null,"key"],keypress:[null,"key"],keyup:[null,"key"]},"num-lock":{keydown:[null,"key"],keyup:[null,"key"]},"scroll-lock":{keydown:[null,"key"],keyup:[null,"key"]},print:{keyup:[null,"key"]},"function":{keydown:[null,"key"],keyup:[null,"key"]},"\r":{keydown:[null,"key"],keypress:[null,"key"],keyup:[null,"key"]}},opera:{prevent:{keyup:[],keydown:[],keypress:["char"]},character:{keydown:[null,"key"],keypress:[null,"char"],keyup:[null,"key"]},specialChars:{keydown:[null,"char"],keypress:[null,"char"],keyup:[null,"char"]},navigation:{keydown:[null,"key"],keypress:[null,"key"]},special:{keydown:[null,"key"],keypress:[null,"key"],keyup:[null,"key"]},tab:{keydown:[null,"char"],keypress:[null,"char"],keyup:[null,"char"]},"pause-break":{keydown:[null,"key"],keypress:[null,"key"],keyup:[null,"key"]},caps:{keydown:[null,"key"],keyup:[null,"key"]},escape:{keydown:[null,"key"],keypress:[null,"key"]},"num-lock":{keyup:[null,"key"],keydown:[null,"key"],keypress:[null,"key"]},"scroll-lock":{keydown:[null,"key"],keypress:[null,"key"],keyup:[null,"key"]},print:{},"function":{keydown:[null,"key"],keypress:[null,"key"],keyup:[null,"key"]},"\r":{keydown:[null,"key"],keypress:[null,"key"],keyup:[null,"key"]}}},Syn.mouse.browsers={webkit:{right:{mousedown:{button:2,which:3},mouseup:{button:2,which:3},contextmenu:{button:2,which:3}},left:{mousedown:{button:0,which:1},mouseup:{button:0,which:1},click:{button:0,which:1}}},opera:{right:{mousedown:{button:2,which:3},mouseup:{button:2,which:3}},left:{mousedown:{button:0,which:1},mouseup:{button:0,which:1},click:{button:0,which:1}}},msie:{right:{mousedown:{button:2},mouseup:{button:2},contextmenu:{button:0}},left:{mousedown:{button:1},mouseup:{button:1},click:{button:0}}},chrome:{right:{mousedown:{button:2,which:3},mouseup:{button:2,which:3},contextmenu:{button:2,which:3}},left:{mousedown:{button:0,which:1},mouseup:{button:0,which:1},click:{button:0,which:1}}},gecko:{left:{mousedown:{button:0,which:1},mouseup:{button:0,which:1},click:{button:0,which:1}},right:{mousedown:{button:2,which:3},mouseup:{button:2,which:3},contextmenu:{button:2,which:3}}}},Syn.key.browser=function(){if(Syn.key.browsers[window.navigator.userAgent])return Syn.key.browsers[window.navigator.userAgent];for(var e in Syn.browser)if(Syn.browser[e]&&Syn.key.browsers[e])return Syn.key.browsers[e];return Syn.key.browsers.gecko}(),Syn.mouse.browser=function(){if(Syn.mouse.browsers[window.navigator.userAgent])return Syn.mouse.browsers[window.navigator.userAgent];for(var e in Syn.browser)if(Syn.browser[e]&&Syn.mouse.browsers[e])return Syn.mouse.browsers[e];return Syn.mouse.browsers
.gecko}()}(),function(){(function(){if(!document.body){setTimeout(arguments.callee,1);return}var e=document.createElement("div");document.body.appendChild(e),Syn.helpers.extend(e.style,{width:"100px",height:"10000px",backgroundColor:"blue",position:"absolute",top:"10px",left:"0px",zIndex:19999}),document.body.scrollTop=11;if(!document.elementFromPoint)return;var t=document.elementFromPoint(3,1);t==e?Syn.support.elementFromClient=!0:Syn.support.elementFromPage=!0,document.body.removeChild(e),document.body.scrollTop=0})();var e=function(e,t){var n=e.clientX,r=e.clientY,i=Syn.helpers.getWindow(t),s;if(Syn.support.elementFromPage){var o=Syn.helpers.scrollOffset(i);n+=o.left,r+=o.top}return s=i.document.elementFromPoint?i.document.elementFromPoint(n,r):t,s===i.document.documentElement&&(e.clientY<0||e.clientX<0)?t:s},t=function(t,n,r){var i=e(n,r);return Syn.trigger(t,n,i||r),i},n=function(t,n,r){var i=e(t,n);if(r!=i&&i&&r){var s=Syn.helpers.extend({},t);s.relatedTarget=i,Syn.trigger("mouseout",s,r),s.relatedTarget=r,Syn.trigger("mouseover",s,i)}return Syn.trigger("mousemove",t,i||n),i},r=function(t,r,i,s,o){var u=new Date,a=r.clientX-t.clientX,f=r.clientY-t.clientY,l=Syn.helpers.getWindow(s),c=e(t,s),h=l.document.createElement("div"),p=0;move=function(){var e=new Date,d=Syn.helpers.scrollOffset(l),v=(p==0?0:e-u)/i,m={clientX:a*v+t.clientX,clientY:f*v+t.clientY};p++,v<1?(Syn.helpers.extend(h.style,{left:m.clientX+d.left+2+"px",top:m.clientY+d.top+2+"px"}),c=n(m,s,c),setTimeout(arguments.callee,15)):(c=n(r,s,c),l.document.body.removeChild(h),o())},Syn.helpers.extend(h.style,{height:"5px",width:"5px",backgroundColor:"red",position:"absolute",zIndex:19999,fontSize:"1px"}),l.document.body.appendChild(h),move()},i=function(e,n,i,s,o){t("mousedown",e,s),r(e,n,i,s,function(){t("mouseup",n,s),o()})},s=function(e){var t=Syn.jquery()(e),n=t.offset();return{pageX:n.left+t.outerWidth()/2,pageY:n.top+t.outerHeight()/2}},o=function(e,t,n){var r=/(\d+)[x ](\d+)/,i=/(\d+)X(\d+)/,o=/([+-]\d+)[xX ]([+-]\d+)/;if(typeof e=="string"&&o.test(e)&&n){var u=s(n),a=e.match(o);e={pageX:u.pageX+parseInt(a[1]),pageY:u.pageY+parseInt(a[2])}}if(typeof e=="string"&&r.test(e)){var a=e.match(r);e={pageX:parseInt(a[1]),pageY:parseInt(a[2])}}if(typeof e=="string"&&i.test(e)){var a=e.match(i);e={clientX:parseInt(a[1]),clientY:parseInt(a[2])}}typeof e=="string"&&(e=Syn.jquery()(e,t.document)[0]),e.nodeName&&(e=s(e));if(e.pageX){var f=Syn.helpers.scrollOffset(t);e={clientX:e.pageX-f.left,clientY:e.pageY-f.top}}return e},u=function(e,t,n){if(e.clientY<0){var r=Syn.helpers.scrollOffset(n),i=Syn.helpers.scrollDimensions(n),s=r.top+e.clientY-100,o=s-r.top;s>0||(s=0,o=-r.top),e.clientY=e.clientY-o,t.clientY=t.clientY-o,Syn.helpers.scrollOffset(n,{top:s,left:r.left})}};Syn.helpers.extend(Syn.init.prototype,{_move:function(e,t,n){var i=Syn.helpers.getWindow(t),s=o(e.from||t,i,t),a=o(e.to||e,i,t);e.adjust!==!1&&u(s,a,i),r(s,a,e.duration||500,t,n)},_drag:function(e,t,n){var r=Syn.helpers.getWindow(t),s=o(e.from||t,r,t),a=o(e.to||e,r,t);e.adjust!==!1&&u(s,a,r),i(s,a,e.duration||500,t,n)}})}(),Terminus={isIE:/\bMSIE\b/.test(navigator.userAgent),connect:function(e){if(this._bayeux)return;this._pageId=Faye.random(),this._id=window.name=window.name||document.name||Faye.random(),this._id=this._id.split("|")[0];var t=document.getElementsByTagName("iframe"),n=t.length;while(n--)t[n].contentDocument.name=t[n].id;this.Registry.initialize(),this.Worker.initialize(),this.AjaxMonitor.initialize(),Faye.Event.on(window,"beforeunload",function(){Terminus.disabled=!0});var r=this._bayeux=new Faye.Client(e),i=this;r.addExtension({outgoing:function(e,t){e.href=window.location.href,e.connectionType==="websocket"&&(i._socketCapable=!0),t(e)}}),this.getId(function(e){var t=window.name.split("|")[1];t||r.subscribe("/terminus/sockets/"+e,function(e){window.name+="|"+e.url,this.openSocket(e.url)},this);var n=r.subscribe("/terminus/clients/"+e,this.handleMessage,this);n.callback(function(){this.ping(),t&&this.openSocket(t)},this)},this)},browserDetails:function(e,t){this.getId(function(n){e.call(t,{id:n,infinite:!!window.TERMINUS_INFINITE_REDIRECT,page:this._pageId,sockets:this._socketCapable,ua:navigator.userAgent,url:window.location.href})},this)},getId:function(e,t){var n=this._id;if(this.isIE)return e.call(t,n);if(opener&&opener.Terminus)opener.Terminus.getId(function(r){e.call(t,r+"/"+n)});else if(parent&&parent!==window){var r=function(){if(!parent.Terminus)return setTimeout(r,100);parent.Terminus.getId(function(r){e.call(t,r+"/"+n)})};r()}else e.call(t,n)},openSocket:function(e){if(this.disabled||this._socket)return;var t=this,n=window.MozWebSocket||window.WebSocket,r=new n(e);r.onopen=function(){t._socket=r,up=!0},r.onclose=function(){var n=!!t._socket;t._socket=null,n?t.openSocket(e):window.name=window.name.split("|")[0]},r.onmessage=function(e){t.handleMessage(JSON.parse(e.data))}},ping:function(){if(this.disabled)return;this.browserDetails(function(e){this._bayeux.publish("/terminus/ping",e);var t=this;setTimeout(function(){t.ping()},3e3)},this)},handleMessage:function(e){var t=e.command,n=t.shift(),r=this.Driver,i=this.Worker,s=!1,o=this;t.push(function(t){if(s)return;o.postResult(e.commandId,t),s=!0}),i.monitor=!0,r[n].apply(r,t),i.monitor=!1},postResult:function(e,t){if(this.disabled||!e)return;if(this._socket)return this._socket.send(JSON.stringify({value:t}));this.getId(function(n){this._bayeux.publish("/terminus/results",{id:n,commandId:e,result:t})},this)},getAttribute:function(e,t){return Terminus.isIE?(e.getAttributeNode(t)||{}).nodeValue||!1:e.getAttribute(t)},Driver:{_node:function(e){return Terminus.Registry.get(e)},attribute:function(e,t,n){var r=this._node(e);if(!r)return n(null);!!Terminus.isIE||t!=="checked"&&t!=="selected"?n(Terminus.getAttribute(r,t)):n(!!r[t])},set_attribute:function(e,t,n,r){var i=this._node(e);if(!i)return r(null);i.setAttribute(t,n),r(!0)},body:function(e){var t=document.getElementsByTagName("html")[0];e(t.outerHTML||"<html>\n"+t.innerHTML+"\n</html>\n")},clear_cookies:function(e){var t=document.cookie.split(";"),n,r=new Date;r.setTime(r.getTime()-864e5);for(var i=0,s=t.length;i<s;i++)n=t[i].split("=")[0],document.cookie=n+"=; expires="+r.toGMTString()+"; path=/";e(!0)},click:function(e,t,n){var r=this._node(e),i=t.resynchronization_timeout;if(!r)return n(!0);Syn.trigger("click",{},r);if(t.resynchronize===!1)return n(!0);i&&Terminus.Worker._setTimeout.call(window,function(){n("failed to resynchronize, ajax request timed out")},1e3*i),Terminus.Worker.callback(function(){n(!0)})},current_url:function(e){Terminus.browserDetails(function(t){e(t.url)})},drag:function(e,t){var n=this._node(e.from),r=this._node(e.to);if(!n||!r)return t(null);Syn.drag({to:r},n,function(){t(!0)})},evaluate:function(expression,callback){callback(eval(expression))},execute:function(expression,callback){eval(expression),callback(!0)},find:function(e,t,n){var r=t?this._node(t):document;if(!r)return n([]);var i=document.evaluate(e,r,null,XPathResult.ANY_TYPE,null),s=[],o;while(o=i.iterateNext())s.push(Terminus.Registry.put(o));return n(s)},is_visible:function(e,t){var n=this._node(e);if(!n)return t(null);while(n.tagName&&n.tagName.toLowerCase()!=="body"){if(n.style.display==="none"||n.type==="hidden")return t(!1);n=n.parentNode}t(!0)},select:function(e,t){var n=this._node(e);if(!n)return t(null);n.selected=!0,Syn.trigger("change",{},n.parentNode),t(!0)},set:function(e,t,n){var r=this._node(e),i=Terminus.getAttribute(r,"maxlength");if(!r)return n(null);if(r.type==="file")return n("not_allowed");Syn.trigger("focus",{},r),Syn.trigger("click",{},r);switch(typeof t){case"string":i&&(t=t.substr(0,parseInt(i))),r.value=t;break;case"boolean":r.checked=t}Syn.trigger("change",{},r),n(!0)},tag_name:function(e,t){var n=this._node(e);if(!n)return t(null);t(n.tagName.toLowerCase())},text:function(e,t){var n=this._node(e);if(!n)return t(null);var r=n.textContent||n.innerText||"",i=n.getElementsByTagName("script"),s=i.length;while(s--)r=r.replace(i[s].textContent||i[s].innerText,"");r=r.replace(/^\s*|\s*$/g,""),t(r)},trigger:function(e,t,n){var r=this._node(e);if(!r)return n(null);Syn.trigger(t,{},r),n(!0)},unselect:function(e,t){var n=this._node(e);if(!n)return t(null);if(!n.parentNode.multiple)return t(!1);n.selected=!1,Syn.trigger("change",{},n.parentNode),t(!0)},value:function(e,t){var n=this._node(e);if(!n)return t(null);if(n.tagName.toLowerCase()!=="select"||!n.multiple)return t(n.value);var r=n.children,i=[];for(var s=0,o=r.length;s<o;s++)r[s].selected&&i.push(r[s].value);t(i)},visit:function(e,t){window.location.href=e,t(e)}},Registry:{initialize:function(){this._namespace=new Faye.Namespace,this._elements={}},get:function(e){var t=this._elements[e],n=t;while(n&&n.tagName!=="BODY"&&n.tagName!=="HTML")n=n.parentNode;return n?t:null},put:function(e){var t=this._namespace.generate();return this._elements[t]=e,t}},Worker:{initialize:function(){this._callbacks=[],this._pending=0,Terminus.isIE||this._wrapTimeouts()},callback:function(e,t){this._pending===0?this._setTimeout?this._setTimeout.call(window,function(){e.call(t)},0):setTimeout(function(){e.call(t)},0):this._callbacks.push([e,t])},suspend:function(){this._pending+=1},resume:function(){if(this._pending===0)return;this._pending-=1;if(this._pending!==0)return;var e;for(var t=0,n=this._callbacks.length;t<n;t++)e=this._callbacks[t],e[0].call(e[1]);this._callbacks=[]},_wrapTimeouts:function(){var timeout=window.setTimeout,clear=window.clearTimeout,timeouts={},self=this,finish=function(e){if(!timeouts.hasOwnProperty(e))return;delete timeouts[e],self.resume()};window.setTimeout=function(callback,delay){var id=timeout.call(window,function(){try{switch(typeof callback){case"function":callback();break;case"string":eval(callback)}}finally{finish(id)}},delay);return self.monitor&&(timeouts[id]=!0,self.suspend()),id},window.clearTimeout=function(e){return finish(e),clear(e)},this._setTimeout=timeout}},AjaxMonitor:{initialize:function(){window.jQuery&&this._patchJquery()},_patchJquery:function(){var e=jQuery.ajax;jQuery.ajax=function(t,n){var r=(typeof t=="string"?n:t)||{},i=r.complete,s=Terminus.Worker.monitor;return r.complete=function(){var e;try{e=i.apply(this,arguments)}finally{s&&Terminus.Worker.resume()}return e},s&&Terminus.Worker.suspend(),typeof t=="string"?e.call(jQuery,t,r):e.call(jQuery,r)}}}};