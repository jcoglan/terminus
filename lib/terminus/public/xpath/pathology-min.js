var Pathology={evaluate:function(c,a,e,b,f){f=f||new Pathology.XPathResult(b);var d=Pathology.XPathParser.parse(c);d.evaluate(a,a,b,f);return f},atomize:function(c,a,e){var b=c.evaluate(a,e);if(b&&b.atomize)b=b.atomize();return b},array:function(c){if(!c)return[];var a=[],e=c.length;while(e--)a[e]=c[e];return a}};if(typeof XPathResult==='undefined'){XPathResult={ANY_TYPE:0,NUMBER_TYPE:1,STRING_TYPE:2,BOOLEAN_TYPE:3,UNORDERED_NODE_ITERATOR_TYPE:4,ORDERED_NODE_ITERATOR_TYPE:5,UNORDERED_NODE_SNAPSHOT_TYPE:6,ORDERED_NODE_SNAPSHOT_TYPE:7,ANY_UNORDERED_NODE_TYPE:8,FIRST_ORDERED_NODE_TYPE:9}}if(typeof document.evaluate==='undefined'){document.evaluate=function(){return Pathology.evaluate.apply(Pathology,arguments)}}Pathology.XPathResult=function(c){this._4=c;this._3=[];this._5=0};Pathology.XPathResult.prototype.push=function(c){if(this._4!==0&&c.nodeType!==this._4)return;if(this._3.indexOf(c)>=0)return;this._3.push(c)};Pathology.XPathResult.prototype.iterateNext=function(){var c=this._3[this._5];if(!c)return null;this._5+=1;return c};Pathology.XPathResult.prototype.atomize=function(){if(this._3.length===0)return null;if(this._3.length===1){var c=this._3[0];if(c.nodeValue===undefined||c.nodeValue===null)return c;return c.nodeValue}else{var a=[];for(var e=0,b=this._3.length;e<b;e++)a.push(this._3[e].nodeValue);return a}};Pathology.XPathResult.prototype.makeString=function(){var c=this._3[0];if(!c)return'';switch(c.nodeType){case XPathResult.STRING_TYPE:return this.atomize();case XPathResult.BOOLEAN_TYPE:var a=[];for(var e=0,b=this._3.length;e<b;e++)a.push(this._3[e].nodeValue);return a.join('');default:var f=document.evaluate('//text()',c,null,XPathResult.ANY_TYPE,null);return f.makeString()}};(function(){var k=function(c,a){if(!c||!a)return c;for(var e in a){if(c[e]!==a[e])c[e]=a[e]}return c};var G=function(c,a){var e=a.split('.'),b;while(b=e.shift()){c=c[b];if(c===undefined)throw new Error('Cannot find object named '+a);}return c};var bB=function(c){var a=c.input.split(/\n/g),e=0,b=0;while(b<c.offset+1){b+=a[e].length+1;e+=1}var f='Line '+e+': expected '+c.expected+'\n',d=a[e-1];f+=d+'\n';b-=d.length+1;while(b<c.offset){f+=' ';b+=1}return f+'^'};var br={__consume__union_expression:function(c){var a=null,e=this._0;this._2["union_expression"]=this._2["union_expression"]||{};var b=this._2["union_expression"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0,d=[],i={},j="";var g=null;g=this.__consume__location_path();if(g){d.push(g);j+=g.textValue;i.head=g;var h=null;var m=0,n=this._0,p=[],o="",l=true;while(l){var q=this._0,r=[],t={},v="";var s=null;s=this.__consume__space();if(s){r.push(s);v+=s.textValue;t.space=s;var u=null;var w=null;if(this._1.length>this._0){w=this._1.substring(this._0,this._0+1)}else{w=null}if(w==="|"){var y=this.constructor.SyntaxNode;var z=null;u=new y("|",this._0,[]);if(typeof z==="object"){k(u,z)}this._0+=1}else{u=null;var A=null;if(this._1.length>this._0){A=this._1.substring(this._0,this._0+1)}else{A=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"|\""}}}if(u){r.push(u);v+=u.textValue;var x=null;x=this.__consume__space();if(x){r.push(x);v+=x.textValue;t.space=x;var B=null;B=this.__consume__location_path();if(B){r.push(B);v+=B.textValue;t.location_path=B}else{r=null;this._0=q}}else{r=null;this._0=q}}else{r=null;this._0=q}}else{r=null;this._0=q}if(r){this._0=q;var H=this.constructor.SyntaxNode;var D=null;l=new H(v,this._0,r,t);if(typeof D==="object"){k(l,D)}this._0+=v.length}else{l=null}if(l){p.push(l);o+=l.textValue;m-=1}}if(m<=0){this._0=n;var K=this.constructor.SyntaxNode;var C=null;h=new K(o,this._0,p);if(typeof C==="object"){k(h,C)}this._0+=o.length}else{h=null}if(h){d.push(h);j+=h.textValue;i.rest=h}else{d=null;this._0=f}}else{d=null;this._0=f}if(d){this._0=f;var M=this.constructor.SyntaxNode;var N=G(this.constructor,"Union");a=new M(j,this._0,d,i);if(typeof N==="object"){k(a,N)}this._0+=j.length}else{a=null}return this._2["union_expression"][e]=a},__consume__location_path:function(c){var a=null,e=this._0;this._2["location_path"]=this._2["location_path"]||{};var b=this._2["location_path"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0,d=[],i={},j="";var g=null;g=this.__consume__location_step();if(g){d.push(g);j+=g.textValue;i.head=g;var h=null;var m=0,n=this._0,p=[],o="",l=true;while(l){l=this.__consume__location_step();if(l){p.push(l);o+=l.textValue;m-=1}}if(m<=0){this._0=n;var q=this.constructor.SyntaxNode;var r=null;h=new q(o,this._0,p);if(typeof r==="object"){k(h,r)}this._0+=o.length}else{h=null}if(h){d.push(h);j+=h.textValue;i.rest=h}else{d=null;this._0=f}}else{d=null;this._0=f}if(d){this._0=f;var t=this.constructor.SyntaxNode;var v=G(this.constructor,"LocationPath");a=new t(j,this._0,d,i);if(typeof v==="object"){k(a,v)}this._0+=j.length}else{a=null}return this._2["location_path"][e]=a},__consume__location_step:function(c){var a=null,e=this._0;this._2["location_step"]=this._2["location_step"]||{};var b=this._2["location_step"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0,d=[],i={},j="";var g=null;var h=this._0;var m=null;if(this._1.length>this._0){m=this._1.substring(this._0,this._0+1)}else{m=null}if(m==="/"){var n=this.constructor.SyntaxNode;var p=null;g=new n("/",this._0,[]);if(typeof p==="object"){k(g,p)}this._0+=1}else{g=null;var o=null;if(this._1.length>this._0){o=this._1.substring(this._0,this._0+1)}else{o=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"/\""}}}if(g){}else{this._0=h;var l=this.constructor.SyntaxNode;var q=null;g=new l("",this._0,[]);if(typeof q==="object"){k(g,q)}this._0+=0}if(g){d.push(g);j+=g.textValue;var r=null;var t=this._0;var v=this._0,s=[],u={},w="";var y=null;y=this.__consume__axis();if(y){s.push(y);w+=y.textValue;u.axis=y;var z=null;var A=this._0;z=this.__consume__node_test();if(z){}else{this._0=A;var x=this.constructor.SyntaxNode;var B=null;z=new x("",this._0,[]);if(typeof B==="object"){k(z,B)}this._0+=0}if(z){s.push(z);w+=z.textValue;u.test=z}else{s=null;this._0=v}}else{s=null;this._0=v}if(s){this._0=v;var H=this.constructor.SyntaxNode;var D=null;r=new H(w,this._0,s,u);if(typeof D==="object"){k(r,D)}this._0+=w.length}else{r=null}if(r){}else{this._0=t;var K=this._0,C=[],M={},N="";var I=null;var bC=this._0;I=this.__consume__axis();if(I){}else{this._0=bC;var bs=this.constructor.SyntaxNode;var bt=null;I=new bs("",this._0,[]);if(typeof bt==="object"){k(I,bt)}this._0+=0}if(I){C.push(I);N+=I.textValue;M.axis=I;var W=null;W=this.__consume__node_test();if(W){C.push(W);N+=W.textValue;M.test=W}else{C=null;this._0=K}}else{C=null;this._0=K}if(C){this._0=K;var be=this.constructor.SyntaxNode;var bu=null;r=new be(N,this._0,C,M);if(typeof bu==="object"){k(r,bu)}this._0+=N.length}else{r=null}if(r){}else{this._0=t}}if(r){d.push(r);j+=r.textValue;i.selector=r;var L=null;var bv=this._0;var X=this._0,E=[],O={},P="";var Y=null;var bf=null;if(this._1.length>this._0){bf=this._1.substring(this._0,this._0+1)}else{bf=null}if(bf==="["){var bw=this.constructor.SyntaxNode;var bx=null;Y=new bw("[",this._0,[]);if(typeof bx==="object"){k(Y,bx)}this._0+=1}else{Y=null;var bl=null;if(this._1.length>this._0){bl=this._1.substring(this._0,this._0+1)}else{bl=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"[\""}}}if(Y){E.push(Y);P+=Y.textValue;var Z=null;Z=this.__consume__space();if(Z){E.push(Z);P+=Z.textValue;O.space=Z;var Q=null;Q=this.__consume__integer();if(Q){E.push(Q);P+=Q.textValue;O.integer=Q;var J=null;J=this.__consume__space();if(J){E.push(J);P+=J.textValue;O.space=J;var ba=null;var R=null;if(this._1.length>this._0){R=this._1.substring(this._0,this._0+1)}else{R=null}if(R==="]"){var bb=this.constructor.SyntaxNode;var bg=null;ba=new bb("]",this._0,[]);if(typeof bg==="object"){k(ba,bg)}this._0+=1}else{ba=null;var by=null;if(this._1.length>this._0){by=this._1.substring(this._0,this._0+1)}else{by=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"]\""}}}if(ba){E.push(ba);P+=ba.textValue}else{E=null;this._0=X}}else{E=null;this._0=X}}else{E=null;this._0=X}}else{E=null;this._0=X}}else{E=null;this._0=X}if(E){this._0=X;var bz=this.constructor.SyntaxNode;var bm=null;L=new bz(P,this._0,E,O);if(typeof bm==="object"){k(L,bm)}this._0+=P.length}else{L=null}if(L){}else{this._0=bv;var bc=this.constructor.SyntaxNode;var bn=null;L=new bc("",this._0,[]);if(typeof bn==="object"){k(L,bn)}this._0+=0}if(L){d.push(L);j+=L.textValue;i.subscript=L;var S=null;var bo=0,bp=this._0,F=[],bh="",T=true;while(T){T=this.__consume__node_predicate();if(T){F.push(T);bh+=T.textValue;bo-=1}}if(bo<=0){this._0=bp;var bd=this.constructor.SyntaxNode;var bA=null;S=new bd(bh,this._0,F);if(typeof bA==="object"){k(S,bA)}this._0+=bh.length}else{S=null}if(S){d.push(S);j+=S.textValue;i.predicates=S}else{d=null;this._0=f}}else{d=null;this._0=f}}else{d=null;this._0=f}}else{d=null;this._0=f}if(d){this._0=f;var bi=this.constructor.SyntaxNode;var U=G(this.constructor,"LocationStep");a=new bi(j,this._0,d,i);if(typeof U==="object"){k(a,U)}this._0+=j.length}else{a=null}return this._2["location_step"][e]=a},__consume__axis:function(c){var a=null,e=this._0;this._2["axis"]=this._2["axis"]||{};var b=this._2["axis"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;var d=this._0,i=[],j={},g="";var h=null;var m=1,n=this._0,p=[],o="",l=true;while(l){var q=null;if(this._1.length>this._0){q=this._1.substring(this._0,this._0+1)}else{q=null}if(q&&/^[a-z\-]/.test(q)){var r=this.constructor.SyntaxNode;var t=null;l=new r(q,this._0,[]);if(typeof t==="object"){k(l,t)}this._0+=1}else{l=null;var v=null;if(this._1.length>this._0){v=this._1.substring(this._0,this._0+1)}else{v=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[a-z\\-]"}}}if(l){p.push(l);o+=l.textValue;m-=1}}if(m<=0){this._0=n;var s=this.constructor.SyntaxNode;var u=null;h=new s(o,this._0,p);if(typeof u==="object"){k(h,u)}this._0+=o.length}else{h=null}if(h){i.push(h);g+=h.textValue;j.axis_name=h;var w=null;var y=null;if(this._1.length>this._0){y=this._1.substring(this._0,this._0+2)}else{y=null}if(y==="::"){var z=this.constructor.SyntaxNode;var A=null;w=new z("::",this._0,[]);if(typeof A==="object"){k(w,A)}this._0+=2}else{w=null;var x=null;if(this._1.length>this._0){x=this._1.substring(this._0,this._0+1)}else{x=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"::\""}}}if(w){i.push(w);g+=w.textValue}else{i=null;this._0=d}}else{i=null;this._0=d}if(i){this._0=d;var B=this.constructor.SyntaxNode;var H=null;a=new B(g,this._0,i,j);if(typeof H==="object"){k(a,H)}this._0+=g.length}else{a=null}if(a){}else{this._0=f;a=this.__consume__axis_shorthand();if(a){}else{this._0=f}}return this._2["axis"][e]=a},__consume__axis_shorthand:function(c){var a=null,e=this._0;this._2["axis_shorthand"]=this._2["axis_shorthand"]||{};var b=this._2["axis_shorthand"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;var d=null;if(this._1.length>this._0){d=this._1.substring(this._0,this._0+1)}else{d=null}if(d==="@"){var i=this.constructor.SyntaxNode;var j=null;a=new i("@",this._0,[]);if(typeof j==="object"){k(a,j)}this._0+=1}else{a=null;var g=null;if(this._1.length>this._0){g=this._1.substring(this._0,this._0+1)}else{g=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"@\""}}}if(a){}else{this._0=f;var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+2)}else{h=null}if(h===".."){var m=this.constructor.SyntaxNode;var n=null;a=new m("..",this._0,[]);if(typeof n==="object"){k(a,n)}this._0+=2}else{a=null;var p=null;if(this._1.length>this._0){p=this._1.substring(this._0,this._0+1)}else{p=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"..\""}}}if(a){}else{this._0=f;var o=null;if(this._1.length>this._0){o=this._1.substring(this._0,this._0+1)}else{o=null}if(o==="."){var l=this.constructor.SyntaxNode;var q=null;a=new l(".",this._0,[]);if(typeof q==="object"){k(a,q)}this._0+=1}else{a=null;var r=null;if(this._1.length>this._0){r=this._1.substring(this._0,this._0+1)}else{r=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\".\""}}}if(a){}else{this._0=f;var t=null;if(this._1.length>this._0){t=this._1.substring(this._0,this._0+1)}else{t=null}if(t==="/"){var v=this.constructor.SyntaxNode;var s=null;a=new v("/",this._0,[]);if(typeof s==="object"){k(a,s)}this._0+=1}else{a=null;var u=null;if(this._1.length>this._0){u=this._1.substring(this._0,this._0+1)}else{u=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"/\""}}}if(a){}else{this._0=f}}}}return this._2["axis_shorthand"][e]=a},__consume__node_test:function(c){var a=null,e=this._0;this._2["node_test"]=this._2["node_test"]||{};var b=this._2["node_test"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;a=this.__consume__node_condition();if(a){var d=G(this.constructor,"NodeTest");if(typeof d==="object"){k(a,d)}}else{this._0=f;a=this.__consume__node_name();if(a){var i=G(this.constructor,"NodeTest");if(typeof i==="object"){k(a,i)}}else{this._0=f;var j=null;if(this._1.length>this._0){j=this._1.substring(this._0,this._0+1)}else{j=null}if(j==="*"){var g=this.constructor.SyntaxNode;var h=null;a=new g("*",this._0,[]);if(typeof h==="object"){k(a,h)}this._0+=1}else{a=null;var m=null;if(this._1.length>this._0){m=this._1.substring(this._0,this._0+1)}else{m=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"*\""}}}if(a){var n=G(this.constructor,"NodeTest");if(typeof n==="object"){k(a,n)}}else{this._0=f}}}return this._2["node_test"][e]=a},__consume__node_condition:function(c){var a=null,e=this._0;this._2["node_condition"]=this._2["node_condition"]||{};var b=this._2["node_condition"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0,d=[],i={},j="";var g=null;var h=1,m=this._0,n=[],p="",o=true;while(o){var l=null;if(this._1.length>this._0){l=this._1.substring(this._0,this._0+1)}else{l=null}if(l&&/^[a-z\-]/.test(l)){var q=this.constructor.SyntaxNode;var r=null;o=new q(l,this._0,[]);if(typeof r==="object"){k(o,r)}this._0+=1}else{o=null;var t=null;if(this._1.length>this._0){t=this._1.substring(this._0,this._0+1)}else{t=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[a-z\\-]"}}}if(o){n.push(o);p+=o.textValue;h-=1}}if(h<=0){this._0=m;var v=this.constructor.SyntaxNode;var s=null;g=new v(p,this._0,n);if(typeof s==="object"){k(g,s)}this._0+=p.length}else{g=null}if(g){d.push(g);j+=g.textValue;i.condition_name=g;var u=null;var w=null;if(this._1.length>this._0){w=this._1.substring(this._0,this._0+2)}else{w=null}if(w==="()"){var y=this.constructor.SyntaxNode;var z=null;u=new y("()",this._0,[]);if(typeof z==="object"){k(u,z)}this._0+=2}else{u=null;var A=null;if(this._1.length>this._0){A=this._1.substring(this._0,this._0+1)}else{A=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"()\""}}}if(u){d.push(u);j+=u.textValue}else{d=null;this._0=f}}else{d=null;this._0=f}if(d){this._0=f;var x=this.constructor.SyntaxNode;var B=null;a=new x(j,this._0,d,i);if(typeof B==="object"){k(a,B)}this._0+=j.length}else{a=null}return this._2["node_condition"][e]=a},__consume__node_name:function(c){var a=null,e=this._0;this._2["node_name"]=this._2["node_name"]||{};var b=this._2["node_name"][e];if(b){this._0+=b.textValue.length;return b}var f=1,d=this._0,i=[],j="",g=true;while(g){var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h&&/^[A-Za-z0-9\-]/.test(h)){var m=this.constructor.SyntaxNode;var n=null;g=new m(h,this._0,[]);if(typeof n==="object"){k(g,n)}this._0+=1}else{g=null;var p=null;if(this._1.length>this._0){p=this._1.substring(this._0,this._0+1)}else{p=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[A-Za-z0-9\\-]"}}}if(g){i.push(g);j+=g.textValue;f-=1}}if(f<=0){this._0=d;var o=this.constructor.SyntaxNode;var l=null;a=new o(j,this._0,i);if(typeof l==="object"){k(a,l)}this._0+=j.length}else{a=null}return this._2["node_name"][e]=a},__consume__node_predicate:function(c){var a=null,e=this._0;this._2["node_predicate"]=this._2["node_predicate"]||{};var b=this._2["node_predicate"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0,d=[],i={},j="";var g=null;var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h==="["){var m=this.constructor.SyntaxNode;var n=null;g=new m("[",this._0,[]);if(typeof n==="object"){k(g,n)}this._0+=1}else{g=null;var p=null;if(this._1.length>this._0){p=this._1.substring(this._0,this._0+1)}else{p=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"[\""}}}if(g){d.push(g);j+=g.textValue;var o=null;o=this.__consume__expression();if(o){d.push(o);j+=o.textValue;i.expression=o;var l=null;var q=null;if(this._1.length>this._0){q=this._1.substring(this._0,this._0+1)}else{q=null}if(q==="]"){var r=this.constructor.SyntaxNode;var t=null;l=new r("]",this._0,[]);if(typeof t==="object"){k(l,t)}this._0+=1}else{l=null;var v=null;if(this._1.length>this._0){v=this._1.substring(this._0,this._0+1)}else{v=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"]\""}}}if(l){d.push(l);j+=l.textValue}else{d=null;this._0=f}}else{d=null;this._0=f}}else{d=null;this._0=f}if(d){this._0=f;var s=this.constructor.SyntaxNode;var u=null;a=new s(j,this._0,d,i);if(typeof u==="object"){k(a,u)}this._0+=j.length}else{a=null}return this._2["node_predicate"][e]=a},__consume__expression:function(c){var a=null,e=this._0;this._2["expression"]=this._2["expression"]||{};var b=this._2["expression"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;a=this.__consume__or_expression();if(a){}else{this._0=f;a=this.__consume__and_expression();if(a){}else{this._0=f;a=this.__consume__comparison();if(a){}else{this._0=f;a=this.__consume__atom();if(a){}else{this._0=f}}}}return this._2["expression"][e]=a},__consume__or_expression:function(c){var a=null,e=this._0;this._2["or_expression"]=this._2["or_expression"]||{};var b=this._2["or_expression"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;var d=this._0,i=[],j={},g="";var h=null;h=this.__consume__and_expression();if(h){i.push(h);g+=h.textValue;j.left=h;var m=null;var n=null;if(this._1.length>this._0){n=this._1.substring(this._0,this._0+2)}else{n=null}if(n==="or"){var p=this.constructor.SyntaxNode;var o=null;m=new p("or",this._0,[]);if(typeof o==="object"){k(m,o)}this._0+=2}else{m=null;var l=null;if(this._1.length>this._0){l=this._1.substring(this._0,this._0+1)}else{l=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"or\""}}}if(m){i.push(m);g+=m.textValue;var q=null;q=this.__consume__or_expression();if(q){i.push(q);g+=q.textValue;j.right=q}else{i=null;this._0=d}}else{i=null;this._0=d}}else{i=null;this._0=d}if(i){this._0=d;var r=this.constructor.SyntaxNode;var t=G(this.constructor,"Or");a=new r(g,this._0,i,j);if(typeof t==="object"){k(a,t)}this._0+=g.length}else{a=null}if(a){}else{this._0=f;a=this.__consume__and_expression();if(a){}else{this._0=f}}return this._2["or_expression"][e]=a},__consume__and_expression:function(c){var a=null,e=this._0;this._2["and_expression"]=this._2["and_expression"]||{};var b=this._2["and_expression"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;var d=this._0,i=[],j={},g="";var h=null;h=this.__consume__comparison();if(h){i.push(h);g+=h.textValue;j.left=h;var m=null;var n=null;if(this._1.length>this._0){n=this._1.substring(this._0,this._0+3)}else{n=null}if(n==="and"){var p=this.constructor.SyntaxNode;var o=null;m=new p("and",this._0,[]);if(typeof o==="object"){k(m,o)}this._0+=3}else{m=null;var l=null;if(this._1.length>this._0){l=this._1.substring(this._0,this._0+1)}else{l=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"and\""}}}if(m){i.push(m);g+=m.textValue;var q=null;q=this.__consume__and_expression();if(q){i.push(q);g+=q.textValue;j.right=q}else{i=null;this._0=d}}else{i=null;this._0=d}}else{i=null;this._0=d}if(i){this._0=d;var r=this.constructor.SyntaxNode;var t=G(this.constructor,"And");a=new r(g,this._0,i,j);if(typeof t==="object"){k(a,t)}this._0+=g.length}else{a=null}if(a){}else{this._0=f;a=this.__consume__comparison();if(a){}else{this._0=f}}return this._2["and_expression"][e]=a},__consume__comparison:function(c){var a=null,e=this._0;this._2["comparison"]=this._2["comparison"]||{};var b=this._2["comparison"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;var d=this._0,i=[],j={},g="";var h=null;h=this.__consume__atom();if(h){i.push(h);g+=h.textValue;j.left=h;var m=null;m=this.__consume__comparator();if(m){i.push(m);g+=m.textValue;j.comparator=m;var n=null;n=this.__consume__comparison();if(n){i.push(n);g+=n.textValue;j.right=n}else{i=null;this._0=d}}else{i=null;this._0=d}}else{i=null;this._0=d}if(i){this._0=d;var p=this.constructor.SyntaxNode;var o=G(this.constructor,"Comparison");a=new p(g,this._0,i,j);if(typeof o==="object"){k(a,o)}this._0+=g.length}else{a=null}if(a){}else{this._0=f;a=this.__consume__atom();if(a){}else{this._0=f}}return this._2["comparison"][e]=a},__consume__comparator:function(c){var a=null,e=this._0;this._2["comparator"]=this._2["comparator"]||{};var b=this._2["comparator"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;var d=null;if(this._1.length>this._0){d=this._1.substring(this._0,this._0+2)}else{d=null}if(d==="!="){var i=this.constructor.SyntaxNode;var j=null;a=new i("!=",this._0,[]);if(typeof j==="object"){k(a,j)}this._0+=2}else{a=null;var g=null;if(this._1.length>this._0){g=this._1.substring(this._0,this._0+1)}else{g=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"!=\""}}}if(a){}else{this._0=f;var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h==="="){var m=this.constructor.SyntaxNode;var n=null;a=new m("=",this._0,[]);if(typeof n==="object"){k(a,n)}this._0+=1}else{a=null;var p=null;if(this._1.length>this._0){p=this._1.substring(this._0,this._0+1)}else{p=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"=\""}}}if(a){}else{this._0=f}}return this._2["comparator"][e]=a},__consume__atom:function(c){var a=null,e=this._0;this._2["atom"]=this._2["atom"]||{};var b=this._2["atom"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0,d=[],i={},j="";var g=null;g=this.__consume__space();if(g){d.push(g);j+=g.textValue;i.space=g;var h=null;var m=this._0;var n=this._0,p=[],o={},l="";var q=null;var r=null;if(this._1.length>this._0){r=this._1.substring(this._0,this._0+1)}else{r=null}if(r==="("){var t=this.constructor.SyntaxNode;var v=null;q=new t("(",this._0,[]);if(typeof v==="object"){k(q,v)}this._0+=1}else{q=null;var s=null;if(this._1.length>this._0){s=this._1.substring(this._0,this._0+1)}else{s=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"(\""}}}if(q){p.push(q);l+=q.textValue;var u=null;u=this.__consume__expression();if(u){p.push(u);l+=u.textValue;o.in_parens=u;var w=null;var y=null;if(this._1.length>this._0){y=this._1.substring(this._0,this._0+1)}else{y=null}if(y===")"){var z=this.constructor.SyntaxNode;var A=null;w=new z(")",this._0,[]);if(typeof A==="object"){k(w,A)}this._0+=1}else{w=null;var x=null;if(this._1.length>this._0){x=this._1.substring(this._0,this._0+1)}else{x=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\")\""}}}if(w){p.push(w);l+=w.textValue}else{p=null;this._0=n}}else{p=null;this._0=n}}else{p=null;this._0=n}if(p){this._0=n;var B=this.constructor.SyntaxNode;var H=null;h=new B(l,this._0,p,o);if(typeof H==="object"){k(h,H)}this._0+=l.length}else{h=null}if(h){}else{this._0=m;h=this.__consume__value();if(h){}else{this._0=m}}if(h){d.push(h);j+=h.textValue;i.expression=h;var D=null;D=this.__consume__space();if(D){d.push(D);j+=D.textValue;i.space=D}else{d=null;this._0=f}}else{d=null;this._0=f}}else{d=null;this._0=f}if(d){this._0=f;var K=this.constructor.SyntaxNode;var C=G(this.constructor,"Atom");a=new K(j,this._0,d,i);if(typeof C==="object"){k(a,C)}this._0+=j.length}else{a=null}return this._2["atom"][e]=a},__consume__value:function(c){var a=null,e=this._0;this._2["value"]=this._2["value"]||{};var b=this._2["value"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;a=this.__consume__function_call();if(a){}else{this._0=f;a=this.__consume__string();if(a){}else{this._0=f;a=this.__consume__union_expression();if(a){}else{this._0=f}}}return this._2["value"][e]=a},__consume__function_call:function(c){var a=null,e=this._0;this._2["function_call"]=this._2["function_call"]||{};var b=this._2["function_call"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0,d=[],i={},j="";var g=null;g=this.__consume__function_name();if(g){d.push(g);j+=g.textValue;i.function_name=g;var h=null;var m=null;if(this._1.length>this._0){m=this._1.substring(this._0,this._0+1)}else{m=null}if(m==="("){var n=this.constructor.SyntaxNode;var p=null;h=new n("(",this._0,[]);if(typeof p==="object"){k(h,p)}this._0+=1}else{h=null;var o=null;if(this._1.length>this._0){o=this._1.substring(this._0,this._0+1)}else{o=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"(\""}}}if(h){d.push(h);j+=h.textValue;var l=null;l=this.__consume__function_args();if(l){d.push(l);j+=l.textValue;i.function_args=l;var q=null;var r=null;if(this._1.length>this._0){r=this._1.substring(this._0,this._0+1)}else{r=null}if(r===")"){var t=this.constructor.SyntaxNode;var v=null;q=new t(")",this._0,[]);if(typeof v==="object"){k(q,v)}this._0+=1}else{q=null;var s=null;if(this._1.length>this._0){s=this._1.substring(this._0,this._0+1)}else{s=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\")\""}}}if(q){d.push(q);j+=q.textValue}else{d=null;this._0=f}}else{d=null;this._0=f}}else{d=null;this._0=f}}else{d=null;this._0=f}if(d){this._0=f;var u=this.constructor.SyntaxNode;var w=G(this.constructor,"FunctionCall");a=new u(j,this._0,d,i);if(typeof w==="object"){k(a,w)}this._0+=j.length}else{a=null}return this._2["function_call"][e]=a},__consume__function_name:function(c){var a=null,e=this._0;this._2["function_name"]=this._2["function_name"]||{};var b=this._2["function_name"][e];if(b){this._0+=b.textValue.length;return b}var f=1,d=this._0,i=[],j="",g=true;while(g){var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h&&/^[a-z\-]/.test(h)){var m=this.constructor.SyntaxNode;var n=null;g=new m(h,this._0,[]);if(typeof n==="object"){k(g,n)}this._0+=1}else{g=null;var p=null;if(this._1.length>this._0){p=this._1.substring(this._0,this._0+1)}else{p=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[a-z\\-]"}}}if(g){i.push(g);j+=g.textValue;f-=1}}if(f<=0){this._0=d;var o=this.constructor.SyntaxNode;var l=null;a=new o(j,this._0,i);if(typeof l==="object"){k(a,l)}this._0+=j.length}else{a=null}return this._2["function_name"][e]=a},__consume__function_args:function(c){var a=null,e=this._0;this._2["function_args"]=this._2["function_args"]||{};var b=this._2["function_args"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;var d=this._0,i=[],j={},g="";var h=null;h=this.__consume__expression();if(h){i.push(h);g+=h.textValue;j.first=h;var m=null;var n=0,p=this._0,o=[],l="",q=true;while(q){var r=this._0,t=[],v={},s="";var u=null;var w=null;if(this._1.length>this._0){w=this._1.substring(this._0,this._0+1)}else{w=null}if(w===","){var y=this.constructor.SyntaxNode;var z=null;u=new y(",",this._0,[]);if(typeof z==="object"){k(u,z)}this._0+=1}else{u=null;var A=null;if(this._1.length>this._0){A=this._1.substring(this._0,this._0+1)}else{A=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\",\""}}}if(u){t.push(u);s+=u.textValue;var x=null;x=this.__consume__expression();if(x){t.push(x);s+=x.textValue;v.expression=x}else{t=null;this._0=r}}else{t=null;this._0=r}if(t){this._0=r;var B=this.constructor.SyntaxNode;var H=null;q=new B(s,this._0,t,v);if(typeof H==="object"){k(q,H)}this._0+=s.length}else{q=null}if(q){o.push(q);l+=q.textValue;n-=1}}if(n<=0){this._0=p;var D=this.constructor.SyntaxNode;var K=null;m=new D(l,this._0,o);if(typeof K==="object"){k(m,K)}this._0+=l.length}else{m=null}if(m){i.push(m);g+=m.textValue;j.rest=m}else{i=null;this._0=d}}else{i=null;this._0=d}if(i){this._0=d;var C=this.constructor.SyntaxNode;var M=null;a=new C(g,this._0,i,j);if(typeof M==="object"){k(a,M)}this._0+=g.length}else{a=null}if(a){}else{this._0=f;var N=this.constructor.SyntaxNode;var I=null;a=new N("",this._0,[]);if(typeof I==="object"){k(a,I)}this._0+=0}return this._2["function_args"][e]=a},__consume__integer:function(c){var a=null,e=this._0;this._2["integer"]=this._2["integer"]||{};var b=this._2["integer"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0,d=[],i={},j="";var g=null;var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h&&/^[1-9]/.test(h)){var m=this.constructor.SyntaxNode;var n=null;g=new m(h,this._0,[]);if(typeof n==="object"){k(g,n)}this._0+=1}else{g=null;var p=null;if(this._1.length>this._0){p=this._1.substring(this._0,this._0+1)}else{p=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[1-9]"}}}if(g){d.push(g);j+=g.textValue;var o=null;var l=0,q=this._0,r=[],t="",v=true;while(v){var s=null;if(this._1.length>this._0){s=this._1.substring(this._0,this._0+1)}else{s=null}if(s&&/^[0-9]/.test(s)){var u=this.constructor.SyntaxNode;var w=null;v=new u(s,this._0,[]);if(typeof w==="object"){k(v,w)}this._0+=1}else{v=null;var y=null;if(this._1.length>this._0){y=this._1.substring(this._0,this._0+1)}else{y=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[0-9]"}}}if(v){r.push(v);t+=v.textValue;l-=1}}if(l<=0){this._0=q;var z=this.constructor.SyntaxNode;var A=null;o=new z(t,this._0,r);if(typeof A==="object"){k(o,A)}this._0+=t.length}else{o=null}if(o){d.push(o);j+=o.textValue}else{d=null;this._0=f}}else{d=null;this._0=f}if(d){this._0=f;var x=this.constructor.SyntaxNode;var B=G(this.constructor,"Integer");a=new x(j,this._0,d,i);if(typeof B==="object"){k(a,B)}this._0+=j.length}else{a=null}return this._2["integer"][e]=a},__consume__string:function(c){var a=null,e=this._0;this._2["string"]=this._2["string"]||{};var b=this._2["string"][e];if(b){this._0+=b.textValue.length;return b}var f=this._0;var d=this._0,i=[],j={},g="";var h=null;var m=null;if(this._1.length>this._0){m=this._1.substring(this._0,this._0+1)}else{m=null}if(m==="'"){var n=this.constructor.SyntaxNode;var p=null;h=new n("'",this._0,[]);if(typeof p==="object"){k(h,p)}this._0+=1}else{h=null;var o=null;if(this._1.length>this._0){o=this._1.substring(this._0,this._0+1)}else{o=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"'\""}}}if(h){i.push(h);g+=h.textValue;var l=null;var q=0,r=this._0,t=[],v="",s=true;while(s){var u=this._0;var w=this._0,y=[],z={},A="";var x=null;var B=null;if(this._1.length>this._0){B=this._1.substring(this._0,this._0+1)}else{B=null}if(B==="\\"){var H=this.constructor.SyntaxNode;var D=null;x=new H("\\",this._0,[]);if(typeof D==="object"){k(x,D)}this._0+=1}else{x=null;var K=null;if(this._1.length>this._0){K=this._1.substring(this._0,this._0+1)}else{K=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"\\\\\""}}}if(x){y.push(x);A+=x.textValue;var C=null;var M=null;if(this._1.length>this._0){M=this._1.substring(this._0,this._0+1)}else{M=null}var N=M;if(N===null){C=null;var I=null;if(this._1.length>this._0){I=this._1.substring(this._0,this._0+1)}else{I=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"<any char>"}}}else{var bC=this.constructor.SyntaxNode;var bs=null;C=new bC(N,this._0,[]);if(typeof bs==="object"){k(C,bs)}this._0+=1}if(C){y.push(C);A+=C.textValue}else{y=null;this._0=w}}else{y=null;this._0=w}if(y){this._0=w;var bt=this.constructor.SyntaxNode;var W=null;s=new bt(A,this._0,y,z);if(typeof W==="object"){k(s,W)}this._0+=A.length}else{s=null}if(s){}else{this._0=u;var be=null;if(this._1.length>this._0){be=this._1.substring(this._0,this._0+1)}else{be=null}if(be&&/^[^']/.test(be)){var bu=this.constructor.SyntaxNode;var L=null;s=new bu(be,this._0,[]);if(typeof L==="object"){k(s,L)}this._0+=1}else{s=null;var bv=null;if(this._1.length>this._0){bv=this._1.substring(this._0,this._0+1)}else{bv=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[^']"}}}if(s){}else{this._0=u}}if(s){t.push(s);v+=s.textValue;q-=1}}if(q<=0){this._0=r;var X=this.constructor.SyntaxNode;var E=null;l=new X(v,this._0,t);if(typeof E==="object"){k(l,E)}this._0+=v.length}else{l=null}if(l){i.push(l);g+=l.textValue;var O=null;var P=null;if(this._1.length>this._0){P=this._1.substring(this._0,this._0+1)}else{P=null}if(P==="'"){var Y=this.constructor.SyntaxNode;var bf=null;O=new Y("'",this._0,[]);if(typeof bf==="object"){k(O,bf)}this._0+=1}else{O=null;var bw=null;if(this._1.length>this._0){bw=this._1.substring(this._0,this._0+1)}else{bw=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"'\""}}}if(O){i.push(O);g+=O.textValue}else{i=null;this._0=d}}else{i=null;this._0=d}}else{i=null;this._0=d}if(i){this._0=d;var bx=this.constructor.SyntaxNode;var bl=null;a=new bx(g,this._0,i,j);if(typeof bl==="object"){k(a,bl)}this._0+=g.length}else{a=null}if(a){var Z=G(this.constructor,"String");if(typeof Z==="object"){k(a,Z)}}else{this._0=f;var Q=this._0,J=[],ba={},R="";var bb=null;var bg=null;if(this._1.length>this._0){bg=this._1.substring(this._0,this._0+1)}else{bg=null}if(bg==="\""){var by=this.constructor.SyntaxNode;var bz=null;bb=new by("\"",this._0,[]);if(typeof bz==="object"){k(bb,bz)}this._0+=1}else{bb=null;var bm=null;if(this._1.length>this._0){bm=this._1.substring(this._0,this._0+1)}else{bm=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"\\\"\""}}}if(bb){J.push(bb);R+=bb.textValue;var bc=null;var bn=0,S=this._0,bo=[],bp="",F=true;while(F){var bh=this._0;var T=this._0,bd=[],bA={},bi="";var U=null;var bD=null;if(this._1.length>this._0){bD=this._1.substring(this._0,this._0+1)}else{bD=null}if(bD==="\\"){var bV=this.constructor.SyntaxNode;var bH=null;U=new bV("\\",this._0,[]);if(typeof bH==="object"){k(U,bH)}this._0+=1}else{U=null;var bI=null;if(this._1.length>this._0){bI=this._1.substring(this._0,this._0+1)}else{bI=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"\\\\\""}}}if(U){bd.push(U);bi+=U.textValue;var bj=null;var bE=null;if(this._1.length>this._0){bE=this._1.substring(this._0,this._0+1)}else{bE=null}var bJ=bE;if(bJ===null){bj=null;var bK=null;if(this._1.length>this._0){bK=this._1.substring(this._0,this._0+1)}else{bK=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"<any char>"}}}else{var bW=this.constructor.SyntaxNode;var bL=null;bj=new bW(bJ,this._0,[]);if(typeof bL==="object"){k(bj,bL)}this._0+=1}if(bj){bd.push(bj);bi+=bj.textValue}else{bd=null;this._0=T}}else{bd=null;this._0=T}if(bd){this._0=T;var bX=this.constructor.SyntaxNode;var bM=null;F=new bX(bi,this._0,bd,bA);if(typeof bM==="object"){k(F,bM)}this._0+=bi.length}else{F=null}if(F){}else{this._0=bh;var bq=null;if(this._1.length>this._0){bq=this._1.substring(this._0,this._0+1)}else{bq=null}if(bq&&/^[^"]/.test(bq)){var bY=this.constructor.SyntaxNode;var bN=null;F=new bY(bq,this._0,[]);if(typeof bN==="object"){k(F,bN)}this._0+=1}else{F=null;var bO=null;if(this._1.length>this._0){bO=this._1.substring(this._0,this._0+1)}else{bO=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[^\"]"}}}if(F){}else{this._0=bh}}if(F){bo.push(F);bp+=F.textValue;bn-=1}}if(bn<=0){this._0=S;var bZ=this.constructor.SyntaxNode;var bP=null;bc=new bZ(bp,this._0,bo);if(typeof bP==="object"){k(bc,bP)}this._0+=bp.length}else{bc=null}if(bc){J.push(bc);R+=bc.textValue;var bk=null;var bF=null;if(this._1.length>this._0){bF=this._1.substring(this._0,this._0+1)}else{bF=null}if(bF==="\""){var ca=this.constructor.SyntaxNode;var bQ=null;bk=new ca("\"",this._0,[]);if(typeof bQ==="object"){k(bk,bQ)}this._0+=1}else{bk=null;var bR=null;if(this._1.length>this._0){bR=this._1.substring(this._0,this._0+1)}else{bR=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"\\\"\""}}}if(bk){J.push(bk);R+=bk.textValue}else{J=null;this._0=Q}}else{J=null;this._0=Q}}else{J=null;this._0=Q}if(J){this._0=Q;var cb=this.constructor.SyntaxNode;var bS=null;a=new cb(R,this._0,J,ba);if(typeof bS==="object"){k(a,bS)}this._0+=R.length}else{a=null}if(a){var bT=G(this.constructor,"String");if(typeof bT==="object"){k(a,bT)}}else{this._0=f}}return this._2["string"][e]=a},__consume__space:function(c){var a=null,e=this._0;this._2["space"]=this._2["space"]||{};var b=this._2["space"][e];if(b){this._0+=b.textValue.length;return b}var f=0,d=this._0,i=[],j="",g=true;while(g){var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h===" "){var m=this.constructor.SyntaxNode;var n=null;g=new m(" ",this._0,[]);if(typeof n==="object"){k(g,n)}this._0+=1}else{g=null;var p=null;if(this._1.length>this._0){p=this._1.substring(this._0,this._0+1)}else{p=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\" \""}}}if(g){i.push(g);j+=g.textValue;f-=1}}if(f<=0){this._0=d;var o=this.constructor.SyntaxNode;var l=null;a=new o(j,this._0,i);if(typeof l==="object"){k(a,l)}this._0+=j.length}else{a=null}return this._2["space"][e]=a}};var V=function(c){this._1=c;this._0=0;this._2={}};V.prototype.parse=function(){var c=this.__consume__union_expression();if(c&&this._0===this._1.length){return c}if(!(this.error)){this.error={input:this._1,offset:this._0,expected:"<EOF>"}}var a=bB(this.error);var e=new Error(a);throw e;};V.parse=function(c){var a=new V(c);return a.parse()};k(V.prototype,br);var bU=function(c,a,e,b){this.textValue=c;this.offset=a;this.elements=e||[];if(!b)return;for(var f in b)this[f]=b[f]};bU.prototype.forEach=function(c,a){for(var e=0,b=this.elements.length;e<b;e++){c.call(a,this.elements[e],e)}};V.SyntaxNode=bU;if(typeof require==="function"&&typeof exports==="object"){exports.Grammar=br;exports.Parser=V;exports.parse=V.parse;if(typeof Pathology!=="undefined"){Pathology.XPath=br;Pathology.XPathParser=V;Pathology.XPathParser.formatError=bB}}else{var bG=this;bG=bG.Pathology=bG.Pathology||{};Pathology.XPath=br;Pathology.XPathParser=V;Pathology.XPathParser.formatError=bB}})();Pathology.XPathParser.And={evaluate:function(c,a){return Pathology.atomize(this.left,c,a)&&Pathology.atomize(this.right,c,a)}};Pathology.XPathParser.Atom={evaluate:function(c,a){var e=this.expression.in_parens||this.expression;return e.evaluate(c,a)}};Pathology.Axis=function(c){this.name=c};Pathology.Axis.prototype.walk=function(c,a,e){var b=c.childNodes,f=Pathology.array(c.attributes),d;if(c.checked)f.push({nodeName:'checked',nodeValue:true,nodeType:XPathResult.STRING_TYPE});if(c.selected)f.push({nodeName:'selected',nodeValue:true,nodeType:XPathResult.STRING_TYPE});switch(this.name){case'attribute':for(var i=0,j=f.length;i<j;i++){a.call(e,f[i])}break;case'child':for(var i=0,j=b.length;i<j;i++){a.call(e,b[i])}break;case'descendant-or-self':a.call(e,c);for(var i=0,j=b.length;i<j;i++){this.walk(b[i],a,e)}break;case'following-sibling':d=c.nextSibling;while(d){a.call(e,d);d=d.nextSibling}break;case'parent':a.call(e,c.parentNode);break;case'self':a.call(e,c);break}};Pathology.Axis.SHORTHANDS={'@':'attribute','..':'parent','.':'self','/':'descendant-or-self','':'child'};Pathology.Axis.fromAST=function(c){var a=c.axis_name?c.axis_name.textValue:c.textValue;return new this(this.SHORTHANDS[a]||a)};Pathology.XPathParser.Comparison={evaluate:function(c,a){var e=this.comparator.textValue,b=this.left.evaluate(c,a),f=Pathology.atomize(this.right,c,a),d=false,i=(f instanceof Array),j;if(b._3){for(var g=0,h=b._3.length;g<h;g++){j=b._3[g];if(e==='='){d=d||(i?f.indexOf(j.nodeValue)>=0:(j.nodeValue==f||j.innerHTML==f))}else if(e==='!='){d=d||(i?f.indexOf(j.nodeValue)<0:(j.nodeValue!=f&&j.innerHTML!=f))}}return d}else{switch(e){case'=':return i?f.indexOf(b.nodeValue)>=0:b==f;case'!=':return i?f.indexOf(j.nodeValue)<0:b!=f}}}};Pathology.XPathParser.FunctionCall={getArguments:function(c,a){var e=[],b=this.function_args.rest;if(this.function_args.first&&this.function_args.first.evaluate){e.push(this.function_args.first.evaluate(c,a))}if(b){for(var f=0,d=b.elements.length;f<d;f++)e.push(b.elements[f].expression.evaluate(c,a))}return e},evaluate:function(c,a){var e=this.getArguments(c,a),b=this.REGISTER[this.function_name.textValue];return b.apply(c,e)},REGISTER:{'concat':function(){var c='';for(var a=0,e=arguments.length;a<e;a++)c+=arguments[a].makeString?arguments[a].makeString():arguments[a];return c},'contains':function(c,a){if(!c)return false;if(c.makeString)c=c.makeString();return c.toString().indexOf(a)>=0},'normalize-space':function(c){if(c.makeString)c=c.makeString();return c.toString().replace(/^\s*/g,'').replace(/\s*$/g,'').replace(/\s+/g,' ')},'name':function(){return this.nodeName.toLowerCase()},'not':function(c){if(c&&c.atomize)c=c.atomize();if(typeof c==='string')return false;return!c},'string':function(c){return c.atomize().innerText},'text':function(){return document.evaluate('/text()',this,null,XPathResult.ANY_TYPE,null)}}};Pathology.XPathParser.LocationPath={eachStep:function(c,a){var e=[this.head].concat(this.rest.elements);for(var b=0,f=e.length;b<f;b++)c.call(a,e[b])},evaluate:function(c,a,e,b){b=b||new Pathology.XPathResult(XPathResult.ANY_TYPE);e=e||XPathResult.ANY_TYPE;var f=new Pathology.XPathResult(e),d=this.head.isRelative()?c:a,i=[this.head].concat(this.rest.elements),j,g,h,m,n,p;f.push(d);for(h=0,n=i.length;h<n;h++){j=i[h];g=new Pathology.XPathResult(e);for(m=0,p=f._3.length;m<p;m++){j.evaluate(f._3[m],a,e,g)}f=g}for(h=0,n=f._3.length;h<n;h++)b.push(f._3[h]);return b}};Pathology.XPathParser.LocationStep={isRelative:function(){return this.elements[0].textValue!=='/'},evaluate:function(e,b,f,d){var i=this.selector.axis,j=this.selector.test,g=[];Pathology.Axis.fromAST(i).walk(e,function(c,a){if(!j||!j.evaluate)return d.push(c);j.evaluate(c,this.subscript,this.predicates,b,f,g,d)},this)}};Pathology.XPathParser.NodeTest={evaluate:function(c,a,e,b,f,d,i){var j=this.condition_name;if(j&&j.textValue==='node'){}else if(j&&j.textValue==='text'){if(c.nodeType!==XPathResult.BOOLEAN_TYPE)return}else{var g=this.textValue.toLowerCase();if(g==='*'){if(c.nodeType!==1)return}else{if(!c.nodeName)return;if(c.nodeName.toLowerCase()!==g)return}}d.push(c);if(a.integer){if(a.integer.evaluate()!==d.length)return}var h=true,m;for(var n=0,p=e.elements.length;n<p;n++){m=e.elements[n];h=h&&Pathology.atomize(m.expression,c,b);if(typeof h==='string')h=true}if(h)i.push(c)}};Pathology.XPathParser.Or={evaluate:function(c,a){return Pathology.atomize(this.left,c,a)||Pathology.atomize(this.right,c,a)}};Pathology.XPathParser.Integer={evaluate:function(c,a){return parseInt(this.textValue,10)}};Pathology.XPathParser.String={evaluate:function(c,a){return eval(this.textValue)}};Pathology.XPathParser.Union={evaluate:function(c,a,e,b){b=b||new Pathology.XPathResult(XPathResult.ANY_TYPE);e=e||XPathResult.ANY_TYPE;this.head.evaluate(c,a,e,b);var f=this.rest.elements;for(var d=0,i=f.length;d<i;d++)f[d].location_path.evaluate(c,a,e,b);return b}};
//@ sourceMappingURL=pathology-min.js.map