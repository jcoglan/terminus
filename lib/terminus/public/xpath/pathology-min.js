var Pathology={evaluate:function(d,a,g,c,f){f=f||new Pathology.XPathResult(c);var b=Pathology.XPathParser.parse(d);b.evaluate(a,a,c,f);return f},atomize:function(d,a,g){var c=d.evaluate(a,g);if(c&&c.atomize)c=c.atomize();return c},array:function(d){if(!d)return[];var a=[],g=d.length;while(g--)a[g]=d[g];return a}};if(typeof XPathResult==='undefined'){XPathResult={ANY_TYPE:0,NUMBER_TYPE:1,STRING_TYPE:2,BOOLEAN_TYPE:3,UNORDERED_NODE_ITERATOR_TYPE:4,ORDERED_NODE_ITERATOR_TYPE:5,UNORDERED_NODE_SNAPSHOT_TYPE:6,ORDERED_NODE_SNAPSHOT_TYPE:7,ANY_UNORDERED_NODE_TYPE:8,FIRST_ORDERED_NODE_TYPE:9}}if(typeof document.evaluate==='undefined'){document.evaluate=function(){return Pathology.evaluate.apply(Pathology,arguments)}}Pathology.XPathResult=function(d){this._4=d;this._3=[];this._5=0};Pathology.XPathResult.prototype.push=function(d){if(this._4!==0&&d.nodeType!==this._4)return;if(this._3.indexOf(d)>=0)return;this._3.push(d)};Pathology.XPathResult.prototype.iterateNext=function(){var d=this._3[this._5];if(!d)return null;this._5+=1;return d};Pathology.XPathResult.prototype.atomize=function(){if(this._3.length===0)return null;if(this._3.length===1){var d=this._3[0];if(d.nodeValue===undefined||d.nodeValue===null)return d;return d.nodeValue}else{var a=[];for(var g=0,c=this._3.length;g<c;g++)a.push(this._3[g].nodeValue);return a}};Pathology.XPathResult.prototype.makeString=function(){var d=this._3[0];if(!d)return'';switch(d.nodeType){case XPathResult.STRING_TYPE:return this.atomize();case XPathResult.BOOLEAN_TYPE:var a=[];for(var g=0,c=this._3.length;g<c;g++)a.push(this._3[g].nodeValue);return a.join('');default:var f=document.evaluate('//text()',d,null,XPathResult.ANY_TYPE,null);return f.makeString()}};(function(){var l=function(d,a){if(!d||!a)return d;for(var g in a){if(d[g]!==a[g])d[g]=a[g]}return d};var H=function(d,a){var g=a.split('.'),c;while(c=g.shift()){d=d[c];if(d===undefined)throw new Error('Cannot find object named '+a);}return d};var bl=function(d){var a=d.input.split(/\n/g),g=0,c=0;while(c<d.offset+1){c+=a[g].length+1;g+=1}var f='Line '+g+': expected '+d.expected+'\n',b=a[g-1];f+=b+'\n';c-=b.length+1;while(c<d.offset){f+=' ';c+=1}return f+'^'};var bd={__consume__union_expression:function(d){var a=null,g=this._0;this._2["union_expression"]=this._2["union_expression"]||{};var c=this._2["union_expression"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0,b=[],i={},j="";var e=null;e=this.__consume__location_path();if(e){b.push(e);j+=e.textValue;i.head=e;var h=null;var m=0,n=this._0,q=[],o="",k=true;while(k){var p=this._0,r=[],t={},u="";var s=null;s=this.__consume__space();if(s){r.push(s);u+=s.textValue;t.space=s;var v=null;var w=null;if(this._1.length>this._0){w=this._1.substring(this._0,this._0+1)}else{w=null}if(w==="|"){var x=this.constructor.SyntaxNode;var z=null;v=new x("|",this._0,[]);if(typeof z==="object"){l(v,z)}this._0+=1}else{v=null;var A=null;if(this._1.length>this._0){A=this._1.substring(this._0,this._0+1)}else{A=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"|\""}}}if(v){r.push(v);u+=v.textValue;var y=null;y=this.__consume__space();if(y){r.push(y);u+=y.textValue;t.space=y;var B=null;B=this.__consume__location_path();if(B){r.push(B);u+=B.textValue;t.location_path=B}else{r=null;this._0=p}}else{r=null;this._0=p}}else{r=null;this._0=p}}else{r=null;this._0=p}if(r){this._0=p;var E=this.constructor.SyntaxNode;var D=null;k=new E(u,this._0,r,t);if(typeof D==="object"){l(k,D)}this._0+=u.length}else{k=null}if(k){q.push(k);o+=k.textValue;m-=1}}if(m<=0){this._0=n;var G=this.constructor.SyntaxNode;var C=null;h=new G(o,this._0,q);if(typeof C==="object"){l(h,C)}this._0+=o.length}else{h=null}if(h){b.push(h);j+=h.textValue;i.rest=h}else{b=null;this._0=f}}else{b=null;this._0=f}if(b){this._0=f;var I=this.constructor.SyntaxNode;var J=H(this.constructor,"Union");a=new I(j,this._0,b,i);if(typeof J==="object"){l(a,J)}this._0+=j.length}else{a=null}return this._2["union_expression"][g]=a},__consume__location_path:function(d){var a=null,g=this._0;this._2["location_path"]=this._2["location_path"]||{};var c=this._2["location_path"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0,b=[],i={},j="";var e=null;e=this.__consume__location_step();if(e){b.push(e);j+=e.textValue;i.head=e;var h=null;var m=0,n=this._0,q=[],o="",k=true;while(k){k=this.__consume__location_step();if(k){q.push(k);o+=k.textValue;m-=1}}if(m<=0){this._0=n;var p=this.constructor.SyntaxNode;var r=null;h=new p(o,this._0,q);if(typeof r==="object"){l(h,r)}this._0+=o.length}else{h=null}if(h){b.push(h);j+=h.textValue;i.rest=h}else{b=null;this._0=f}}else{b=null;this._0=f}if(b){this._0=f;var t=this.constructor.SyntaxNode;var u=H(this.constructor,"LocationPath");a=new t(j,this._0,b,i);if(typeof u==="object"){l(a,u)}this._0+=j.length}else{a=null}return this._2["location_path"][g]=a},__consume__location_step:function(d){var a=null,g=this._0;this._2["location_step"]=this._2["location_step"]||{};var c=this._2["location_step"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0,b=[],i={},j="";var e=null;var h=this._0;var m=null;if(this._1.length>this._0){m=this._1.substring(this._0,this._0+1)}else{m=null}if(m==="/"){var n=this.constructor.SyntaxNode;var q=null;e=new n("/",this._0,[]);if(typeof q==="object"){l(e,q)}this._0+=1}else{e=null;var o=null;if(this._1.length>this._0){o=this._1.substring(this._0,this._0+1)}else{o=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"/\""}}}if(e){}else{this._0=h;var k=this.constructor.SyntaxNode;var p=null;e=new k("",this._0,[]);if(typeof p==="object"){l(e,p)}this._0+=0}if(e){b.push(e);j+=e.textValue;var r=null;var t=this._0;var u=this._0,s=[],v={},w="";var x=null;x=this.__consume__axis();if(x){s.push(x);w+=x.textValue;v.axis=x;var z=null;var A=this._0;z=this.__consume__node_test();if(z){}else{this._0=A;var y=this.constructor.SyntaxNode;var B=null;z=new y("",this._0,[]);if(typeof B==="object"){l(z,B)}this._0+=0}if(z){s.push(z);w+=z.textValue;v.test=z}else{s=null;this._0=u}}else{s=null;this._0=u}if(s){this._0=u;var E=this.constructor.SyntaxNode;var D=null;r=new E(w,this._0,s,v);if(typeof D==="object"){l(r,D)}this._0+=w.length}else{r=null}if(r){}else{this._0=t;var G=this._0,C=[],I={},J="";var F=null;var bm=this._0;F=this.__consume__axis();if(F){}else{this._0=bm;var be=this.constructor.SyntaxNode;var bf=null;F=new be("",this._0,[]);if(typeof bf==="object"){l(F,bf)}this._0+=0}if(F){C.push(F);J+=F.textValue;I.axis=F;var P=null;P=this.__consume__node_test();if(P){C.push(P);J+=P.textValue;I.test=P}else{C=null;this._0=G}}else{C=null;this._0=G}if(C){this._0=G;var R=this.constructor.SyntaxNode;var bg=null;r=new R(J,this._0,C,I);if(typeof bg==="object"){l(r,bg)}this._0+=J.length}else{r=null}if(r){}else{this._0=t}}if(r){b.push(r);j+=r.textValue;i.selector=r;var L=null;var Y=0,bn=this._0,Z=[],M="",N=true;while(N){N=this.__consume__node_predicate();if(N){Z.push(N);M+=N.textValue;Y-=1}}if(Y<=0){this._0=bn;var bo=this.constructor.SyntaxNode;var ba=null;L=new bo(M,this._0,Z);if(typeof ba==="object"){l(L,ba)}this._0+=M.length}else{L=null}if(L){b.push(L);j+=L.textValue;i.predicates=L}else{b=null;this._0=f}}else{b=null;this._0=f}}else{b=null;this._0=f}if(b){this._0=f;var bh=this.constructor.SyntaxNode;var bi=H(this.constructor,"LocationStep");a=new bh(j,this._0,b,i);if(typeof bi==="object"){l(a,bi)}this._0+=j.length}else{a=null}return this._2["location_step"][g]=a},__consume__axis:function(d){var a=null,g=this._0;this._2["axis"]=this._2["axis"]||{};var c=this._2["axis"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0;var b=this._0,i=[],j={},e="";var h=null;var m=1,n=this._0,q=[],o="",k=true;while(k){var p=null;if(this._1.length>this._0){p=this._1.substring(this._0,this._0+1)}else{p=null}if(p&&/^[a-z\-]/.test(p)){var r=this.constructor.SyntaxNode;var t=null;k=new r(p,this._0,[]);if(typeof t==="object"){l(k,t)}this._0+=1}else{k=null;var u=null;if(this._1.length>this._0){u=this._1.substring(this._0,this._0+1)}else{u=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[a-z\\-]"}}}if(k){q.push(k);o+=k.textValue;m-=1}}if(m<=0){this._0=n;var s=this.constructor.SyntaxNode;var v=null;h=new s(o,this._0,q);if(typeof v==="object"){l(h,v)}this._0+=o.length}else{h=null}if(h){i.push(h);e+=h.textValue;j.axis_name=h;var w=null;var x=null;if(this._1.length>this._0){x=this._1.substring(this._0,this._0+2)}else{x=null}if(x==="::"){var z=this.constructor.SyntaxNode;var A=null;w=new z("::",this._0,[]);if(typeof A==="object"){l(w,A)}this._0+=2}else{w=null;var y=null;if(this._1.length>this._0){y=this._1.substring(this._0,this._0+1)}else{y=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"::\""}}}if(w){i.push(w);e+=w.textValue}else{i=null;this._0=b}}else{i=null;this._0=b}if(i){this._0=b;var B=this.constructor.SyntaxNode;var E=null;a=new B(e,this._0,i,j);if(typeof E==="object"){l(a,E)}this._0+=e.length}else{a=null}if(a){}else{this._0=f;a=this.__consume__axis_shorthand();if(a){}else{this._0=f}}return this._2["axis"][g]=a},__consume__axis_shorthand:function(d){var a=null,g=this._0;this._2["axis_shorthand"]=this._2["axis_shorthand"]||{};var c=this._2["axis_shorthand"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0;var b=null;if(this._1.length>this._0){b=this._1.substring(this._0,this._0+1)}else{b=null}if(b==="@"){var i=this.constructor.SyntaxNode;var j=null;a=new i("@",this._0,[]);if(typeof j==="object"){l(a,j)}this._0+=1}else{a=null;var e=null;if(this._1.length>this._0){e=this._1.substring(this._0,this._0+1)}else{e=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"@\""}}}if(a){}else{this._0=f;var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+2)}else{h=null}if(h===".."){var m=this.constructor.SyntaxNode;var n=null;a=new m("..",this._0,[]);if(typeof n==="object"){l(a,n)}this._0+=2}else{a=null;var q=null;if(this._1.length>this._0){q=this._1.substring(this._0,this._0+1)}else{q=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"..\""}}}if(a){}else{this._0=f;var o=null;if(this._1.length>this._0){o=this._1.substring(this._0,this._0+1)}else{o=null}if(o==="."){var k=this.constructor.SyntaxNode;var p=null;a=new k(".",this._0,[]);if(typeof p==="object"){l(a,p)}this._0+=1}else{a=null;var r=null;if(this._1.length>this._0){r=this._1.substring(this._0,this._0+1)}else{r=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\".\""}}}if(a){}else{this._0=f;var t=null;if(this._1.length>this._0){t=this._1.substring(this._0,this._0+1)}else{t=null}if(t==="/"){var u=this.constructor.SyntaxNode;var s=null;a=new u("/",this._0,[]);if(typeof s==="object"){l(a,s)}this._0+=1}else{a=null;var v=null;if(this._1.length>this._0){v=this._1.substring(this._0,this._0+1)}else{v=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"/\""}}}if(a){}else{this._0=f}}}}return this._2["axis_shorthand"][g]=a},__consume__node_test:function(d){var a=null,g=this._0;this._2["node_test"]=this._2["node_test"]||{};var c=this._2["node_test"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0,b=[],i={},j="";var e=null;var h=this._0;e=this.__consume__node_condition();if(e){}else{this._0=h;e=this.__consume__node_name();if(e){}else{this._0=h;var m=null;if(this._1.length>this._0){m=this._1.substring(this._0,this._0+1)}else{m=null}if(m==="*"){var n=this.constructor.SyntaxNode;var q=null;e=new n("*",this._0,[]);if(typeof q==="object"){l(e,q)}this._0+=1}else{e=null;var o=null;if(this._1.length>this._0){o=this._1.substring(this._0,this._0+1)}else{o=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"*\""}}}if(e){}else{this._0=h}}}if(e){b.push(e);j+=e.textValue;var k=null;var p=this._0;k=this.__consume__subscript();if(k){}else{this._0=p;var r=this.constructor.SyntaxNode;var t=null;k=new r("",this._0,[]);if(typeof t==="object"){l(k,t)}this._0+=0}if(k){b.push(k);j+=k.textValue;i.subscript=k}else{b=null;this._0=f}}else{b=null;this._0=f}if(b){this._0=f;var u=this.constructor.SyntaxNode;var s=H(this.constructor,"NodeTest");a=new u(j,this._0,b,i);if(typeof s==="object"){l(a,s)}this._0+=j.length}else{a=null}return this._2["node_test"][g]=a},__consume__node_condition:function(d){var a=null,g=this._0;this._2["node_condition"]=this._2["node_condition"]||{};var c=this._2["node_condition"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0,b=[],i={},j="";var e=null;var h=1,m=this._0,n=[],q="",o=true;while(o){var k=null;if(this._1.length>this._0){k=this._1.substring(this._0,this._0+1)}else{k=null}if(k&&/^[a-z\-]/.test(k)){var p=this.constructor.SyntaxNode;var r=null;o=new p(k,this._0,[]);if(typeof r==="object"){l(o,r)}this._0+=1}else{o=null;var t=null;if(this._1.length>this._0){t=this._1.substring(this._0,this._0+1)}else{t=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[a-z\\-]"}}}if(o){n.push(o);q+=o.textValue;h-=1}}if(h<=0){this._0=m;var u=this.constructor.SyntaxNode;var s=null;e=new u(q,this._0,n);if(typeof s==="object"){l(e,s)}this._0+=q.length}else{e=null}if(e){b.push(e);j+=e.textValue;i.condition_name=e;var v=null;var w=null;if(this._1.length>this._0){w=this._1.substring(this._0,this._0+2)}else{w=null}if(w==="()"){var x=this.constructor.SyntaxNode;var z=null;v=new x("()",this._0,[]);if(typeof z==="object"){l(v,z)}this._0+=2}else{v=null;var A=null;if(this._1.length>this._0){A=this._1.substring(this._0,this._0+1)}else{A=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"()\""}}}if(v){b.push(v);j+=v.textValue}else{b=null;this._0=f}}else{b=null;this._0=f}if(b){this._0=f;var y=this.constructor.SyntaxNode;var B=null;a=new y(j,this._0,b,i);if(typeof B==="object"){l(a,B)}this._0+=j.length}else{a=null}return this._2["node_condition"][g]=a},__consume__node_name:function(d){var a=null,g=this._0;this._2["node_name"]=this._2["node_name"]||{};var c=this._2["node_name"][g];if(c){this._0+=c.textValue.length;return c}var f=1,b=this._0,i=[],j="",e=true;while(e){var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h&&/^[A-Za-z0-9\-]/.test(h)){var m=this.constructor.SyntaxNode;var n=null;e=new m(h,this._0,[]);if(typeof n==="object"){l(e,n)}this._0+=1}else{e=null;var q=null;if(this._1.length>this._0){q=this._1.substring(this._0,this._0+1)}else{q=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[A-Za-z0-9\\-]"}}}if(e){i.push(e);j+=e.textValue;f-=1}}if(f<=0){this._0=b;var o=this.constructor.SyntaxNode;var k=null;a=new o(j,this._0,i);if(typeof k==="object"){l(a,k)}this._0+=j.length}else{a=null}return this._2["node_name"][g]=a},__consume__subscript:function(d){var a=null,g=this._0;this._2["subscript"]=this._2["subscript"]||{};var c=this._2["subscript"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0,b=[],i={},j="";var e=null;var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h==="["){var m=this.constructor.SyntaxNode;var n=null;e=new m("[",this._0,[]);if(typeof n==="object"){l(e,n)}this._0+=1}else{e=null;var q=null;if(this._1.length>this._0){q=this._1.substring(this._0,this._0+1)}else{q=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"[\""}}}if(e){b.push(e);j+=e.textValue;var o=null;o=this.__consume__space();if(o){b.push(o);j+=o.textValue;i.space=o;var k=null;k=this.__consume__integer();if(k){b.push(k);j+=k.textValue;i.integer=k;var p=null;p=this.__consume__space();if(p){b.push(p);j+=p.textValue;i.space=p;var r=null;var t=null;if(this._1.length>this._0){t=this._1.substring(this._0,this._0+1)}else{t=null}if(t==="]"){var u=this.constructor.SyntaxNode;var s=null;r=new u("]",this._0,[]);if(typeof s==="object"){l(r,s)}this._0+=1}else{r=null;var v=null;if(this._1.length>this._0){v=this._1.substring(this._0,this._0+1)}else{v=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"]\""}}}if(r){b.push(r);j+=r.textValue}else{b=null;this._0=f}}else{b=null;this._0=f}}else{b=null;this._0=f}}else{b=null;this._0=f}}else{b=null;this._0=f}if(b){this._0=f;var w=this.constructor.SyntaxNode;var x=null;a=new w(j,this._0,b,i);if(typeof x==="object"){l(a,x)}this._0+=j.length}else{a=null}return this._2["subscript"][g]=a},__consume__node_predicate:function(d){var a=null,g=this._0;this._2["node_predicate"]=this._2["node_predicate"]||{};var c=this._2["node_predicate"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0,b=[],i={},j="";var e=null;var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h==="["){var m=this.constructor.SyntaxNode;var n=null;e=new m("[",this._0,[]);if(typeof n==="object"){l(e,n)}this._0+=1}else{e=null;var q=null;if(this._1.length>this._0){q=this._1.substring(this._0,this._0+1)}else{q=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"[\""}}}if(e){b.push(e);j+=e.textValue;var o=null;o=this.__consume__expression();if(o){b.push(o);j+=o.textValue;i.expression=o;var k=null;var p=null;if(this._1.length>this._0){p=this._1.substring(this._0,this._0+1)}else{p=null}if(p==="]"){var r=this.constructor.SyntaxNode;var t=null;k=new r("]",this._0,[]);if(typeof t==="object"){l(k,t)}this._0+=1}else{k=null;var u=null;if(this._1.length>this._0){u=this._1.substring(this._0,this._0+1)}else{u=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"]\""}}}if(k){b.push(k);j+=k.textValue;var s=null;var v=this._0;s=this.__consume__subscript();if(s){}else{this._0=v;var w=this.constructor.SyntaxNode;var x=null;s=new w("",this._0,[]);if(typeof x==="object"){l(s,x)}this._0+=0}if(s){b.push(s);j+=s.textValue;i.subscript=s}else{b=null;this._0=f}}else{b=null;this._0=f}}else{b=null;this._0=f}}else{b=null;this._0=f}if(b){this._0=f;var z=this.constructor.SyntaxNode;var A=null;a=new z(j,this._0,b,i);if(typeof A==="object"){l(a,A)}this._0+=j.length}else{a=null}return this._2["node_predicate"][g]=a},__consume__expression:function(d){var a=null,g=this._0;this._2["expression"]=this._2["expression"]||{};var c=this._2["expression"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0;a=this.__consume__or_expression();if(a){}else{this._0=f;a=this.__consume__and_expression();if(a){}else{this._0=f;a=this.__consume__comparison();if(a){}else{this._0=f;a=this.__consume__atom();if(a){}else{this._0=f}}}}return this._2["expression"][g]=a},__consume__or_expression:function(d){var a=null,g=this._0;this._2["or_expression"]=this._2["or_expression"]||{};var c=this._2["or_expression"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0;var b=this._0,i=[],j={},e="";var h=null;h=this.__consume__and_expression();if(h){i.push(h);e+=h.textValue;j.left=h;var m=null;var n=null;if(this._1.length>this._0){n=this._1.substring(this._0,this._0+2)}else{n=null}if(n==="or"){var q=this.constructor.SyntaxNode;var o=null;m=new q("or",this._0,[]);if(typeof o==="object"){l(m,o)}this._0+=2}else{m=null;var k=null;if(this._1.length>this._0){k=this._1.substring(this._0,this._0+1)}else{k=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"or\""}}}if(m){i.push(m);e+=m.textValue;var p=null;p=this.__consume__or_expression();if(p){i.push(p);e+=p.textValue;j.right=p}else{i=null;this._0=b}}else{i=null;this._0=b}}else{i=null;this._0=b}if(i){this._0=b;var r=this.constructor.SyntaxNode;var t=H(this.constructor,"Or");a=new r(e,this._0,i,j);if(typeof t==="object"){l(a,t)}this._0+=e.length}else{a=null}if(a){}else{this._0=f;a=this.__consume__and_expression();if(a){}else{this._0=f}}return this._2["or_expression"][g]=a},__consume__and_expression:function(d){var a=null,g=this._0;this._2["and_expression"]=this._2["and_expression"]||{};var c=this._2["and_expression"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0;var b=this._0,i=[],j={},e="";var h=null;h=this.__consume__comparison();if(h){i.push(h);e+=h.textValue;j.left=h;var m=null;var n=null;if(this._1.length>this._0){n=this._1.substring(this._0,this._0+3)}else{n=null}if(n==="and"){var q=this.constructor.SyntaxNode;var o=null;m=new q("and",this._0,[]);if(typeof o==="object"){l(m,o)}this._0+=3}else{m=null;var k=null;if(this._1.length>this._0){k=this._1.substring(this._0,this._0+1)}else{k=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"and\""}}}if(m){i.push(m);e+=m.textValue;var p=null;p=this.__consume__and_expression();if(p){i.push(p);e+=p.textValue;j.right=p}else{i=null;this._0=b}}else{i=null;this._0=b}}else{i=null;this._0=b}if(i){this._0=b;var r=this.constructor.SyntaxNode;var t=H(this.constructor,"And");a=new r(e,this._0,i,j);if(typeof t==="object"){l(a,t)}this._0+=e.length}else{a=null}if(a){}else{this._0=f;a=this.__consume__comparison();if(a){}else{this._0=f}}return this._2["and_expression"][g]=a},__consume__comparison:function(d){var a=null,g=this._0;this._2["comparison"]=this._2["comparison"]||{};var c=this._2["comparison"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0;var b=this._0,i=[],j={},e="";var h=null;h=this.__consume__atom();if(h){i.push(h);e+=h.textValue;j.left=h;var m=null;m=this.__consume__comparator();if(m){i.push(m);e+=m.textValue;j.comparator=m;var n=null;n=this.__consume__comparison();if(n){i.push(n);e+=n.textValue;j.right=n}else{i=null;this._0=b}}else{i=null;this._0=b}}else{i=null;this._0=b}if(i){this._0=b;var q=this.constructor.SyntaxNode;var o=H(this.constructor,"Comparison");a=new q(e,this._0,i,j);if(typeof o==="object"){l(a,o)}this._0+=e.length}else{a=null}if(a){}else{this._0=f;a=this.__consume__atom();if(a){}else{this._0=f}}return this._2["comparison"][g]=a},__consume__comparator:function(d){var a=null,g=this._0;this._2["comparator"]=this._2["comparator"]||{};var c=this._2["comparator"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0;var b=null;if(this._1.length>this._0){b=this._1.substring(this._0,this._0+2)}else{b=null}if(b==="!="){var i=this.constructor.SyntaxNode;var j=null;a=new i("!=",this._0,[]);if(typeof j==="object"){l(a,j)}this._0+=2}else{a=null;var e=null;if(this._1.length>this._0){e=this._1.substring(this._0,this._0+1)}else{e=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"!=\""}}}if(a){}else{this._0=f;var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h==="="){var m=this.constructor.SyntaxNode;var n=null;a=new m("=",this._0,[]);if(typeof n==="object"){l(a,n)}this._0+=1}else{a=null;var q=null;if(this._1.length>this._0){q=this._1.substring(this._0,this._0+1)}else{q=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"=\""}}}if(a){}else{this._0=f}}return this._2["comparator"][g]=a},__consume__atom:function(d){var a=null,g=this._0;this._2["atom"]=this._2["atom"]||{};var c=this._2["atom"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0,b=[],i={},j="";var e=null;e=this.__consume__space();if(e){b.push(e);j+=e.textValue;i.space=e;var h=null;var m=this._0;var n=this._0,q=[],o={},k="";var p=null;var r=null;if(this._1.length>this._0){r=this._1.substring(this._0,this._0+1)}else{r=null}if(r==="("){var t=this.constructor.SyntaxNode;var u=null;p=new t("(",this._0,[]);if(typeof u==="object"){l(p,u)}this._0+=1}else{p=null;var s=null;if(this._1.length>this._0){s=this._1.substring(this._0,this._0+1)}else{s=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"(\""}}}if(p){q.push(p);k+=p.textValue;var v=null;v=this.__consume__expression();if(v){q.push(v);k+=v.textValue;o.in_parens=v;var w=null;var x=null;if(this._1.length>this._0){x=this._1.substring(this._0,this._0+1)}else{x=null}if(x===")"){var z=this.constructor.SyntaxNode;var A=null;w=new z(")",this._0,[]);if(typeof A==="object"){l(w,A)}this._0+=1}else{w=null;var y=null;if(this._1.length>this._0){y=this._1.substring(this._0,this._0+1)}else{y=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\")\""}}}if(w){q.push(w);k+=w.textValue}else{q=null;this._0=n}}else{q=null;this._0=n}}else{q=null;this._0=n}if(q){this._0=n;var B=this.constructor.SyntaxNode;var E=null;h=new B(k,this._0,q,o);if(typeof E==="object"){l(h,E)}this._0+=k.length}else{h=null}if(h){}else{this._0=m;h=this.__consume__value();if(h){}else{this._0=m}}if(h){b.push(h);j+=h.textValue;i.expression=h;var D=null;D=this.__consume__space();if(D){b.push(D);j+=D.textValue;i.space=D}else{b=null;this._0=f}}else{b=null;this._0=f}}else{b=null;this._0=f}if(b){this._0=f;var G=this.constructor.SyntaxNode;var C=H(this.constructor,"Atom");a=new G(j,this._0,b,i);if(typeof C==="object"){l(a,C)}this._0+=j.length}else{a=null}return this._2["atom"][g]=a},__consume__value:function(d){var a=null,g=this._0;this._2["value"]=this._2["value"]||{};var c=this._2["value"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0;a=this.__consume__function_call();if(a){}else{this._0=f;a=this.__consume__string();if(a){}else{this._0=f;a=this.__consume__union_expression();if(a){}else{this._0=f}}}return this._2["value"][g]=a},__consume__function_call:function(d){var a=null,g=this._0;this._2["function_call"]=this._2["function_call"]||{};var c=this._2["function_call"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0,b=[],i={},j="";var e=null;e=this.__consume__function_name();if(e){b.push(e);j+=e.textValue;i.function_name=e;var h=null;var m=null;if(this._1.length>this._0){m=this._1.substring(this._0,this._0+1)}else{m=null}if(m==="("){var n=this.constructor.SyntaxNode;var q=null;h=new n("(",this._0,[]);if(typeof q==="object"){l(h,q)}this._0+=1}else{h=null;var o=null;if(this._1.length>this._0){o=this._1.substring(this._0,this._0+1)}else{o=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"(\""}}}if(h){b.push(h);j+=h.textValue;var k=null;k=this.__consume__function_args();if(k){b.push(k);j+=k.textValue;i.function_args=k;var p=null;var r=null;if(this._1.length>this._0){r=this._1.substring(this._0,this._0+1)}else{r=null}if(r===")"){var t=this.constructor.SyntaxNode;var u=null;p=new t(")",this._0,[]);if(typeof u==="object"){l(p,u)}this._0+=1}else{p=null;var s=null;if(this._1.length>this._0){s=this._1.substring(this._0,this._0+1)}else{s=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\")\""}}}if(p){b.push(p);j+=p.textValue}else{b=null;this._0=f}}else{b=null;this._0=f}}else{b=null;this._0=f}}else{b=null;this._0=f}if(b){this._0=f;var v=this.constructor.SyntaxNode;var w=H(this.constructor,"FunctionCall");a=new v(j,this._0,b,i);if(typeof w==="object"){l(a,w)}this._0+=j.length}else{a=null}return this._2["function_call"][g]=a},__consume__function_name:function(d){var a=null,g=this._0;this._2["function_name"]=this._2["function_name"]||{};var c=this._2["function_name"][g];if(c){this._0+=c.textValue.length;return c}var f=1,b=this._0,i=[],j="",e=true;while(e){var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h&&/^[a-z\-]/.test(h)){var m=this.constructor.SyntaxNode;var n=null;e=new m(h,this._0,[]);if(typeof n==="object"){l(e,n)}this._0+=1}else{e=null;var q=null;if(this._1.length>this._0){q=this._1.substring(this._0,this._0+1)}else{q=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[a-z\\-]"}}}if(e){i.push(e);j+=e.textValue;f-=1}}if(f<=0){this._0=b;var o=this.constructor.SyntaxNode;var k=null;a=new o(j,this._0,i);if(typeof k==="object"){l(a,k)}this._0+=j.length}else{a=null}return this._2["function_name"][g]=a},__consume__function_args:function(d){var a=null,g=this._0;this._2["function_args"]=this._2["function_args"]||{};var c=this._2["function_args"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0;var b=this._0,i=[],j={},e="";var h=null;h=this.__consume__expression();if(h){i.push(h);e+=h.textValue;j.first=h;var m=null;var n=0,q=this._0,o=[],k="",p=true;while(p){var r=this._0,t=[],u={},s="";var v=null;var w=null;if(this._1.length>this._0){w=this._1.substring(this._0,this._0+1)}else{w=null}if(w===","){var x=this.constructor.SyntaxNode;var z=null;v=new x(",",this._0,[]);if(typeof z==="object"){l(v,z)}this._0+=1}else{v=null;var A=null;if(this._1.length>this._0){A=this._1.substring(this._0,this._0+1)}else{A=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\",\""}}}if(v){t.push(v);s+=v.textValue;var y=null;y=this.__consume__expression();if(y){t.push(y);s+=y.textValue;u.expression=y}else{t=null;this._0=r}}else{t=null;this._0=r}if(t){this._0=r;var B=this.constructor.SyntaxNode;var E=null;p=new B(s,this._0,t,u);if(typeof E==="object"){l(p,E)}this._0+=s.length}else{p=null}if(p){o.push(p);k+=p.textValue;n-=1}}if(n<=0){this._0=q;var D=this.constructor.SyntaxNode;var G=null;m=new D(k,this._0,o);if(typeof G==="object"){l(m,G)}this._0+=k.length}else{m=null}if(m){i.push(m);e+=m.textValue;j.rest=m}else{i=null;this._0=b}}else{i=null;this._0=b}if(i){this._0=b;var C=this.constructor.SyntaxNode;var I=null;a=new C(e,this._0,i,j);if(typeof I==="object"){l(a,I)}this._0+=e.length}else{a=null}if(a){}else{this._0=f;var J=this.constructor.SyntaxNode;var F=null;a=new J("",this._0,[]);if(typeof F==="object"){l(a,F)}this._0+=0}return this._2["function_args"][g]=a},__consume__integer:function(d){var a=null,g=this._0;this._2["integer"]=this._2["integer"]||{};var c=this._2["integer"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0,b=[],i={},j="";var e=null;var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h&&/^[1-9]/.test(h)){var m=this.constructor.SyntaxNode;var n=null;e=new m(h,this._0,[]);if(typeof n==="object"){l(e,n)}this._0+=1}else{e=null;var q=null;if(this._1.length>this._0){q=this._1.substring(this._0,this._0+1)}else{q=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[1-9]"}}}if(e){b.push(e);j+=e.textValue;var o=null;var k=0,p=this._0,r=[],t="",u=true;while(u){var s=null;if(this._1.length>this._0){s=this._1.substring(this._0,this._0+1)}else{s=null}if(s&&/^[0-9]/.test(s)){var v=this.constructor.SyntaxNode;var w=null;u=new v(s,this._0,[]);if(typeof w==="object"){l(u,w)}this._0+=1}else{u=null;var x=null;if(this._1.length>this._0){x=this._1.substring(this._0,this._0+1)}else{x=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[0-9]"}}}if(u){r.push(u);t+=u.textValue;k-=1}}if(k<=0){this._0=p;var z=this.constructor.SyntaxNode;var A=null;o=new z(t,this._0,r);if(typeof A==="object"){l(o,A)}this._0+=t.length}else{o=null}if(o){b.push(o);j+=o.textValue}else{b=null;this._0=f}}else{b=null;this._0=f}if(b){this._0=f;var y=this.constructor.SyntaxNode;var B=H(this.constructor,"Integer");a=new y(j,this._0,b,i);if(typeof B==="object"){l(a,B)}this._0+=j.length}else{a=null}return this._2["integer"][g]=a},__consume__string:function(d){var a=null,g=this._0;this._2["string"]=this._2["string"]||{};var c=this._2["string"][g];if(c){this._0+=c.textValue.length;return c}var f=this._0;var b=this._0,i=[],j={},e="";var h=null;var m=null;if(this._1.length>this._0){m=this._1.substring(this._0,this._0+1)}else{m=null}if(m==="'"){var n=this.constructor.SyntaxNode;var q=null;h=new n("'",this._0,[]);if(typeof q==="object"){l(h,q)}this._0+=1}else{h=null;var o=null;if(this._1.length>this._0){o=this._1.substring(this._0,this._0+1)}else{o=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"'\""}}}if(h){i.push(h);e+=h.textValue;var k=null;var p=0,r=this._0,t=[],u="",s=true;while(s){var v=this._0;var w=this._0,x=[],z={},A="";var y=null;var B=null;if(this._1.length>this._0){B=this._1.substring(this._0,this._0+1)}else{B=null}if(B==="\\"){var E=this.constructor.SyntaxNode;var D=null;y=new E("\\",this._0,[]);if(typeof D==="object"){l(y,D)}this._0+=1}else{y=null;var G=null;if(this._1.length>this._0){G=this._1.substring(this._0,this._0+1)}else{G=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"\\\\\""}}}if(y){x.push(y);A+=y.textValue;var C=null;var I=null;if(this._1.length>this._0){I=this._1.substring(this._0,this._0+1)}else{I=null}var J=I;if(J===null){C=null;var F=null;if(this._1.length>this._0){F=this._1.substring(this._0,this._0+1)}else{F=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"<any char>"}}}else{var bm=this.constructor.SyntaxNode;var be=null;C=new bm(J,this._0,[]);if(typeof be==="object"){l(C,be)}this._0+=1}if(C){x.push(C);A+=C.textValue}else{x=null;this._0=w}}else{x=null;this._0=w}if(x){this._0=w;var bf=this.constructor.SyntaxNode;var P=null;s=new bf(A,this._0,x,z);if(typeof P==="object"){l(s,P)}this._0+=A.length}else{s=null}if(s){}else{this._0=v;var R=null;if(this._1.length>this._0){R=this._1.substring(this._0,this._0+1)}else{R=null}if(R&&/^[^']/.test(R)){var bg=this.constructor.SyntaxNode;var L=null;s=new bg(R,this._0,[]);if(typeof L==="object"){l(s,L)}this._0+=1}else{s=null;var Y=null;if(this._1.length>this._0){Y=this._1.substring(this._0,this._0+1)}else{Y=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[^']"}}}if(s){}else{this._0=v}}if(s){t.push(s);u+=s.textValue;p-=1}}if(p<=0){this._0=r;var bn=this.constructor.SyntaxNode;var Z=null;k=new bn(u,this._0,t);if(typeof Z==="object"){l(k,Z)}this._0+=u.length}else{k=null}if(k){i.push(k);e+=k.textValue;var M=null;var N=null;if(this._1.length>this._0){N=this._1.substring(this._0,this._0+1)}else{N=null}if(N==="'"){var bo=this.constructor.SyntaxNode;var ba=null;M=new bo("'",this._0,[]);if(typeof ba==="object"){l(M,ba)}this._0+=1}else{M=null;var bh=null;if(this._1.length>this._0){bh=this._1.substring(this._0,this._0+1)}else{bh=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"'\""}}}if(M){i.push(M);e+=M.textValue}else{i=null;this._0=b}}else{i=null;this._0=b}}else{i=null;this._0=b}if(i){this._0=b;var bi=this.constructor.SyntaxNode;var bw=null;a=new bi(e,this._0,i,j);if(typeof bw==="object"){l(a,bw)}this._0+=e.length}else{a=null}if(a){var bx=H(this.constructor,"String");if(typeof bx==="object"){l(a,bx)}}else{this._0=f;var bj=this._0,Q=[],bR={},bb="";var S=null;var bp=null;if(this._1.length>this._0){bp=this._1.substring(this._0,this._0+1)}else{bp=null}if(bp==="\""){var bS=this.constructor.SyntaxNode;var by=null;S=new bS("\"",this._0,[]);if(typeof by==="object"){l(S,by)}this._0+=1}else{S=null;var bz=null;if(this._1.length>this._0){bz=this._1.substring(this._0,this._0+1)}else{bz=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"\\\"\""}}}if(S){Q.push(S);bb+=S.textValue;var T=null;var bA=0,bT=this._0,bB=[],bq="",K=true;while(K){var bC=this._0;var br=this._0,U=[],bU={},bk="";var V=null;var bs=null;if(this._1.length>this._0){bs=this._1.substring(this._0,this._0+1)}else{bs=null}if(bs==="\\"){var bV=this.constructor.SyntaxNode;var bD=null;V=new bV("\\",this._0,[]);if(typeof bD==="object"){l(V,bD)}this._0+=1}else{V=null;var bE=null;if(this._1.length>this._0){bE=this._1.substring(this._0,this._0+1)}else{bE=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"\\\\\""}}}if(V){U.push(V);bk+=V.textValue;var W=null;var bt=null;if(this._1.length>this._0){bt=this._1.substring(this._0,this._0+1)}else{bt=null}var bF=bt;if(bF===null){W=null;var bG=null;if(this._1.length>this._0){bG=this._1.substring(this._0,this._0+1)}else{bG=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"<any char>"}}}else{var bW=this.constructor.SyntaxNode;var bH=null;W=new bW(bF,this._0,[]);if(typeof bH==="object"){l(W,bH)}this._0+=1}if(W){U.push(W);bk+=W.textValue}else{U=null;this._0=br}}else{U=null;this._0=br}if(U){this._0=br;var bX=this.constructor.SyntaxNode;var bI=null;K=new bX(bk,this._0,U,bU);if(typeof bI==="object"){l(K,bI)}this._0+=bk.length}else{K=null}if(K){}else{this._0=bC;var bc=null;if(this._1.length>this._0){bc=this._1.substring(this._0,this._0+1)}else{bc=null}if(bc&&/^[^"]/.test(bc)){var bY=this.constructor.SyntaxNode;var bJ=null;K=new bY(bc,this._0,[]);if(typeof bJ==="object"){l(K,bJ)}this._0+=1}else{K=null;var bK=null;if(this._1.length>this._0){bK=this._1.substring(this._0,this._0+1)}else{bK=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"[^\"]"}}}if(K){}else{this._0=bC}}if(K){bB.push(K);bq+=K.textValue;bA-=1}}if(bA<=0){this._0=bT;var bZ=this.constructor.SyntaxNode;var bL=null;T=new bZ(bq,this._0,bB);if(typeof bL==="object"){l(T,bL)}this._0+=bq.length}else{T=null}if(T){Q.push(T);bb+=T.textValue;var X=null;var bu=null;if(this._1.length>this._0){bu=this._1.substring(this._0,this._0+1)}else{bu=null}if(bu==="\""){var ca=this.constructor.SyntaxNode;var bM=null;X=new ca("\"",this._0,[]);if(typeof bM==="object"){l(X,bM)}this._0+=1}else{X=null;var bN=null;if(this._1.length>this._0){bN=this._1.substring(this._0,this._0+1)}else{bN=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\"\\\"\""}}}if(X){Q.push(X);bb+=X.textValue}else{Q=null;this._0=bj}}else{Q=null;this._0=bj}}else{Q=null;this._0=bj}if(Q){this._0=bj;var cb=this.constructor.SyntaxNode;var bO=null;a=new cb(bb,this._0,Q,bR);if(typeof bO==="object"){l(a,bO)}this._0+=bb.length}else{a=null}if(a){var bP=H(this.constructor,"String");if(typeof bP==="object"){l(a,bP)}}else{this._0=f}}return this._2["string"][g]=a},__consume__space:function(d){var a=null,g=this._0;this._2["space"]=this._2["space"]||{};var c=this._2["space"][g];if(c){this._0+=c.textValue.length;return c}var f=0,b=this._0,i=[],j="",e=true;while(e){var h=null;if(this._1.length>this._0){h=this._1.substring(this._0,this._0+1)}else{h=null}if(h===" "){var m=this.constructor.SyntaxNode;var n=null;e=new m(" ",this._0,[]);if(typeof n==="object"){l(e,n)}this._0+=1}else{e=null;var q=null;if(this._1.length>this._0){q=this._1.substring(this._0,this._0+1)}else{q=null}if(!this.error||this.error.offset<=this._0){this.error=this.constructor.lastError={input:this._1,offset:this._0,expected:"\" \""}}}if(e){i.push(e);j+=e.textValue;f-=1}}if(f<=0){this._0=b;var o=this.constructor.SyntaxNode;var k=null;a=new o(j,this._0,i);if(typeof k==="object"){l(a,k)}this._0+=j.length}else{a=null}return this._2["space"][g]=a}};var O=function(d){this._1=d;this._0=0;this._2={}};O.prototype.parse=function(){var d=this.__consume__union_expression();if(d&&this._0===this._1.length){return d}if(!(this.error)){this.error={input:this._1,offset:this._0,expected:"<EOF>"}}var a=bl(this.error);var g=new Error(a);throw g;};O.parse=function(d){var a=new O(d);return a.parse()};l(O.prototype,bd);var bQ=function(d,a,g,c){this.textValue=d;this.offset=a;this.elements=g||[];if(!c)return;for(var f in c)this[f]=c[f]};bQ.prototype.forEach=function(d,a){for(var g=0,c=this.elements.length;g<c;g++){d.call(a,this.elements[g],g)}};O.SyntaxNode=bQ;if(typeof require==="function"&&typeof exports==="object"){exports.Grammar=bd;exports.Parser=O;exports.parse=O.parse;if(typeof Pathology!=="undefined"){Pathology.XPath=bd;Pathology.XPathParser=O;Pathology.XPathParser.formatError=bl}}else{var bv=this;bv=bv.Pathology=bv.Pathology||{};Pathology.XPath=bd;Pathology.XPathParser=O;Pathology.XPathParser.formatError=bl}})();Pathology.XPathParser.And={evaluate:function(d,a){return Pathology.atomize(this.left,d,a)&&Pathology.atomize(this.right,d,a)}};Pathology.XPathParser.Atom={evaluate:function(d,a){var g=this.expression.in_parens||this.expression;return g.evaluate(d,a)}};Pathology.Axis=function(d){this.name=d};Pathology.Axis.prototype.walk=function(d,a,g){var c=d.childNodes,f=Pathology.array(d.attributes),b;if(d.checked)f.push({nodeName:'checked',nodeValue:true,nodeType:XPathResult.STRING_TYPE});if(d.selected)f.push({nodeName:'selected',nodeValue:true,nodeType:XPathResult.STRING_TYPE});switch(this.name){case'attribute':for(var i=0,j=f.length;i<j;i++){a.call(g,f[i])}break;case'child':for(var i=0,j=c.length;i<j;i++){a.call(g,c[i])}break;case'descendant-or-self':a.call(g,d);for(var i=0,j=c.length;i<j;i++){this.walk(c[i],a,g)}break;case'following-sibling':b=d.nextSibling;while(b){a.call(g,b);b=b.nextSibling}break;case'parent':a.call(g,d.parentNode);break;case'self':a.call(g,d);break}};Pathology.Axis.SHORTHANDS={'@':'attribute','..':'parent','.':'self','/':'descendant-or-self','':'child'};Pathology.Axis.fromAST=function(d){var a=d.axis_name?d.axis_name.textValue:d.textValue;return new this(this.SHORTHANDS[a]||a)};Pathology.XPathParser.Comparison={evaluate:function(d,a){var g=this.comparator.textValue,c=this.left.evaluate(d,a),f=Pathology.atomize(this.right,d,a),b=false,i=(f instanceof Array),j;if(c._3){for(var e=0,h=c._3.length;e<h;e++){j=c._3[e];if(g==='='){b=b||(i?f.indexOf(j.nodeValue)>=0:(j.nodeValue==f||j.innerHTML==f))}else if(g==='!='){b=b||(i?f.indexOf(j.nodeValue)<0:(j.nodeValue!=f&&j.innerHTML!=f))}}return b}else{switch(g){case'=':return i?f.indexOf(c.nodeValue)>=0:c==f;case'!=':return i?f.indexOf(j.nodeValue)<0:c!=f}}}};Pathology.XPathParser.FunctionCall={getArguments:function(d,a){var g=[],c=this.function_args.rest;if(this.function_args.first&&this.function_args.first.evaluate){g.push(this.function_args.first.evaluate(d,a))}if(c){for(var f=0,b=c.elements.length;f<b;f++)g.push(c.elements[f].expression.evaluate(d,a))}return g},evaluate:function(d,a){var g=this.getArguments(d,a),c=this.REGISTER[this.function_name.textValue];return c.apply(d,g)},REGISTER:{'concat':function(){var d='';for(var a=0,g=arguments.length;a<g;a++)d+=arguments[a].makeString?arguments[a].makeString():arguments[a];return d},'contains':function(d,a){if(!d)return false;if(d.makeString)d=d.makeString();return d.toString().indexOf(a)>=0},'normalize-space':function(d){if(d.makeString)d=d.makeString();return d.toString().replace(/^\s*/g,'').replace(/\s*$/g,'').replace(/\s+/g,' ')},'name':function(){return this.nodeName.toLowerCase()},'not':function(d){if(d&&d.atomize)d=d.atomize();if(typeof d==='string')return false;return!d},'string':function(d){return d.atomize().innerText},'text':function(){return document.evaluate('/text()',this,null,XPathResult.ANY_TYPE,null)}}};Pathology.XPathParser.LocationPath={eachStep:function(d,a){var g=[this.head].concat(this.rest.elements);for(var c=0,f=g.length;c<f;c++)d.call(a,g[c])},evaluate:function(d,a,g,c){c=c||new Pathology.XPathResult(XPathResult.ANY_TYPE);g=g||XPathResult.ANY_TYPE;var f=new Pathology.XPathResult(g),b=this.head.isRelative()?d:a,i=[this.head].concat(this.rest.elements),j,e,h,m,n,q;f.push(b);for(h=0,n=i.length;h<n;h++){j=i[h];e=new Pathology.XPathResult(g);for(m=0,q=f._3.length;m<q;m++){j.evaluate(f._3[m],a,g,e)}f=e}for(h=0,n=f._3.length;h<n;h++)c.push(f._3[h]);return c}};Pathology.XPathParser.LocationStep={isRelative:function(){return this.elements[0].textValue!=='/'},evaluate:function(a,g,c,f){var b=this.selector.axis,i=this.selector.test,j=[[]];Pathology.Axis.fromAST(b).walk(a,function(d){if(!i||!i.evaluate)return f.push(d);i.evaluate(d,this.predicates,g,c,j,f)},this)}};Pathology.XPathParser.NodeTest={evaluate:function(d,a,g,c,f,b){var i=this.elements[0].condition_name,j=j=this.elements[0].textValue.toLowerCase();var e={expression:{evaluate:function(){if(i&&i.textValue==='node'){return true}else if(i&&i.textValue==='text'){if(d.nodeType!==XPathResult.BOOLEAN_TYPE)return false}else{if(j==='*'){if(d.nodeType!==1)return false}else{if(!d.nodeName)return false;if(d.nodeName.toLowerCase()!==j)return false}}return true}},subscript:this.subscript};a=[e].concat(a.elements);var h,m;for(var n=0,q=a.length;n<q;n++){f[n]=f[n]||[];m=a[n];h=Pathology.atomize(m.expression,d,g);if(typeof h==='string')h=true;if(!h)return;f[n].push(d);if(m.subscript.integer){if(m.subscript.integer.evaluate()!==f[n].length)return}}b.push(d)}};Pathology.XPathParser.Or={evaluate:function(d,a){return Pathology.atomize(this.left,d,a)||Pathology.atomize(this.right,d,a)}};Pathology.XPathParser.Integer={evaluate:function(d,a){return parseInt(this.textValue,10)}};Pathology.XPathParser.String={evaluate:function(d,a){return eval(this.textValue)}};Pathology.XPathParser.Union={evaluate:function(d,a,g,c){c=c||new Pathology.XPathResult(XPathResult.ANY_TYPE);g=g||XPathResult.ANY_TYPE;this.head.evaluate(d,a,g,c);var f=this.rest.elements;for(var b=0,i=f.length;b<i;b++)f[b].location_path.evaluate(d,a,g,c);return c}};
//@ sourceMappingURL=pathology-min.js.map