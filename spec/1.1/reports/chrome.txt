
Capybara::Session
  with non-existant driver
    should raise an error

Capybara::Driver::Terminus
  it should behave like driver
    #visit
      should move to another page
      should show the correct URL
    #body
      should return text reponses
      should return the full response html
      encoding of response between ascii and utf8
        should be valid with html entities
        should be valid without html entities
    #find
      with xpath selector
        should extract node texts
        should extract node attributes
        should extract boolean node attributes
        should allow retrieval of the value
        should allow assignment of field value
        should extract node tag name
        should extract node visibility
        should extract node checked state
        should extract node selected state
        should return document text on /html selector
  it should behave like driver with javascript support
    #find
      should find dynamically changed nodes
    #drag_to
      should drag and drop an object
    #evaluate_script
      should return the value of the executed script
  it should behave like driver with resynchronization support
    #find
      with synchronization turned on
        should wait for all ajax requests to finish
      with resynchronization turned off
        should not wait for ajax requests to finish
      with short synchronization timeout
        should raise an error
  it should behave like driver with header support
    should make headers available through response_headers
  it should behave like driver with status code support
    should make the status code available through status_code
  it should behave like driver with frame support
    #within_frame
      should find the div in frameOne
      should find the div in FrameTwo
      should find the text div in the main window after finding text in frameOne
      should find the text div in the main window after finding text in frameTwo
  it should behave like driver with support for window switching
    #within_window
      should find the div in firstPopup
      should find the div in secondPopup
      should find the divs in both popups
      should find the div in the main window after finding a div in a popup
  it should behave like driver with cookies support
    #reset!
      should set and clean cookies
  it should behave like driver with infinite redirect detection
    should follow 5 redirects
    should not follow more than 5 redirects

Capybara::Session
  with terminus driver
    it should behave like session
      should encode complex field names, like array[][value]
      #visit
        should fetch a response from the driver
      #body
        should return the unmodified page body
      #html
        should return the unmodified page body
      #source
        should return the unmodified page source
      #reset_session!
        removes cookies
        resets current host
        resets current path
        resets page body
      it should behave like all
        #all
          should find all elements using the given locator
          should return an empty array when nothing was found
          should accept an XPath instance
          with css selectors
            should find all elements using the given selector
            should find all elements when given a list of selectors
          with xpath selectors
            should find the first element using the given locator
          with css as default selector
            should find the first element using the given locator
          with visible filter
            should only find visible nodes
            should only find invisible nodes
          within a scope
            should find any element using the given locator
      it should behave like first
        #first
          should find the first element using the given locator
          should return nil when nothing was found
          should accept an XPath instance (FAILED - 1)
          with css selectors
            should find the first element using the given selector
          with xpath selectors
            should find the first element using the given locator
          with css as default selector
            should find the first element using the given locator
          with visible filter
            should only find visible nodes if true given
            should include invisible nodes if false given
          with prefer visible elements
            should find invisible elements if no visible element exists
            should prefer visible elements over invisible elements
            should return the first invisible element if no visible elements exist
            find visible links normally
          without prefer visible elements
            should find invisible elements if no visible element exists
            should not prefer visible elements over invisible elements
          within a scope
            should find the first element using the given locator
      it should behave like attach_file
        #attach_file
          with normal form
            should set a file path by id (FAILED - 2)
            should set a file path by label (FAILED - 3)
          with multipart form
            should set a file path by id (FAILED - 4)
            should set a file path by label (FAILED - 5)
            should not break if no file is submitted (FAILED - 6)
            should send content type text/plain when uploading a text file (FAILED - 7)
            should send content type image/jpeg when uploading an image (FAILED - 8)
            should not break when using HTML5 multiple file input (FAILED - 9)
          with a locator that doesn't exist
            should raise an error
          with a path that doesn't exist
            should raise an error
      it should behave like check
        #check
          should check a checkbox by id
          should check a checkbox by label
          'checked' attribute
            should be true if checked
            should be false if unchecked
          checking
            should not change an already checked checkbox
            should check an unchecked checkbox
          unchecking
            should not change an already unchecked checkbox
            should uncheck a checked checkbox
          with a locator that doesn't exist
            should raise an error
      it should behave like choose
        #choose
          should choose a radio button by id
          should choose a radio button by label
          with a locator that doesn't exist
            should raise an error
      it should behave like click_link_or_button
        #click
          should click on a link
          should click on a button
          should click on a button with no type attribute
          should be aliased as click_on
          with a locator that doesn't exist
            should raise an error
      it should behave like click_button
        #click_button
          should serialize and send valueless buttons that were clicked
          should not send image buttons that were not clicked
          should serialize and send GET forms
          should follow redirects
          should post pack to the same URL when no action given
          should post pack to the same URL when blank action given
          with multiple values with the same name
            should use the latest given value
          with a form that has a relative url as an action
            should post to the correct url
          with a form that has no action specified
            should post to the correct url
          with value given on a submit button
            on a form with HTML5 fields
              should serialise and submit search fields
              should serialise and submit email fields
              should serialise and submit url fields
              should serialise and submit tel fields
              should serialise and submit color fields
            on an HTML4 form
              should serialize and submit text fields
              should escape fields when submitting
              should serialize and submit password fields
              should serialize and submit hidden fields
              should not serialize fields from other forms
              should submit the button that was clicked, but not other buttons
              should serialize radio buttons
              should serialize check boxes
              should serialize text areas
              should serialize select tag with values
              should serialize select tag without values
              should serialize first option for select tag with no selection
              should not serialize a select tag without options
              should not submit disabled fields
          with id given on a submit button
            should submit the associated form
            should work with partial matches
          with title given on a submit button
            should submit the associated form
            should work with partial matches
          with alt given on an image button
            should submit the associated form
            should work with partial matches
          with value given on an image button
            should submit the associated form
            should work with partial matches
          with id given on an image button
            should submit the associated form
          with title given on an image button
            should submit the associated form
            should work with partial matches
          with text given on a button defined by <button> tag
            should submit the associated form
            should work with partial matches
            should prefer exact matches over partial matches (FAILED - 10)
          with id given on a button defined by <button> tag
            should submit the associated form
            should serialize and send GET forms
          with value given on a button defined by <button> tag
            should submit the associated form
            should work with partial matches
            should prefer exact matches over partial matches (FAILED - 11)
          with title given on a button defined by <button> tag
            should submit the associated form
            should work with partial matches
          with a locator that doesn't exist
            should raise an error
      it should behave like click_link
        #click_link
          should follow relative links
          should follow redirects
          should follow redirects
          should add query string to current URL with naked query string
          should do nothing on anchor links
          should do nothing on URL+anchor links for the same page
          should follow link on URL+anchor links for a different page
          raise an error with links with no href
          with id given
            should take user to the linked page
          with text given
            should take user to the linked page
            should accept partial matches
            should prefer exact matches over partial matches (FAILED - 12)
          with title given
            should take user to the linked page
            should accept partial matches
            should prefer exact matches over partial matches (FAILED - 13)
          with alternative text given to a contained image
            should take user to the linked page
            should take user to the linked page
            should prefer exact matches over partial matches (FAILED - 14)
          with a locator that doesn't exist
            should raise an error
      it should behave like fill_in
        #fill_in
          should fill in a text field by id
          should fill in a text field by name
          should fill in a text field by label without for (FAILED - 15)
          should fill in a url field by label without for
          should favour exact label matches over partial matches (FAILED - 16)
          should fill in a textarea by id
          should fill in a textarea by label
          should fill in a textarea by name
          should fill in a password field by id
          should fill in a field with a custom type
          should fill in a field without a type
          should fill in a text field respecting its maxlength attribute
          should fill in a password field by name
          should fill in a password field by label
          should fill in a password field by name
          should prefer exact matches over partial matches (FAILED - 17)
          should throw an exception if a hash containing 'with' is not provided
          with ignore_hidden_fields
            should not find a hidden field
          with a locator that doesn't exist
            should raise an error
      it should behave like find_button
        #find_button
          should find any field
          should raise error if the field doesn't exist
      it should behave like find_field
        #find_field
          should find any field
          should raise error if the field doesn't exist
          should be aliased as 'field_labeled' for webrat compatibility
      it should behave like find_link
        #find_link
          should find any field
          should raise error if the field doesn't exist
      it should behave like find_by_id
        #find_by_id
          should find any element by id
          should raise error if no element with id is found
      it should behave like find
        #find
          should find the first element using the given locator
          should find the first element using the given locator and options
          should raise ElementNotFound with specified fail message if nothing was found
          should raise ElementNotFound with a useful default message if nothing was found
          should accept an XPath instance and respect the order of paths (FAILED - 18)
          the returned node
            should act like a session object (FAILED - 19)
            should scope CSS selectors
            should have a reference to its parent if there is one
          with css selectors
            should find the first element using the given locator
          with id selectors
            should find the first element using the given locator
          with xpath selectors
            should find the first element using the given locator
          with custom selector
            should use the custom selector
          with custom selector with :for option
            should use the selector when it matches the :for option
          with custom selector with failure_message option
            should raise an error with the failure message if the element is not found
            should pass the selector as the second argument
          with css as default selector
            should find the first element using the given locator
          within a scope
            should find the first element using the given locator
      it should behave like has_content
        #has_content?
          should be true if the given content is on the page at least once (FAILED - 20)
          should be true if scoped to an element which has the content (FAILED - 21)
          should be false if scoped to an element which does not have the content (FAILED - 22)
          should ignore tags (FAILED - 23)
          should ignore extra whitespace and newlines (FAILED - 24)
          should be false if the given content is not on the page (FAILED - 25)
          should handle single quotes in the content (FAILED - 26)
          should handle double quotes in the content (FAILED - 27)
          should handle mixed single and double quotes in the content (FAILED - 28)
        #has_no_content?
          should be false if the given content is on the page at least once (FAILED - 29)
          should be false if scoped to an element which has the content (FAILED - 30)
          should be true if scoped to an element which does not have the content (FAILED - 31)
          should ignore tags (FAILED - 32)
          should be true if the given content is not on the page (FAILED - 33)
          should handle single quotes in the content (FAILED - 34)
          should handle double quotes in the content (FAILED - 35)
          should handle mixed single and double quotes in the content (FAILED - 36)
      it should behave like has_css
        #has_css?
          should be true if the given selector is on the page
          should be false if the given selector is not on the page
          should respect scopes
          with between
            should be true if the content occurs within the range given
            should be false if the content occurs more or fewer times than range
            should be false if the content isn't on the page at all
          with count
            should be true if the content is on the page the given number of times
            should be false if the content occurs the given number of times
            should be false if the content isn't on the page at all
            should coerce count to an integer
          with maximum
            should be true when content occurs same or fewer times than given
            should be false when content occurs more times than given
            should be false if the content isn't on the page at all
            should coerce maximum to an integer
          with minimum
            should be true when content occurs same or more times than given
            should be false when content occurs fewer times than given
            should be false if the content isn't on the page at all
            should coerce minimum to an integer
          with text
            should discard all matches where the given string is not contained
            should discard all matches where the given regexp is not matched
        #has_no_css?
          should be false if the given selector is on the page
          should be true if the given selector is not on the page
          should respect scopes
          with between
            should be false if the content occurs within the range given
            should be true if the content occurs more or fewer times than range
            should be true if the content isn't on the page at all
          with count
            should be false if the content is on the page the given number of times
            should be true if the content is on the page the given number of times
            should be true if the content isn't on the page at all
            should coerce count to an integer
          with maximum
            should be false when content occurs same or fewer times than given
            should be true when content occurs more times than given
            should be true if the content isn't on the page at all
            should coerce maximum to an integer
          with minimum
            should be false when content occurs more times than given
            should be true when content occurs fewer times than given
            should be true if the content isn't on the page at all
            should coerce minimum to an integer
          with text
            should discard all matches where the given string is not contained
            should discard all matches where the given regexp is not matched
      it should behave like has_css
        #has_css?
          should be true if the given selector is on the page
          should be false if the given selector is not on the page
          should respect scopes
          with between
            should be true if the content occurs within the range given
            should be false if the content occurs more or fewer times than range
            should be false if the content isn't on the page at all
          with count
            should be true if the content is on the page the given number of times
            should be false if the content occurs the given number of times
            should be false if the content isn't on the page at all
            should coerce count to an integer
          with maximum
            should be true when content occurs same or fewer times than given
            should be false when content occurs more times than given
            should be false if the content isn't on the page at all
            should coerce maximum to an integer
          with minimum
            should be true when content occurs same or more times than given
            should be false when content occurs fewer times than given
            should be false if the content isn't on the page at all
            should coerce minimum to an integer
          with text
            should discard all matches where the given string is not contained
            should discard all matches where the given regexp is not matched
        #has_no_css?
          should be false if the given selector is on the page
          should be true if the given selector is not on the page
          should respect scopes
          with between
            should be false if the content occurs within the range given
            should be true if the content occurs more or fewer times than range
            should be true if the content isn't on the page at all
          with count
            should be false if the content is on the page the given number of times
            should be true if the content is on the page the given number of times
            should be true if the content isn't on the page at all
            should coerce count to an integer
          with maximum
            should be false when content occurs same or fewer times than given
            should be true when content occurs more times than given
            should be true if the content isn't on the page at all
            should coerce maximum to an integer
          with minimum
            should be false when content occurs more times than given
            should be true when content occurs fewer times than given
            should be true if the content isn't on the page at all
            should coerce minimum to an integer
          with text
            should discard all matches where the given string is not contained
            should discard all matches where the given regexp is not matched
      it should behave like has_selector
        #has_selector?
          should be true if the given selector is on the page
          should be false if the given selector is not on the page
          should use default selector
          should respect scopes
          with count
            should be true if the content is on the page the given number of times
            should be false if the content is on the page the given number of times
            should be false if the content isn't on the page at all
          with text
            should discard all matches where the given string is not contained
            should discard all matches where the given regexp is not matched
        #has_no_selector?
          should be false if the given selector is on the page
          should be true if the given selector is not on the page
          should use default selector
          should respect scopes
          with count
            should be false if the content is on the page the given number of times
            should be true if the content is on the page the wrong number of times
            should be true if the content isn't on the page at all
          with text
            should discard all matches where the given string is contained
            should discard all matches where the given regexp is matched
      it should behave like has_xpath
        #has_xpath?
          should be true if the given selector is on the page
          should be false if the given selector is not on the page
          should use xpath even if default selector is CSS
          should respect scopes
          with count
            should be true if the content is on the page the given number of times
            should be false if the content is on the page the given number of times
            should be false if the content isn't on the page at all
          with text
            should discard all matches where the given string is not contained
            should discard all matches where the given regexp is not matched
        #has_no_xpath?
          should be false if the given selector is on the page
          should be true if the given selector is not on the page
          should use xpath even if default selector is CSS
          should respect scopes
          with count
            should be false if the content is on the page the given number of times
            should be true if the content is on the page the wrong number of times
            should be true if the content isn't on the page at all
          with text
            should discard all matches where the given string is contained
            should discard all matches where the given regexp is matched
      it should behave like has_link
        #has_link?
          should be true if the given link is on the page (FAILED - 37)
          should be false if the given link is not on the page (FAILED - 38)
        #has_no_link?
          should be false if the given link is on the page (FAILED - 39)
          should be true if the given link is not on the page (FAILED - 40)
      it should behave like has_button
        #has_button?
          should be true if the given button is on the page
          should be false if the given button is not on the page
        #has_no_button?
          should be true if the given button is on the page
          should be false if the given button is not on the page
      it should behave like has_field
        #has_field
          should be true if the field is on the page (FAILED - 41)
          should be false if the field is not on the page (FAILED - 42)
          with value
            should be true if a field with the given value is on the page (FAILED - 43)
            should be false if the given field is not on the page (FAILED - 44)
            should be true after the field has been filled in with the given value (FAILED - 45)
            should be false after the field has been filled in with a different value (FAILED - 46)
        #has_no_field
          should be false if the field is on the page (FAILED - 47)
          should be true if the field is not on the page (FAILED - 48)
          with value
            should be false if a field with the given value is on the page (FAILED - 49)
            should be true if the given field is not on the page (FAILED - 50)
            should be false after the field has been filled in with the given value (FAILED - 51)
            should be true after the field has been filled in with a different value (FAILED - 52)
        #has_checked_field?
          should be true if a checked field is on the page
          should be false if an unchecked field is on the page
          should be false if no field is on the page
          should be true after an unchecked checkbox is checked
          should be false after a checked checkbox is unchecked
          should be true after an unchecked radio button is chosen
          should be false after another radio button in the group is chosen
        #has_no_checked_field?
          should be false if a checked field is on the page
          should be true if an unchecked field is on the page
          should be true if no field is on the page
        #has_unchecked_field?
          should be false if a checked field is on the page
          should be true if an unchecked field is on the page
          should be false if no field is on the page
          should be false after an unchecked checkbox is checked
          should be true after a checked checkbox is unchecked
          should be false after an unchecked radio button is chosen
          should be true after another radio button in the group is chosen
        #has_no_unchecked_field?
          should be true if a checked field is on the page
          should be false if an unchecked field is on the page
          should be true if no field is on the page
      it should behave like has_select
        #has_select?
          should be true if the field is on the page (FAILED - 53)
          should be false if the field is not on the page (FAILED - 54)
          with selected value
            should be true if a field with the given value is on the page (FAILED - 55)
            should be false if the given field is not on the page (FAILED - 56)
            should be true after the given value is selected (FAILED - 57)
            should be false after a different value is selected (FAILED - 58)
            should be true after the given values are selected (FAILED - 59)
            should be false after one of the values is unselected (FAILED - 60)
          with options
            should be true if a field with the given options is on the page (FAILED - 61)
            should be false if the given field is not on the page (FAILED - 62)
        #has_no_select?
          should be false if the field is on the page (FAILED - 63)
          should be true if the field is not on the page (FAILED - 64)
          with selected value
            should be false if a field with the given value is on the page (FAILED - 65)
            should be true if the given field is not on the page (FAILED - 66)
            should be false after the given value is selected (FAILED - 67)
            should be true after a different value is selected (FAILED - 68)
            should be false after the given values are selected (FAILED - 69)
            should be true after one of the values is unselected (FAILED - 70)
          with options
            should be false if a field with the given options is on the page (FAILED - 71)
            should be true if the given field is not on the page (FAILED - 72)
      it should behave like has_table
        #has_table?
          should be true if the field is on the page (FAILED - 73)
          should be false if the field is not on the page (FAILED - 74)
          with rows
            should be true if a table with the given rows is on the page (FAILED - 75)
            should be true if the given rows are incomplete (FAILED - 76)
            should be false if the given table is not on the page (FAILED - 77)
            should be false if the given rows contain incorrect elements (FAILED - 78)
            should be false if the given rows are incorrectly ordered (FAILED - 79)
            should be false if the only some of the given rows are correct (FAILED - 80)
            should be false if the given rows are out of order (FAILED - 81)
        #has_no_table?
          should be false if the field is on the page (FAILED - 82)
          should be true if the field is not on the page (FAILED - 83)
          with rows
            should be false if a table with the given rows is on the page (FAILED - 84)
            should be false if the given rows are incomplete (FAILED - 85)
            should be true if the given table is not on the page (FAILED - 86)
            should be true if the given rows contain incorrect elements (FAILED - 87)
            should be true if the given rows are incorrectly ordered (FAILED - 88)
            should be true if the only some of the given rows are correct (FAILED - 89)
            should be true if the given rows are out of order (FAILED - 90)
      it should behave like select
        #select
          should return value of the first option
          should return value of the selected option
          should return the value attribute rather than content if present
          should select an option from a select box by id
          should select an option from a select box by label
          should select an option without giving a select box
          should favour exact matches to option labels
          should escape quotes
          should obey from
          show match labels with preceding or trailing whitespace
          with a locator that doesn't exist
            should raise an error
          with an option that doesn't exist
            should raise an error
          with multiple select
            should return an empty value
            should return value of the selected options
            should select one option
            should select multiple options
            should remain selected if already selected
            should return value attribute rather than content if present
      it should behave like text
        #text
          should print the text of the page
          with css as default selector
            should print the text of the page
      it should behave like uncheck
        #uncheck
          should uncheck a checkbox by id
          should uncheck a checkbox by label
      it should behave like unselect
        #unselect
          with multiple select
            should unselect an option from a select box by id
            should unselect an option without a select box
            should unselect an option from a select box by label
            should favour exact matches to option labels
            should escape quotes
          with single select
            should raise an error
          with a locator that doesn't exist
            should raise an error
          with an option that doesn't exist
            should raise an error
      it should behave like within
        #within
          with CSS selector
            should click links in the given scope
            should assert content in the given scope (FAILED - 91)
            should accept additional options
          with XPath selector
            should click links in the given scope
          with the default selector
            should use XPath
          with Node rather than selector
            should click links in the given scope
          with the default selector set to CSS
            should use CSS
          with click_link
            should click links in the given scope
            should raise an error if the scope is not found on the page
            should restore the scope when an error is raised
            with nested scopes
              should respect the inner scope
              should respect the outer scope
          with forms
            should fill in a field and click a button
        #within_fieldset
          should restrict scope to a fieldset given by id
          should restrict scope to a fieldset given by legend
        #within_table
          should restrict scope to a fieldset given by id
          should restrict scope to a fieldset given by legend
      it should behave like current_url
        #current_url
          should return the current url
        #current_path
          should show the correct location
      it should behave like current_host
        #current_host
          is affected by visiting a page directly
          returns to the app host when visiting a relative url
          is affected by setting Capybara.app_host
          is unaffected by following a relative link
          is affected by following an absolute link
          is unaffected by posting through a relative form
          is affected by posting through an absolute form
          is affected by following a redirect
    it should behave like session with headers support
      #response_headers
        should return response headers
    it should behave like session with javascript support
      all JS specs
        Node#drag_to
          should drag and drop an object
        Node#reload
          without automatic reload
            should reload the current context of the node
            should reload a parent node
            should not automatically reload
          with automatic reload
            should reload the current context of the node automatically
            should reload a parent node automatically
            should reload a node automatically when using find
        #find
          should allow triggering of custom JS events
        #body
          should return the current state of the page
        #source
          should return the original, unmodified source of the page
        #evaluate_script
          should evaluate the given script and return whatever it produces
        #execute_script
          should execute the given script and return nothing
        #find
          should wait for asynchronous load
          with frozen time
            raises an error suggesting that Capybara is stuck in time
        #wait_until
          should wait for block to return true
          should raise Capybara::TimeoutError if block doesn't return true within timeout
          should accept custom timeout in seconds
          should default to Capybara.default_wait_time before timeout
        #click_link_or_button
          should wait for asynchronous load
        #click_link
          should wait for asynchronous load
        #click_button
          should wait for asynchronous load
        #fill_in
          should wait for asynchronous load
        #check
          should trigger associated events
        #has_xpath?
          should wait for content to appear
        #has_no_xpath?
          should wait for content to disappear
        #has_css?
          should wait for content to appear
        #has_no_xpath?
          should wait for content to disappear
        #has_content?
          should wait for content to appear (FAILED - 92)
        #has_no_content?
          should wait for content to disappear (FAILED - 93)
    it should behave like session with status code support
      #status_code
        should return response codes

Failures:

  1) Capybara::Session with terminus driver it should behave like session it should behave like first#first should accept an XPath instance
     Failure/Error: @session.first(@xpath).value.should == 'John Smith'
       expected: "John Smith"
            got: "John" (using ==)
     Shared Example Group: "first" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:87
     # ./vendor/capybara/1.1/lib/capybara/spec/session/first_spec.rb:19:in `block (3 levels) in <top (required)>'

  2) Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with normal form should set a file path by id
     Failure/Error: @session.attach_file "form_image", __FILE__
     Capybara::NotSupportedByDriverError:
       Capybara::NotSupportedByDriverError
     Shared Example Group: "attach_file" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:88
     # ./lib/terminus/node.rb:66:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `block in set'
     # ./vendor/capybara/1.1/lib/capybara/node/base.rb:46:in `wait_until'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/actions.rb:158:in `attach_file'
     # (eval):2:in `attach_file'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:12:in `block (4 levels) in <top (required)>'

  3) Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with normal form should set a file path by label
     Failure/Error: @session.attach_file "Image", __FILE__
     Capybara::NotSupportedByDriverError:
       Capybara::NotSupportedByDriverError
     Shared Example Group: "attach_file" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:88
     # ./lib/terminus/node.rb:66:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `block in set'
     # ./vendor/capybara/1.1/lib/capybara/node/base.rb:46:in `wait_until'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/actions.rb:158:in `attach_file'
     # (eval):2:in `attach_file'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:18:in `block (4 levels) in <top (required)>'

  4) Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should set a file path by id
     Failure/Error: @session.attach_file "form_document", @test_file_path
     Capybara::NotSupportedByDriverError:
       Capybara::NotSupportedByDriverError
     Shared Example Group: "attach_file" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:88
     # ./lib/terminus/node.rb:66:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `block in set'
     # ./vendor/capybara/1.1/lib/capybara/node/base.rb:46:in `wait_until'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/actions.rb:158:in `attach_file'
     # (eval):2:in `attach_file'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:26:in `block (4 levels) in <top (required)>'

  5) Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should set a file path by label
     Failure/Error: @session.attach_file "Document", @test_file_path
     Capybara::NotSupportedByDriverError:
       Capybara::NotSupportedByDriverError
     Shared Example Group: "attach_file" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:88
     # ./lib/terminus/node.rb:66:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `block in set'
     # ./vendor/capybara/1.1/lib/capybara/node/base.rb:46:in `wait_until'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/actions.rb:158:in `attach_file'
     # (eval):2:in `attach_file'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:32:in `block (4 levels) in <top (required)>'

  6) Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should not break if no file is submitted
     Failure/Error: @session.body.should include('No file uploaded')
       expected "<html><head>\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n  <title>NoMethodError at /upload_empty</title>\n\n  <script type=\"text/javascript\">\n  //<!--\n  function toggle(id) {\n    var pre  = document.getElementById(\"pre-\" + id);\n    var post = document.getElementById(\"post-\" + id);\n    var context = document.getElementById(\"context-\" + id);\n\n    if (pre.style.display == 'block') {\n      pre.style.display = 'none';\n      post.style.display = 'none';\n      context.style.background = \"none\";\n    } else {\n      pre.style.display = 'block';\n      post.style.display = 'block';\n      context.style.background = \"#fffed9\";\n    }\n  }\n\n  function toggleBacktrace(){\n    var bt = document.getElementById(\"backtrace\");\n    var toggler = document.getElementById(\"expando\");\n\n    if (bt.className == 'condensed') {\n      bt.className = 'expanded';\n      toggler.innerHTML = \"(condense)\";\n    } else {\n      bt.className = 'condensed';\n      toggler.innerHTML = \"(expand)\";\n    }\n  }\n  //-->\n  </script>\n\n<style type=\"text/css\" media=\"screen\">\n  *                   {margin: 0; padding: 0; border: 0; outline: 0;}\n  div.clear           {clear: both;}\n  body                {background: #EEEEEE; margin: 0; padding: 0;\n                       font-family: 'Lucida Grande', 'Lucida Sans Unicode',\n                       'Garuda';}\n  code                {font-family: 'Lucida Console', monospace;\n                       font-size: 12px;}\n  li                  {height: 18px;}\n  ul                  {list-style: none; margin: 0; padding: 0;}\n  ol:hover            {cursor: pointer;}\n  ol li               {white-space: pre;}\n  #explanation        {font-size: 12px; color: #666666;\n                       margin: 20px 0 0 100px;}\n/* WRAP */\n  #wrap               {width: 1000px; background: #FFFFFF; margin: 0 auto;\n                       padding: 30px 50px 20px 50px;\n                       border-left: 1px solid #DDDDDD;\n                       border-right: 1px solid #DDDDDD;}\n/* HEADER */\n  #header             {margin: 0 auto 25px auto;}\n  #header img         {float: left;}\n  #header #summary    {float: left; margin: 12px 0 0 20px; width:660px;\n                       font-family: 'Lucida Grande', 'Lucida Sans Unicode';}\n  h1                  {margin: 0; font-size: 36px; color: #981919;}\n  h2                  {margin: 0; font-size: 22px; color: #333333;}\n  #header ul          {margin: 0; font-size: 12px; color: #666666;}\n  #header ul li strong{color: #444444;}\n  #header ul li       {display: inline; padding: 0 10px;}\n  #header ul li.first {padding-left: 0;}\n  #header ul li.last  {border: 0; padding-right: 0;}\n/* BODY */\n  #backtrace,\n  #get,\n  #post,\n  #cookies,\n  #rack               {width: 980px; margin: 0 auto 10px auto;}\n  p#nav               {float: right; font-size: 14px;}\n/* BACKTRACE */\n  a#expando           {float: left; padding-left: 5px; color: #666666;\n                      font-size: 14px; text-decoration: none; cursor: pointer;}\n  a#expando:hover     {text-decoration: underline;}\n  h3                  {float: left; width: 100px; margin-bottom: 10px;\n                       color: #981919; font-size: 14px; font-weight: bold;}\n  #nav a              {color: #666666; text-decoration: none; padding: 0 5px;}\n  #backtrace li.frame-info {background: #f7f7f7; padding-left: 10px;\n                           font-size: 12px; color: #333333;}\n  #backtrace ul       {list-style-position: outside; border: 1px solid #E9E9E9;\n                       border-bottom: 0;}\n  #backtrace ol       {width: 920px; margin-left: 50px;\n                       font: 10px 'Lucida Console', monospace; color: #666666;}\n  #backtrace ol li    {border: 0; border-left: 1px solid #E9E9E9;\n                       padding: 2px 0;}\n  #backtrace ol code  {font-size: 10px; color: #555555; padding-left: 5px;}\n  #backtrace-ul li    {border-bottom: 1px solid #E9E9E9; height: auto;\n                       padding: 3px 0;}\n  #backtrace-ul .code {padding: 6px 0 4px 0;}\n  #backtrace.condensed .system,\n  #backtrace.condensed .framework {display:none;}\n/* REQUEST DATA */\n  p.no-data           {padding-top: 2px; font-size: 12px; color: #666666;}\n  table.req           {width: 980px; text-align: left; font-size: 12px;\n                       color: #666666; padding: 0; border-spacing: 0;\n                       border: 1px solid #EEEEEE; border-bottom: 0;\n                       border-left: 0;\n                       clear:both}\n  table.req tr th     {padding: 2px 10px; font-weight: bold;\n                       background: #F7F7F7; border-bottom: 1px solid #EEEEEE;\n                       border-left: 1px solid #EEEEEE;}\n  table.req tr td     {padding: 2px 20px 2px 10px;\n                       border-bottom: 1px solid #EEEEEE;\n                       border-left: 1px solid #EEEEEE;}\n/* HIDE PRE/POST CODE AT START */\n  .pre-context,\n  .post-context       {display: none;}\n\n  table td.code       {width:750px}\n  table td.code div   {width:750px;overflow:hidden}\n</style>\n</head>\n<body>\n  <div id=\"wrap\">\n    <div id=\"header\">\n      <img src=\"/__sinatra__/500.png\" alt=\"application error\" height=\"161\" width=\"313\">\n      <div id=\"summary\">\n        <h1><strong>NoMethodError</strong> at <strong>/upload_empty\n          </strong></h1>\n        <h2>undefined method `[]' for nil:NilClass</h2>\n        <ul>\n          <li class=\"first\"><strong>file:</strong> <code>\n            test_app.rb</code></li>\n          <li><strong>location:</strong> <code>block in &lt;class:TestApp&gt;\n            </code></li>\n          <li class=\"last\"><strong>line:\n            </strong> 110</li>\n        </ul>\n      </div>\n      <div class=\"clear\"></div>\n    </div>\n\n    <div id=\"backtrace\" class=\"condensed\">\n      <h3>BACKTRACE</h3>\n      <p><a href=\"#\" id=\"expando\" onclick=\"toggleBacktrace(); return false\">(expand)</a></p>\n      <p id=\"nav\"><strong>JUMP TO:</strong>\n         <a href=\"#get-info\">GET</a>\n         <a href=\"#post-info\">POST</a>\n         <a href=\"#cookie-info\">COOKIES</a>\n         <a href=\"#env-info\">ENV</a>\n      </p>\n      <div class=\"clear\"></div>\n\n      <ul id=\"backtrace-ul\">\n\n      \n      \n          \n\n            <li class=\"frame-info app\">\n              <code>/home/james/projects/terminus/vendor/capybara/1.1/lib/capybara/spec/test_app.rb</code> in\n                <code><strong>block in &lt;class:TestApp&gt;</strong></code>\n            </li>\n\n            <li class=\"code app\">\n              \n              <ol start=\"103\" class=\"pre-context\" id=\"pre-1\" onclick=\"toggle(1);\">\n                \n                <li class=\"pre-context-line\"><code>  end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  post '/form' do\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    '&lt;pre id=\"results\"&gt;' + params[:form].to_yaml + '&lt;/pre&gt;'\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  post '/upload_empty' do\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"110\" class=\"context\" id=\"1\" onclick=\"toggle(1);\">\n                <li class=\"context-line\" id=\"context-1\"><code>    if params[:form][:file].nil?</code></li>\n              </ol>\n\n              \n              <ol start=\"111\" class=\"post-context\" id=\"post-1\" onclick=\"toggle(1);\">\n                \n                <li class=\"post-context-line\"><code>      'Successfully ignored empty file field.'\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    else\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      'Something went wrong.'\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>  end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>  post '/upload' do\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"1258\" class=\"pre-context\" id=\"pre-2\" onclick=\"toggle(2);\">\n                \n                <li class=\"pre-context-line\"><code>        method_name             = \"\#{verb} \#{path}\"\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        unbound_method          = generate_method(method_name, &amp;block)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        pattern, keys           = compile path\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        conditions, @conditions = @conditions, []\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        [ pattern, keys, conditions, block.arity != 0 ?\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>            proc { |a,p| unbound_method.bind(a).call(*p) } :\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"1265\" class=\"context\" id=\"2\" onclick=\"toggle(2);\">\n                <li class=\"context-line\" id=\"context-2\"><code>            proc { |a,p| unbound_method.bind(a).call } ]</code></li>\n              </ol>\n\n              \n              <ol start=\"1266\" class=\"post-context\" id=\"post-2\" onclick=\"toggle(2);\">\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      def compile(path)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        keys = []\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        if path.respond_to? :to_str\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          pattern = path.to_str.gsub(/[^\\?\\%\\\\\\/\\:\\*\\w]/) { |c| encoded(c) }\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          pattern.gsub!(/((:\\w+)|\\*)/) do |match|\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>block in compile!</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"1258\" class=\"pre-context\" id=\"pre-3\" onclick=\"toggle(3);\">\n                \n                <li class=\"pre-context-line\"><code>        method_name             = \"\#{verb} \#{path}\"\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        unbound_method          = generate_method(method_name, &amp;block)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        pattern, keys           = compile path\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        conditions, @conditions = @conditions, []\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        [ pattern, keys, conditions, block.arity != 0 ?\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>            proc { |a,p| unbound_method.bind(a).call(*p) } :\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"1265\" class=\"context\" id=\"3\" onclick=\"toggle(3);\">\n                <li class=\"context-line\" id=\"context-3\"><code>            proc { |a,p| unbound_method.bind(a).call } ]</code></li>\n              </ol>\n\n              \n              <ol start=\"1266\" class=\"post-context\" id=\"post-3\" onclick=\"toggle(3);\">\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      def compile(path)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        keys = []\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        if path.respond_to? :to_str\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          pattern = path.to_str.gsub(/[^\\?\\%\\\\\\/\\:\\*\\w]/) { |c| encoded(c) }\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          pattern.gsub!(/((:\\w+)|\\*)/) do |match|\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>[]</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"828\" class=\"pre-context\" id=\"pre-4\" onclick=\"toggle(4);\">\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Run routes defined on the class and all superclasses.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def route!(base = settings, pass_block=nil)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      if routes = base.routes[@request.request_method]\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        routes.each do |pattern, keys, conditions, block|\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"835\" class=\"context\" id=\"4\" onclick=\"toggle(4);\">\n                <li class=\"context-line\" id=\"context-4\"><code>            route_eval { block[*args] }</code></li>\n              </ol>\n\n              \n              <ol start=\"836\" class=\"post-context\" id=\"post-4\" onclick=\"toggle(4);\">\n                \n                <li class=\"post-context-line\"><code>          end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      # Run routes defined in superclass.\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      if base.superclass.respond_to?(:routes)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        return route!(base.superclass, pass_block)\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>block (3 levels) in route!</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"828\" class=\"pre-context\" id=\"pre-5\" onclick=\"toggle(5);\">\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Run routes defined on the class and all superclasses.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def route!(base = settings, pass_block=nil)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      if routes = base.routes[@request.request_method]\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        routes.each do |pattern, keys, conditions, block|\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"835\" class=\"context\" id=\"5\" onclick=\"toggle(5);\">\n                <li class=\"context-line\" id=\"context-5\"><code>            route_eval { block[*args] }</code></li>\n              </ol>\n\n              \n              <ol start=\"836\" class=\"post-context\" id=\"post-5\" onclick=\"toggle(5);\">\n                \n                <li class=\"post-context-line\"><code>          end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      # Run routes defined in superclass.\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      if base.superclass.respond_to?(:routes)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        return route!(base.superclass, pass_block)\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>route_eval</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"844\" class=\"pre-context\" id=\"pre-6\" onclick=\"toggle(6);\">\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      route_eval(&amp;pass_block) if pass_block\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      route_missing\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Run a route block and throw :halt with the result.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def route_eval\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"851\" class=\"context\" id=\"6\" onclick=\"toggle(6);\">\n                <li class=\"context-line\" id=\"context-6\"><code>      throw :halt, yield</code></li>\n              </ol>\n\n              \n              <ol start=\"852\" class=\"post-context\" id=\"post-6\" onclick=\"toggle(6);\">\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    # If the current request matches pattern and conditions, fill params\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    # with keys and call the given block.\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    # Revert params afterwards.\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    #\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    # Returns pass block.\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>block (2 levels) in route!</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"828\" class=\"pre-context\" id=\"pre-7\" onclick=\"toggle(7);\">\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Run routes defined on the class and all superclasses.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def route!(base = settings, pass_block=nil)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      if routes = base.routes[@request.request_method]\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        routes.each do |pattern, keys, conditions, block|\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"835\" class=\"context\" id=\"7\" onclick=\"toggle(7);\">\n                <li class=\"context-line\" id=\"context-7\"><code>            route_eval { block[*args] }</code></li>\n              </ol>\n\n              \n              <ol start=\"836\" class=\"post-context\" id=\"post-7\" onclick=\"toggle(7);\">\n                \n                <li class=\"post-context-line\"><code>          end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      # Run routes defined in superclass.\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      if base.superclass.respond_to?(:routes)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        return route!(base.superclass, pass_block)\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>block in process_route</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"865\" class=\"pre-context\" id=\"pre-8\" onclick=\"toggle(8);\">\n                \n                <li class=\"pre-context-line\"><code>      if values.any?\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        original, @params = params, params.merge('splat' =&gt; [], 'captures' =&gt; values)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        keys.zip(values) { |k,v| Array === @params[k] ? @params[k] &lt;&lt; v : @params[k] = v if v }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      catch(:pass) do\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        conditions.each { |c| throw :pass if c.bind(self).call == false }\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"872\" class=\"context\" id=\"8\" onclick=\"toggle(8);\">\n                <li class=\"context-line\" id=\"context-8\"><code>        block ? block[self, values] : yield(self, values)</code></li>\n              </ol>\n\n              \n              <ol start=\"873\" class=\"post-context\" id=\"post-8\" onclick=\"toggle(8);\">\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    ensure\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      @params = original if original\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    # No matching route was found or all routes passed. The default\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    # implementation is to forward the request downstream when running\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>catch</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"863\" class=\"pre-context\" id=\"pre-9\" onclick=\"toggle(9);\">\n                \n                <li class=\"pre-context-line\"><code>      values += match.captures.to_a.map { |v| force_encoding URI.decode(v) if v }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      if values.any?\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        original, @params = params, params.merge('splat' =&gt; [], 'captures' =&gt; values)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        keys.zip(values) { |k,v| Array === @params[k] ? @params[k] &lt;&lt; v : @params[k] = v if v }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"870\" class=\"context\" id=\"9\" onclick=\"toggle(9);\">\n                <li class=\"context-line\" id=\"context-9\"><code>      catch(:pass) do</code></li>\n              </ol>\n\n              \n              <ol start=\"871\" class=\"post-context\" id=\"post-9\" onclick=\"toggle(9);\">\n                \n                <li class=\"post-context-line\"><code>        conditions.each { |c| throw :pass if c.bind(self).call == false }\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        block ? block[self, values] : yield(self, values)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    ensure\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      @params = original if original\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>process_route</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"863\" class=\"pre-context\" id=\"pre-10\" onclick=\"toggle(10);\">\n                \n                <li class=\"pre-context-line\"><code>      values += match.captures.to_a.map { |v| force_encoding URI.decode(v) if v }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      if values.any?\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        original, @params = params, params.merge('splat' =&gt; [], 'captures' =&gt; values)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        keys.zip(values) { |k,v| Array === @params[k] ? @params[k] &lt;&lt; v : @params[k] = v if v }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"870\" class=\"context\" id=\"10\" onclick=\"toggle(10);\">\n                <li class=\"context-line\" id=\"context-10\"><code>      catch(:pass) do</code></li>\n              </ol>\n\n              \n              <ol start=\"871\" class=\"post-context\" id=\"post-10\" onclick=\"toggle(10);\">\n                \n                <li class=\"post-context-line\"><code>        conditions.each { |c| throw :pass if c.bind(self).call == false }\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        block ? block[self, values] : yield(self, values)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    ensure\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      @params = original if original\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>block in route!</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"827\" class=\"pre-context\" id=\"pre-11\" onclick=\"toggle(11);\">\n                \n                <li class=\"pre-context-line\"><code>      base.filters[type].each { |args| process_route(*args) }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Run routes defined on the class and all superclasses.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def route!(base = settings, pass_block=nil)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      if routes = base.routes[@request.request_method]\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        routes.each do |pattern, keys, conditions, block|\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"834\" class=\"context\" id=\"11\" onclick=\"toggle(11);\">\n                <li class=\"context-line\" id=\"context-11\"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|</code></li>\n              </ol>\n\n              \n              <ol start=\"835\" class=\"post-context\" id=\"post-11\" onclick=\"toggle(11);\">\n                \n                <li class=\"post-context-line\"><code>            route_eval { block[*args] }\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      # Run routes defined in superclass.\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      if base.superclass.respond_to?(:routes)\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>each</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"826\" class=\"pre-context\" id=\"pre-12\" onclick=\"toggle(12);\">\n                \n                <li class=\"pre-context-line\"><code>      filter! type, base.superclass if base.superclass.respond_to?(:filters)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      base.filters[type].each { |args| process_route(*args) }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Run routes defined on the class and all superclasses.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def route!(base = settings, pass_block=nil)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      if routes = base.routes[@request.request_method]\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"833\" class=\"context\" id=\"12\" onclick=\"toggle(12);\">\n                <li class=\"context-line\" id=\"context-12\"><code>        routes.each do |pattern, keys, conditions, block|</code></li>\n              </ol>\n\n              \n              <ol start=\"834\" class=\"post-context\" id=\"post-12\" onclick=\"toggle(12);\">\n                \n                <li class=\"post-context-line\"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|\n</code></li>\n                \n                <li class=\"post-context-line\"><code>            route_eval { block[*args] }\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      # Run routes defined in superclass.\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>route!</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"826\" class=\"pre-context\" id=\"pre-13\" onclick=\"toggle(13);\">\n                \n                <li class=\"pre-context-line\"><code>      filter! type, base.superclass if base.superclass.respond_to?(:filters)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      base.filters[type].each { |args| process_route(*args) }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Run routes defined on the class and all superclasses.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def route!(base = settings, pass_block=nil)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      if routes = base.routes[@request.request_method]\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"833\" class=\"context\" id=\"13\" onclick=\"toggle(13);\">\n                <li class=\"context-line\" id=\"context-13\"><code>        routes.each do |pattern, keys, conditions, block|</code></li>\n              </ol>\n\n              \n              <ol start=\"834\" class=\"post-context\" id=\"post-13\" onclick=\"toggle(13);\">\n                \n                <li class=\"post-context-line\"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|\n</code></li>\n                \n                <li class=\"post-context-line\"><code>            route_eval { block[*args] }\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      # Run routes defined in superclass.\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>dispatch!</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"929\" class=\"pre-context\" id=\"pre-14\" onclick=\"toggle(14);\">\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Dispatch a request with error handling.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def dispatch!\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      static! if settings.static? &amp;&amp; (request.get? || request.head?)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      filter! :before\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"936\" class=\"context\" id=\"14\" onclick=\"toggle(14);\">\n                <li class=\"context-line\" id=\"context-14\"><code>      route!</code></li>\n              </ol>\n\n              \n              <ol start=\"937\" class=\"post-context\" id=\"post-14\" onclick=\"toggle(14);\">\n                \n                <li class=\"post-context-line\"><code>    rescue ::Exception =&gt; boom\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      handle_exception!(boom)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    ensure\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      filter! :after unless env['sinatra.static_file']\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    # Error handling during requests.\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>block in call!</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"762\" class=\"pre-context\" id=\"pre-15\" onclick=\"toggle(15);\">\n                \n                <li class=\"pre-context-line\"><code>      @request  = Request.new(env)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @response = Response.new\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @params   = indifferent_params(@request.params)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      template_cache.clear if settings.reload_templates\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      force_encoding(@params)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @response['Content-Type'] = nil\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"769\" class=\"context\" id=\"15\" onclick=\"toggle(15);\">\n                <li class=\"context-line\" id=\"context-15\"><code>      invoke { dispatch! }</code></li>\n              </ol>\n\n              \n              <ol start=\"770\" class=\"post-context\" id=\"post-15\" onclick=\"toggle(15);\">\n                \n                <li class=\"post-context-line\"><code>      invoke { error_block!(response.status) }\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      unless @response['Content-Type']\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        if Array === body and body[0].respond_to? :content_type\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          content_type body[0].content_type\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        else\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          content_type :html\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>block in invoke</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"914\" class=\"pre-context\" id=\"pre-16\" onclick=\"toggle(16);\">\n                \n                <li class=\"pre-context-line\"><code>    # Creates a Hash with indifferent access.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def indifferent_hash\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      Hash.new {|hash,key| hash[key.to_s] if Symbol === key }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Run the block with 'throw :halt' support and apply result to the response.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def invoke\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"921\" class=\"context\" id=\"16\" onclick=\"toggle(16);\">\n                <li class=\"context-line\" id=\"context-16\"><code>      res = catch(:halt) { yield }</code></li>\n              </ol>\n\n              \n              <ol start=\"922\" class=\"post-context\" id=\"post-16\" onclick=\"toggle(16);\">\n                \n                <li class=\"post-context-line\"><code>      res = [res] if Fixnum === res or String === res\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      if Array === res and Fixnum === res.first\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        status(res.shift)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        body(res.pop)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        headers(*res)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      elsif res.respond_to? :each\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        body res\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>catch</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"914\" class=\"pre-context\" id=\"pre-17\" onclick=\"toggle(17);\">\n                \n                <li class=\"pre-context-line\"><code>    # Creates a Hash with indifferent access.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def indifferent_hash\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      Hash.new {|hash,key| hash[key.to_s] if Symbol === key }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Run the block with 'throw :halt' support and apply result to the response.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def invoke\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"921\" class=\"context\" id=\"17\" onclick=\"toggle(17);\">\n                <li class=\"context-line\" id=\"context-17\"><code>      res = catch(:halt) { yield }</code></li>\n              </ol>\n\n              \n              <ol start=\"922\" class=\"post-context\" id=\"post-17\" onclick=\"toggle(17);\">\n                \n                <li class=\"post-context-line\"><code>      res = [res] if Fixnum === res or String === res\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      if Array === res and Fixnum === res.first\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        status(res.shift)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        body(res.pop)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        headers(*res)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      elsif res.respond_to? :each\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        body res\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>invoke</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"914\" class=\"pre-context\" id=\"pre-18\" onclick=\"toggle(18);\">\n                \n                <li class=\"pre-context-line\"><code>    # Creates a Hash with indifferent access.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def indifferent_hash\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      Hash.new {|hash,key| hash[key.to_s] if Symbol === key }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Run the block with 'throw :halt' support and apply result to the response.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def invoke\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"921\" class=\"context\" id=\"18\" onclick=\"toggle(18);\">\n                <li class=\"context-line\" id=\"context-18\"><code>      res = catch(:halt) { yield }</code></li>\n              </ol>\n\n              \n              <ol start=\"922\" class=\"post-context\" id=\"post-18\" onclick=\"toggle(18);\">\n                \n                <li class=\"post-context-line\"><code>      res = [res] if Fixnum === res or String === res\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      if Array === res and Fixnum === res.first\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        status(res.shift)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        body(res.pop)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        headers(*res)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      elsif res.respond_to? :each\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        body res\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>call!</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"762\" class=\"pre-context\" id=\"pre-19\" onclick=\"toggle(19);\">\n                \n                <li class=\"pre-context-line\"><code>      @request  = Request.new(env)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @response = Response.new\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @params   = indifferent_params(@request.params)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      template_cache.clear if settings.reload_templates\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      force_encoding(@params)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @response['Content-Type'] = nil\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"769\" class=\"context\" id=\"19\" onclick=\"toggle(19);\">\n                <li class=\"context-line\" id=\"context-19\"><code>      invoke { dispatch! }</code></li>\n              </ol>\n\n              \n              <ol start=\"770\" class=\"post-context\" id=\"post-19\" onclick=\"toggle(19);\">\n                \n                <li class=\"post-context-line\"><code>      invoke { error_block!(response.status) }\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      unless @response['Content-Type']\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        if Array === body and body[0].respond_to? :content_type\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          content_type body[0].content_type\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        else\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          content_type :html\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"748\" class=\"pre-context\" id=\"pre-20\" onclick=\"toggle(20);\">\n                \n                <li class=\"pre-context-line\"><code>      @app = app\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @template_cache = Tilt::Cache.new\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      yield self if block_given?\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Rack call interface.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def call(env)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"755\" class=\"context\" id=\"20\" onclick=\"toggle(20);\">\n                <li class=\"context-line\" id=\"context-20\"><code>      dup.call!(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"756\" class=\"post-context\" id=\"post-20\" onclick=\"toggle(20);\">\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    attr_accessor :env, :request, :response, :params\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    def call!(env) # :nodoc:\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      @env      = env\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      @request  = Request.new(env)\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info system\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code system\">\n              \n              <ol start=\"15\" class=\"pre-context\" id=\"pre-21\" onclick=\"toggle(21);\">\n                \n                <li class=\"pre-context-line\"><code>      default_options :xss_mode =&gt; :block\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def header\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        { 'X-XSS-Protection' =&gt; \"1; mode=\#{options[:xss_mode]}\" }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def call(env)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"22\" class=\"context\" id=\"21\" onclick=\"toggle(21);\">\n                <li class=\"context-line\" id=\"context-21\"><code>        status, headers, body = @app.call(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"23\" class=\"post-context\" id=\"post-21\" onclick=\"toggle(21);\">\n                \n                <li class=\"post-context-line\"><code>        [status, header.merge(headers), body]\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>  end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>end\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info system\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code system\">\n              \n              <ol start=\"9\" class=\"pre-context\" id=\"pre-22\" onclick=\"toggle(22);\">\n                \n                <li class=\"pre-context-line\"><code>    #\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Unescapes '/' and '.', expands +path_info+.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Thus &lt;tt&gt;GET /foo/%2e%2e%2fbar&lt;/tt&gt; becomes &lt;tt&gt;GET /bar&lt;/tt&gt;.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    class PathTraversal &lt; Base\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def call(env)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        path_was         = env[\"PATH_INFO\"]\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        env[\"PATH_INFO\"] = cleanup path_was if path_was\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"16\" class=\"context\" id=\"22\" onclick=\"toggle(22);\">\n                <li class=\"context-line\" id=\"context-22\"><code>        app.call env</code></li>\n              </ol>\n\n              \n              <ol start=\"17\" class=\"post-context\" id=\"post-22\" onclick=\"toggle(22);\">\n                \n                <li class=\"post-context-line\"><code>      ensure\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        env[\"PATH_INFO\"] = path_was\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      def cleanup(path)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        parts     = []\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        unescaped = path.gsub('%2e', '.').gsub('%2f', '/')\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info system\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/json_csrf.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code system\">\n              \n              <ol start=\"10\" class=\"pre-context\" id=\"pre-23\" onclick=\"toggle(23);\">\n                \n                <li class=\"pre-context-line\"><code>    # JSON GET APIs are vulnerable to being embedded as JavaScript while the\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # Array prototype has been patched to track data. Checks the referrer\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    # even on GET requests if the content type is JSON.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    class JsonCsrf &lt; Base\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      default_reaction :deny\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def call(env)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"17\" class=\"context\" id=\"23\" onclick=\"toggle(23);\">\n                <li class=\"context-line\" id=\"context-23\"><code>        status, headers, body = app.call(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"18\" class=\"post-context\" id=\"post-23\" onclick=\"toggle(23);\">\n                \n                <li class=\"post-context-line\"><code>        if headers['Content-Type'].to_s.split(';', 2).first =~ /^\\s*application\\/json\\s*$/\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          if referrer(env) != Request.new(env).host\n</code></li>\n                \n                <li class=\"post-context-line\"><code>            result = react(env)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>            warn env, \"attack prevented by \#{self.class}\"\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        result or [status, headers, body]\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info system\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/base.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code system\">\n              \n              <ol start=\"40\" class=\"pre-context\" id=\"pre-24\" onclick=\"toggle(24);\">\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def call(env)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        unless accepts? env\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          warn env, \"attack prevented by \#{self.class}\"\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          result = react env\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        end\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"47\" class=\"context\" id=\"24\" onclick=\"toggle(24);\">\n                <li class=\"context-line\" id=\"context-24\"><code>        result or app.call(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"48\" class=\"post-context\" id=\"post-24\" onclick=\"toggle(24);\">\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      def react(env)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        result = send(options[:reaction], env)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        result if Array === result and result.size == 3\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info system\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code system\">\n              \n              <ol start=\"15\" class=\"pre-context\" id=\"pre-25\" onclick=\"toggle(25);\">\n                \n                <li class=\"pre-context-line\"><code>      default_options :xss_mode =&gt; :block\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def header\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        { 'X-XSS-Protection' =&gt; \"1; mode=\#{options[:xss_mode]}\" }\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def call(env)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"22\" class=\"context\" id=\"25\" onclick=\"toggle(25);\">\n                <li class=\"context-line\" id=\"context-25\"><code>        status, headers, body = @app.call(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"23\" class=\"post-context\" id=\"post-25\" onclick=\"toggle(25);\">\n                \n                <li class=\"post-context-line\"><code>        [status, header.merge(headers), body]\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>  end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>end\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info system\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/nulllogger.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code system\">\n              \n              <ol start=\"2\" class=\"pre-context\" id=\"pre-26\" onclick=\"toggle(26);\">\n                \n                <li class=\"pre-context-line\"><code>  class NullLogger\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def initialize(app)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @app = app\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def call(env)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      env['rack.logger'] = self\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"9\" class=\"context\" id=\"26\" onclick=\"toggle(26);\">\n                <li class=\"context-line\" id=\"context-26\"><code>      @app.call(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"10\" class=\"post-context\" id=\"post-26\" onclick=\"toggle(26);\">\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    def info(progname = nil, &amp;block);  end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    def debug(progname = nil, &amp;block); end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    def warn(progname = nil, &amp;block);  end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    def error(progname = nil, &amp;block); end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    def fatal(progname = nil, &amp;block); end\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info system\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/head.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code system\">\n              \n              <ol start=\"2\" class=\"pre-context\" id=\"pre-27\" onclick=\"toggle(27);\">\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>class Head\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  def initialize(app)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    @app = app\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  def call(env)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"9\" class=\"context\" id=\"27\" onclick=\"toggle(27);\">\n                <li class=\"context-line\" id=\"context-27\"><code>    status, headers, body = @app.call(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"10\" class=\"post-context\" id=\"post-27\" onclick=\"toggle(27);\">\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    if env[\"REQUEST_METHOD\"] == \"HEAD\"\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      [status, headers, []]\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    else\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      [status, headers, body]\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>  end\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/showexceptions.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"14\" class=\"pre-context\" id=\"pre-28\" onclick=\"toggle(28);\">\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def initialize(app)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @app      = app\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @template = ERB.new(TEMPLATE)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def call(env)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"21\" class=\"context\" id=\"28\" onclick=\"toggle(28);\">\n                <li class=\"context-line\" id=\"context-28\"><code>      @app.call(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"22\" class=\"post-context\" id=\"post-28\" onclick=\"toggle(28);\">\n                \n                <li class=\"post-context-line\"><code>    rescue Exception =&gt; e\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      errors, env[\"rack.errors\"] = env[\"rack.errors\"], @@eats_errors\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      if respond_to?(:prefers_plain_text?) and prefers_plain_text?(env)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        content_type = \"text/plain\"\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        body = [dump_exception(e)]\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      else\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"92\" class=\"pre-context\" id=\"pre-29\" onclick=\"toggle(29);\">\n                \n                <li class=\"pre-context-line\"><code>  # Some Rack handlers (Thin, Rainbows!) implement an extended body object protocol, however,\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  # some middleware (namely Rack::Lint) will break it by not mirroring the methods in question.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  # This middleware will detect an extended body object and will make sure it reaches the\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  # handler directly. We do this here, so our middleware and middleware set up by the app will\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  # still be able to run.\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>  class ExtendedRack &lt; Struct.new(:app)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def call(env)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"99\" class=\"context\" id=\"29\" onclick=\"toggle(29);\">\n                <li class=\"context-line\" id=\"context-29\"><code>      result, callback = app.call(env), env['async.callback']</code></li>\n              </ol>\n\n              \n              <ol start=\"100\" class=\"post-context\" id=\"post-29\" onclick=\"toggle(29);\">\n                \n                <li class=\"post-context-line\"><code>      return result unless callback and async?(*result)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      after_response { callback.call result }\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      setup_close(env, *result)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      throw :async\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    private\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>block in call</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"1382\" class=\"pre-context\" id=\"pre-30\" onclick=\"toggle(30);\">\n                \n                <li class=\"pre-context-line\"><code>        setup_default_middleware builder\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        setup_middleware builder\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        builder.run new!(*args, &amp;bk)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        builder\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def call(env)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"1389\" class=\"context\" id=\"30\" onclick=\"toggle(30);\">\n                <li class=\"context-line\" id=\"context-30\"><code>        synchronize { prototype.call(env) }</code></li>\n              </ol>\n\n              \n              <ol start=\"1390\" class=\"post-context\" id=\"post-30\" onclick=\"toggle(30);\">\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    private\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      def setup_default_middleware(builder)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        builder.use ExtendedRack\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        builder.use ShowExceptions       if show_exceptions?\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        builder.use Rack::MethodOverride if method_override?\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>synchronize</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"1464\" class=\"pre-context\" id=\"pre-31\" onclick=\"toggle(31);\">\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @@mutex = Mutex.new\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def synchronize(&amp;block)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        if lock?\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          @@mutex.synchronize(&amp;block)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        else\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"1471\" class=\"context\" id=\"31\" onclick=\"toggle(31);\">\n                <li class=\"context-line\" id=\"context-31\"><code>          yield</code></li>\n              </ol>\n\n              \n              <ol start=\"1472\" class=\"post-context\" id=\"post-31\" onclick=\"toggle(31);\">\n                \n                <li class=\"post-context-line\"><code>        end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    public\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      CALLERS_TO_IGNORE = [ # :nodoc:\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        /\\/sinatra(\\/(base|main|showexceptions))?\\.rb$/, # all sinatra code\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        /lib\\/tilt.*\\.rb$/,                              # all tilt code\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info framework\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code framework\">\n              \n              <ol start=\"1382\" class=\"pre-context\" id=\"pre-32\" onclick=\"toggle(32);\">\n                \n                <li class=\"pre-context-line\"><code>        setup_default_middleware builder\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        setup_middleware builder\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        builder.run new!(*args, &amp;bk)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        builder\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def call(env)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"1389\" class=\"context\" id=\"32\" onclick=\"toggle(32);\">\n                <li class=\"context-line\" id=\"context-32\"><code>        synchronize { prototype.call(env) }</code></li>\n              </ol>\n\n              \n              <ol start=\"1390\" class=\"post-context\" id=\"post-32\" onclick=\"toggle(32);\">\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    private\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      def setup_default_middleware(builder)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        builder.use ExtendedRack\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        builder.use ShowExceptions       if show_exceptions?\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        builder.use Rack::MethodOverride if method_override?\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info app\">\n              <code>/home/james/projects/terminus/lib/terminus/proxy.rb</code> in\n                <code><strong>forward_request</strong></code>\n            </li>\n\n            <li class=\"code app\">\n              \n              <ol start=\"81\" class=\"pre-context\" id=\"pre-33\" onclick=\"toggle(33);\">\n                \n                <li class=\"pre-context-line\"><code>    def error_page(error)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      error_id = Terminus.save_error(error)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      [200, {'Content-Type' =&gt; 'text/html'}, [ERROR_PAGE.result(binding)]]\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    \n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def forward_request(env)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      env.delete('HTTP_REFERER') if Terminus.visited?(env['REQUEST_URI'])\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"88\" class=\"context\" id=\"33\" onclick=\"toggle(33);\">\n                <li class=\"context-line\" id=\"context-33\"><code>      @app.call(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"89\" class=\"post-context\" id=\"post-33\" onclick=\"toggle(33);\">\n                \n                <li class=\"post-context-line\"><code>    rescue =&gt; error\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      error_page(error)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    \n</code></li>\n                \n                <li class=\"post-context-line\"><code>    def detect_infinite_redirect(response)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      if REDIRECT_CODES.include?(response.first)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        @redirects += 1\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info app\">\n              <code>/home/james/projects/terminus/lib/terminus/proxy.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code app\">\n              \n              <ol start=\"44\" class=\"pre-context\" id=\"pre-34\" onclick=\"toggle(34);\">\n                \n                <li class=\"pre-context-line\"><code>      app = External.new(app) if Host === app\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @app = app\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @redirects = 0\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    \n</code></li>\n                \n                <li class=\"pre-context-line\"><code>    def call(env)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      add_cookies(env)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"51\" class=\"context\" id=\"34\" onclick=\"toggle(34);\">\n                <li class=\"context-line\" id=\"context-34\"><code>      response = forward_request(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"52\" class=\"post-context\" id=\"post-34\" onclick=\"toggle(34);\">\n                \n                <li class=\"post-context-line\"><code>      store_cookies(env, response)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      response = detect_infinite_redirect(response)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      rewrite_response(env, response)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    \n</code></li>\n                \n                <li class=\"post-context-line\"><code>  private\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    \n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info app\">\n              <code>/home/james/projects/terminus/vendor/capybara/1.1/lib/capybara/server.rb</code> in\n                <code><strong>call</strong></code>\n            </li>\n\n            <li class=\"code app\">\n              \n              <ol start=\"10\" class=\"pre-context\" id=\"pre-35\" onclick=\"toggle(35);\">\n                \n                <li class=\"pre-context-line\"><code>        @app = app\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      def call(env)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        if env[\"PATH_INFO\"] == \"/__identify__\"\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          [200, {}, [@app.object_id.to_s]]\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        else\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"17\" class=\"context\" id=\"35\" onclick=\"toggle(35);\">\n                <li class=\"context-line\" id=\"context-35\"><code>          @app.call(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"18\" class=\"post-context\" id=\"post-35\" onclick=\"toggle(35);\">\n                \n                <li class=\"post-context-line\"><code>        end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    class &lt;&lt; self\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      def ports\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        @ports ||= {}\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info system\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb</code> in\n                <code><strong>service</strong></code>\n            </li>\n\n            <li class=\"code system\">\n              \n              <ol start=\"52\" class=\"pre-context\" id=\"pre-36\" onclick=\"toggle(36);\">\n                \n                <li class=\"pre-context-line\"><code>        env[\"QUERY_STRING\"] ||= \"\"\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        unless env[\"PATH_INFO\"] == \"\"\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          path, n = req.request_uri.path, env[\"SCRIPT_NAME\"].length\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          env[\"PATH_INFO\"] = path[n, path.length-n]\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>        env[\"REQUEST_PATH\"] ||= [env[\"SCRIPT_NAME\"], env[\"PATH_INFO\"]].join\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"59\" class=\"context\" id=\"36\" onclick=\"toggle(36);\">\n                <li class=\"context-line\" id=\"context-36\"><code>        status, headers, body = @app.call(env)</code></li>\n              </ol>\n\n              \n              <ol start=\"60\" class=\"post-context\" id=\"post-36\" onclick=\"toggle(36);\">\n                \n                <li class=\"post-context-line\"><code>        begin\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          res.status = status.to_i\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          headers.each { |k, vs|\n</code></li>\n                \n                <li class=\"post-context-line\"><code>            if k.downcase == \"set-cookie\"\n</code></li>\n                \n                <li class=\"post-context-line\"><code>              res.cookies.concat vs.split(\"\\n\")\n</code></li>\n                \n                <li class=\"post-context-line\"><code>            else\n</code></li>\n                \n                <li class=\"post-context-line\"><code>              # Since WEBrick won't accept repeated headers,\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info app\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/webrick/httpserver.rb</code> in\n                <code><strong>service</strong></code>\n            </li>\n\n            <li class=\"code app\">\n              \n              <ol start=\"131\" class=\"pre-context\" id=\"pre-37\" onclick=\"toggle(37);\">\n                \n                <li class=\"pre-context-line\"><code>\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      servlet, options, script_name, path_info = search_servlet(req.path)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      raise HTTPStatus::NotFound, \"`\#{req.path}' not found.\" unless servlet\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      req.script_name = script_name\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      req.path_info = path_info\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      si = servlet.get_instance(self, *options)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>      @logger.debug(format(\"%s is invoked.\", si.class.name))\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"138\" class=\"context\" id=\"37\" onclick=\"toggle(37);\">\n                <li class=\"context-line\" id=\"context-37\"><code>      si.service(req, res)</code></li>\n              </ol>\n\n              \n              <ol start=\"139\" class=\"post-context\" id=\"post-37\" onclick=\"toggle(37);\">\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    def do_OPTIONS(req, res)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>      res[\"allow\"] = \"GET,HEAD,POST,OPTIONS\"\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    end\n</code></li>\n                \n                <li class=\"post-context-line\"><code>\n</code></li>\n                \n                <li class=\"post-context-line\"><code>    ##\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info app\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/webrick/httpserver.rb</code> in\n                <code><strong>run</strong></code>\n            </li>\n\n            <li class=\"code app\">\n              \n              <ol start=\"87\" class=\"pre-context\" id=\"pre-38\" onclick=\"toggle(38);\">\n                \n                <li class=\"pre-context-line\"><code>          if callback = server[:RequestCallback]\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>            callback.call(req, res)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          elsif callback = server[:RequestHandler]\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>            msg = \":RequestHandler is deprecated, please use :RequestCallback\"\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>            @logger.warn(msg)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>            callback.call(req, res)\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          end\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"94\" class=\"context\" id=\"38\" onclick=\"toggle(38);\">\n                <li class=\"context-line\" id=\"context-38\"><code>          server.service(req, res)</code></li>\n              </ol>\n\n              \n              <ol start=\"95\" class=\"post-context\" id=\"post-38\" onclick=\"toggle(38);\">\n                \n                <li class=\"post-context-line\"><code>        rescue HTTPStatus::EOFError, HTTPStatus::RequestTimeout =&gt; ex\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          res.set_error(ex)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        rescue HTTPStatus::Error =&gt; ex\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          @logger.error(ex.message)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          res.set_error(ex)\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        rescue HTTPStatus::Status =&gt; ex\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          res.status = ex.code\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n          \n\n            <li class=\"frame-info app\">\n              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/webrick/server.rb</code> in\n                <code><strong>block in start_thread</strong></code>\n            </li>\n\n            <li class=\"code app\">\n              \n              <ol start=\"184\" class=\"pre-context\" id=\"pre-39\" onclick=\"toggle(39);\">\n                \n                <li class=\"pre-context-line\"><code>            addr = sock.peeraddr\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>            @logger.debug \"accept: \#{addr[3]}:\#{addr[1]}\"\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          rescue SocketError\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>            @logger.debug \"accept: &lt;address unknown&gt;\"\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>            raise\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          end\n</code></li>\n                \n                <li class=\"pre-context-line\"><code>          call_callback(:AcceptCallback, sock)\n</code></li>\n                \n              </ol>\n              \n\n              <ol start=\"191\" class=\"context\" id=\"39\" onclick=\"toggle(39);\">\n                <li class=\"context-line\" id=\"context-39\"><code>          block ? block.call(sock) : run(sock)</code></li>\n              </ol>\n\n              \n              <ol start=\"192\" class=\"post-context\" id=\"post-39\" onclick=\"toggle(39);\">\n                \n                <li class=\"post-context-line\"><code>        rescue Errno::ENOTCONN\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          @logger.debug \"Errno::ENOTCONN raised\"\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        rescue ServerError =&gt; ex\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          msg = \"\#{ex.class}: \#{ex.message}\\n\\t\#{ex.backtrace[0]}\"\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          @logger.error msg\n</code></li>\n                \n                <li class=\"post-context-line\"><code>        rescue Exception =&gt; ex\n</code></li>\n                \n                <li class=\"post-context-line\"><code>          @logger.error ex\n</code></li>\n                \n              </ol>\n              \n              <div class=\"clear\"></div>\n            </li>\n\n          \n\n        \n      \n\n      </ul>\n    </div> <!-- /BACKTRACE -->\n\n    <div id=\"get\">\n      <h3 id=\"get-info\">GET</h3>\n      \n        <p class=\"no-data\">No GET data.</p>\n      \n      <div class=\"clear\"></div>\n    </div> <!-- /GET -->\n\n    <div id=\"post\">\n      <h3 id=\"post-info\">POST</h3>\n      \n        <p class=\"no-data\">No POST data.</p>\n      \n      <div class=\"clear\"></div>\n    </div> <!-- /POST -->\n\n    <div id=\"cookies\">\n      <h3 id=\"cookie-info\">COOKIES</h3>\n      \n        <p class=\"no-data\">No cookie data.</p>\n      \n      <div class=\"clear\"></div>\n    </div> <!-- /COOKIES -->\n\n    <div id=\"rack\">\n      <h3 id=\"env-info\">Rack ENV</h3>\n      <table class=\"req\">\n        <tbody><tr>\n          <th>Variable</th>\n          <th>Value</th>\n        </tr>\n         \n         <tr>\n           <td>CONTENT_LENGTH</td>\n           <td class=\"code\"><div>194</div></td>\n         </tr>\n         \n         <tr>\n           <td>CONTENT_TYPE</td>\n           <td class=\"code\"><div>multipart/form-data; boundary=----WebKitFormBoundary5hwDUCdhMcafVRCo</div></td>\n         </tr>\n         \n         <tr>\n           <td>GATEWAY_INTERFACE</td>\n           <td class=\"code\"><div>CGI/1.1</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_ACCEPT</td>\n           <td class=\"code\"><div>text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_ACCEPT_CHARSET</td>\n           <td class=\"code\"><div>ISO-8859-1,utf-8;q=0.7,*;q=0.3</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_ACCEPT_ENCODING</td>\n           <td class=\"code\"><div>gzip,deflate,sdch</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_ACCEPT_LANGUAGE</td>\n           <td class=\"code\"><div>en-GB,en-US;q=0.8,en;q=0.6</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_CACHE_CONTROL</td>\n           <td class=\"code\"><div>max-age=0</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_CONNECTION</td>\n           <td class=\"code\"><div>keep-alive</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_HOST</td>\n           <td class=\"code\"><div>local.dev:33192</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_ORIGIN</td>\n           <td class=\"code\"><div>http://local.dev:33192</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_REFERER</td>\n           <td class=\"code\"><div>http://local.dev:33192/form</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_USER_AGENT</td>\n           <td class=\"code\"><div>Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11</div></td>\n         </tr>\n         \n         <tr>\n           <td>HTTP_VERSION</td>\n           <td class=\"code\"><div>HTTP/1.1</div></td>\n         </tr>\n         \n         <tr>\n           <td>PATH_INFO</td>\n           <td class=\"code\"><div>/upload_empty</div></td>\n         </tr>\n         \n         <tr>\n           <td>QUERY_STRING</td>\n           <td class=\"code\"><div></div></td>\n         </tr>\n         \n         <tr>\n           <td>REMOTE_ADDR</td>\n           <td class=\"code\"><div>127.0.0.1</div></td>\n         </tr>\n         \n         <tr>\n           <td>REMOTE_HOST</td>\n           <td class=\"code\"><div>localhost</div></td>\n         </tr>\n         \n         <tr>\n           <td>REQUEST_METHOD</td>\n           <td class=\"code\"><div>POST</div></td>\n         </tr>\n         \n         <tr>\n           <td>REQUEST_PATH</td>\n           <td class=\"code\"><div>/upload_empty</div></td>\n         </tr>\n         \n         <tr>\n           <td>REQUEST_URI</td>\n           <td class=\"code\"><div>http://local.dev:33192/upload_empty</div></td>\n         </tr>\n         \n         <tr>\n           <td>SCRIPT_NAME</td>\n           <td class=\"code\"><div></div></td>\n         </tr>\n         \n         <tr>\n           <td>SERVER_NAME</td>\n           <td class=\"code\"><div>local.dev</div></td>\n         </tr>\n         \n         <tr>\n           <td>SERVER_PORT</td>\n           <td class=\"code\"><div>33192</div></td>\n         </tr>\n         \n         <tr>\n           <td>SERVER_PROTOCOL</td>\n           <td class=\"code\"><div>HTTP/1.1</div></td>\n         </tr>\n         \n         <tr>\n           <td>SERVER_SOFTWARE</td>\n           <td class=\"code\"><div>WEBrick/1.3.1 (Ruby/1.9.3/2012-10-12)</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.errors</td>\n           <td class=\"code\"><div>#&lt;Object:0x00000001936718&gt;</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.input</td>\n           <td class=\"code\"><div>#&lt;StringIO:0x007f7ea00aa638&gt;</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.logger</td>\n           <td class=\"code\"><div>#&lt;Rack::NullLogger:0x00000001f6ea68 @app=#&lt;Rack::Protection::FrameOptions:0x00000001f6eb30 @app=#&lt;Rack::Protection::IPSpoofing:0x00000001f6eba8 @app=#&lt;Rack::Protection::JsonCsrf:0x00000001f6ec20 @app=#&lt;Rack::Protection::PathTraversal:0x00000001f6ec98 @app=#&lt;Rack::Protection::XSSHeader:0x00000001f6ed38 @app=#&lt;TestApp:0x00000002186eb8 @default_layout=:layout, @app=nil, @template_cache=#&lt;Tilt::Cache:0x00000002186e18 @cache={}&gt;&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :xss_mode=&gt;:block, :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :xss_mode=&gt;:block, :frame_options=&gt;:sameorigin, :except=&gt;[:session_hijacking, :remote_token]}&gt;&gt;</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.multiprocess</td>\n           <td class=\"code\"><div>false</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.multithread</td>\n           <td class=\"code\"><div>true</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.request.cookie_hash</td>\n           <td class=\"code\"><div>{}</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.request.form_hash</td>\n           <td class=\"code\"><div>{}</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.request.form_input</td>\n           <td class=\"code\"><div>#&lt;StringIO:0x007f7ea00aa638&gt;</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.request.query_hash</td>\n           <td class=\"code\"><div>{}</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.request.query_string</td>\n           <td class=\"code\"><div></div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.run_once</td>\n           <td class=\"code\"><div>false</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.url_scheme</td>\n           <td class=\"code\"><div>http</div></td>\n         </tr>\n         \n         <tr>\n           <td>rack.version</td>\n           <td class=\"code\"><div>[1, 1]</div></td>\n         </tr>\n         \n         <tr>\n           <td>sinatra.error</td>\n           <td class=\"code\"><div>#&lt;NoMethodError: undefined method `[]' for nil:NilClass&gt;</div></td>\n         </tr>\n         \n      </tbody></table>\n      <div class=\"clear\"></div>\n    </div> <!-- /RACK ENV -->\n\n    <p id=\"explanation\">You're seeing this error because you have\nenabled the <code>show_exceptions</code> setting.</p>\n  </div> <!-- /WRAP -->\n        \n        <script type=\"text/javascript\">\n          (function() {\n            var terminusScript = document.getElementById('terminus-data');\n            terminusScript.parentNode.removeChild(terminusScript);\n          })();\n        </script>\n        \n          <script type=\"text/javascript\" src=\"http://local.dev:7004/messaging/client.js\"></script>\n          <script type=\"text/javascript\" src=\"http://local.dev:7004/compiled/terminus-min.js\"></script>\n          <script type=\"text/javascript\">\n            setTimeout(function() {\n              Terminus.connect('local.dev', 7004);\n            }, 0);\n          </script>\n        \n  \n\n</body></html>" to include "No file uploaded"
       Diff:
       @@ -1,2 +1,3211 @@
       -No file uploaded
       +<html><head>
       +  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
       +  <title>NoMethodError at /upload_empty</title>
       +
       +  <script type="text/javascript">
       +  //<!--
       +  function toggle(id) {
       +    var pre  = document.getElementById("pre-" + id);
       +    var post = document.getElementById("post-" + id);
       +    var context = document.getElementById("context-" + id);
       +
       +    if (pre.style.display == 'block') {
       +      pre.style.display = 'none';
       +      post.style.display = 'none';
       +      context.style.background = "none";
       +    } else {
       +      pre.style.display = 'block';
       +      post.style.display = 'block';
       +      context.style.background = "#fffed9";
       +    }
       +  }
       +
       +  function toggleBacktrace(){
       +    var bt = document.getElementById("backtrace");
       +    var toggler = document.getElementById("expando");
       +
       +    if (bt.className == 'condensed') {
       +      bt.className = 'expanded';
       +      toggler.innerHTML = "(condense)";
       +    } else {
       +      bt.className = 'condensed';
       +      toggler.innerHTML = "(expand)";
       +    }
       +  }
       +  //-->
       +  </script>
       +
       +<style type="text/css" media="screen">
       +  *                   {margin: 0; padding: 0; border: 0; outline: 0;}
       +  div.clear           {clear: both;}
       +  body                {background: #EEEEEE; margin: 0; padding: 0;
       +                       font-family: 'Lucida Grande', 'Lucida Sans Unicode',
       +                       'Garuda';}
       +  code                {font-family: 'Lucida Console', monospace;
       +                       font-size: 12px;}
       +  li                  {height: 18px;}
       +  ul                  {list-style: none; margin: 0; padding: 0;}
       +  ol:hover            {cursor: pointer;}
       +  ol li               {white-space: pre;}
       +  #explanation        {font-size: 12px; color: #666666;
       +                       margin: 20px 0 0 100px;}
       +/* WRAP */
       +  #wrap               {width: 1000px; background: #FFFFFF; margin: 0 auto;
       +                       padding: 30px 50px 20px 50px;
       +                       border-left: 1px solid #DDDDDD;
       +                       border-right: 1px solid #DDDDDD;}
       +/* HEADER */
       +  #header             {margin: 0 auto 25px auto;}
       +  #header img         {float: left;}
       +  #header #summary    {float: left; margin: 12px 0 0 20px; width:660px;
       +                       font-family: 'Lucida Grande', 'Lucida Sans Unicode';}
       +  h1                  {margin: 0; font-size: 36px; color: #981919;}
       +  h2                  {margin: 0; font-size: 22px; color: #333333;}
       +  #header ul          {margin: 0; font-size: 12px; color: #666666;}
       +  #header ul li strong{color: #444444;}
       +  #header ul li       {display: inline; padding: 0 10px;}
       +  #header ul li.first {padding-left: 0;}
       +  #header ul li.last  {border: 0; padding-right: 0;}
       +/* BODY */
       +  #backtrace,
       +  #get,
       +  #post,
       +  #cookies,
       +  #rack               {width: 980px; margin: 0 auto 10px auto;}
       +  p#nav               {float: right; font-size: 14px;}
       +/* BACKTRACE */
       +  a#expando           {float: left; padding-left: 5px; color: #666666;
       +                      font-size: 14px; text-decoration: none; cursor: pointer;}
       +  a#expando:hover     {text-decoration: underline;}
       +  h3                  {float: left; width: 100px; margin-bottom: 10px;
       +                       color: #981919; font-size: 14px; font-weight: bold;}
       +  #nav a              {color: #666666; text-decoration: none; padding: 0 5px;}
       +  #backtrace li.frame-info {background: #f7f7f7; padding-left: 10px;
       +                           font-size: 12px; color: #333333;}
       +  #backtrace ul       {list-style-position: outside; border: 1px solid #E9E9E9;
       +                       border-bottom: 0;}
       +  #backtrace ol       {width: 920px; margin-left: 50px;
       +                       font: 10px 'Lucida Console', monospace; color: #666666;}
       +  #backtrace ol li    {border: 0; border-left: 1px solid #E9E9E9;
       +                       padding: 2px 0;}
       +  #backtrace ol code  {font-size: 10px; color: #555555; padding-left: 5px;}
       +  #backtrace-ul li    {border-bottom: 1px solid #E9E9E9; height: auto;
       +                       padding: 3px 0;}
       +  #backtrace-ul .code {padding: 6px 0 4px 0;}
       +  #backtrace.condensed .system,
       +  #backtrace.condensed .framework {display:none;}
       +/* REQUEST DATA */
       +  p.no-data           {padding-top: 2px; font-size: 12px; color: #666666;}
       +  table.req           {width: 980px; text-align: left; font-size: 12px;
       +                       color: #666666; padding: 0; border-spacing: 0;
       +                       border: 1px solid #EEEEEE; border-bottom: 0;
       +                       border-left: 0;
       +                       clear:both}
       +  table.req tr th     {padding: 2px 10px; font-weight: bold;
       +                       background: #F7F7F7; border-bottom: 1px solid #EEEEEE;
       +                       border-left: 1px solid #EEEEEE;}
       +  table.req tr td     {padding: 2px 20px 2px 10px;
       +                       border-bottom: 1px solid #EEEEEE;
       +                       border-left: 1px solid #EEEEEE;}
       +/* HIDE PRE/POST CODE AT START */
       +  .pre-context,
       +  .post-context       {display: none;}
       +
       +  table td.code       {width:750px}
       +  table td.code div   {width:750px;overflow:hidden}
       +</style>
       +</head>
       +<body>
       +  <div id="wrap">
       +    <div id="header">
       +      <img src="/__sinatra__/500.png" alt="application error" height="161" width="313">
       +      <div id="summary">
       +        <h1><strong>NoMethodError</strong> at <strong>/upload_empty
       +          </strong></h1>
       +        <h2>undefined method `[]' for nil:NilClass</h2>
       +        <ul>
       +          <li class="first"><strong>file:</strong> <code>
       +            test_app.rb</code></li>
       +          <li><strong>location:</strong> <code>block in &lt;class:TestApp&gt;
       +            </code></li>
       +          <li class="last"><strong>line:
       +            </strong> 110</li>
       +        </ul>
       +      </div>
       +      <div class="clear"></div>
       +    </div>
       +
       +    <div id="backtrace" class="condensed">
       +      <h3>BACKTRACE</h3>
       +      <p><a href="#" id="expando" onclick="toggleBacktrace(); return false">(expand)</a></p>
       +      <p id="nav"><strong>JUMP TO:</strong>
       +         <a href="#get-info">GET</a>
       +         <a href="#post-info">POST</a>
       +         <a href="#cookie-info">COOKIES</a>
       +         <a href="#env-info">ENV</a>
       +      </p>
       +      <div class="clear"></div>
       +
       +      <ul id="backtrace-ul">
       +
       +      
       +      
       +          
       +
       +            <li class="frame-info app">
       +              <code>/home/james/projects/terminus/vendor/capybara/1.1/lib/capybara/spec/test_app.rb</code> in
       +                <code><strong>block in &lt;class:TestApp&gt;</strong></code>
       +            </li>
       +
       +            <li class="code app">
       +              
       +              <ol start="103" class="pre-context" id="pre-1" onclick="toggle(1);">
       +                
       +                <li class="pre-context-line"><code>  end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  post '/form' do
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    '&lt;pre id="results"&gt;' + params[:form].to_yaml + '&lt;/pre&gt;'
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  post '/upload_empty' do
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="110" class="context" id="1" onclick="toggle(1);">
       +                <li class="context-line" id="context-1"><code>    if params[:form][:file].nil?</code></li>
       +              </ol>
       +
       +              
       +              <ol start="111" class="post-context" id="post-1" onclick="toggle(1);">
       +                
       +                <li class="post-context-line"><code>      'Successfully ignored empty file field.'
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    else
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      'Something went wrong.'
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>  end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>  post '/upload' do
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="1258" class="pre-context" id="pre-2" onclick="toggle(2);">
       +                
       +                <li class="pre-context-line"><code>        method_name             = "#{verb} #{path}"
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        unbound_method          = generate_method(method_name, &amp;block)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        pattern, keys           = compile path
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        conditions, @conditions = @conditions, []
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        [ pattern, keys, conditions, block.arity != 0 ?
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>            proc { |a,p| unbound_method.bind(a).call(*p) } :
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="1265" class="context" id="2" onclick="toggle(2);">
       +                <li class="context-line" id="context-2"><code>            proc { |a,p| unbound_method.bind(a).call } ]</code></li>
       +              </ol>
       +
       +              
       +              <ol start="1266" class="post-context" id="post-2" onclick="toggle(2);">
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      def compile(path)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        keys = []
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        if path.respond_to? :to_str
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          pattern = path.to_str.gsub(/[^\?\%\\\/\:\*\w]/) { |c| encoded(c) }
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          pattern.gsub!(/((:\w+)|\*)/) do |match|
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>block in compile!</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="1258" class="pre-context" id="pre-3" onclick="toggle(3);">
       +                
       +                <li class="pre-context-line"><code>        method_name             = "#{verb} #{path}"
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        unbound_method          = generate_method(method_name, &amp;block)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        pattern, keys           = compile path
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        conditions, @conditions = @conditions, []
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        [ pattern, keys, conditions, block.arity != 0 ?
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>            proc { |a,p| unbound_method.bind(a).call(*p) } :
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="1265" class="context" id="3" onclick="toggle(3);">
       +                <li class="context-line" id="context-3"><code>            proc { |a,p| unbound_method.bind(a).call } ]</code></li>
       +              </ol>
       +
       +              
       +              <ol start="1266" class="post-context" id="post-3" onclick="toggle(3);">
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      def compile(path)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        keys = []
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        if path.respond_to? :to_str
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          pattern = path.to_str.gsub(/[^\?\%\\\/\:\*\w]/) { |c| encoded(c) }
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          pattern.gsub!(/((:\w+)|\*)/) do |match|
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>[]</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="828" class="pre-context" id="pre-4" onclick="toggle(4);">
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Run routes defined on the class and all superclasses.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def route!(base = settings, pass_block=nil)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      if routes = base.routes[@request.request_method]
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        routes.each do |pattern, keys, conditions, block|
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="835" class="context" id="4" onclick="toggle(4);">
       +                <li class="context-line" id="context-4"><code>            route_eval { block[*args] }</code></li>
       +              </ol>
       +
       +              
       +              <ol start="836" class="post-context" id="post-4" onclick="toggle(4);">
       +                
       +                <li class="post-context-line"><code>          end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      # Run routes defined in superclass.
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      if base.superclass.respond_to?(:routes)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        return route!(base.superclass, pass_block)
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>block (3 levels) in route!</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="828" class="pre-context" id="pre-5" onclick="toggle(5);">
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Run routes defined on the class and all superclasses.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def route!(base = settings, pass_block=nil)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      if routes = base.routes[@request.request_method]
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        routes.each do |pattern, keys, conditions, block|
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="835" class="context" id="5" onclick="toggle(5);">
       +                <li class="context-line" id="context-5"><code>            route_eval { block[*args] }</code></li>
       +              </ol>
       +
       +              
       +              <ol start="836" class="post-context" id="post-5" onclick="toggle(5);">
       +                
       +                <li class="post-context-line"><code>          end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      # Run routes defined in superclass.
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      if base.superclass.respond_to?(:routes)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        return route!(base.superclass, pass_block)
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>route_eval</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="844" class="pre-context" id="pre-6" onclick="toggle(6);">
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      route_eval(&amp;pass_block) if pass_block
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      route_missing
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Run a route block and throw :halt with the result.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def route_eval
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="851" class="context" id="6" onclick="toggle(6);">
       +                <li class="context-line" id="context-6"><code>      throw :halt, yield</code></li>
       +              </ol>
       +
       +              
       +              <ol start="852" class="post-context" id="post-6" onclick="toggle(6);">
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    # If the current request matches pattern and conditions, fill params
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    # with keys and call the given block.
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    # Revert params afterwards.
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    #
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    # Returns pass block.
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>block (2 levels) in route!</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="828" class="pre-context" id="pre-7" onclick="toggle(7);">
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Run routes defined on the class and all superclasses.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def route!(base = settings, pass_block=nil)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      if routes = base.routes[@request.request_method]
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        routes.each do |pattern, keys, conditions, block|
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="835" class="context" id="7" onclick="toggle(7);">
       +                <li class="context-line" id="context-7"><code>            route_eval { block[*args] }</code></li>
       +              </ol>
       +
       +              
       +              <ol start="836" class="post-context" id="post-7" onclick="toggle(7);">
       +                
       +                <li class="post-context-line"><code>          end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      # Run routes defined in superclass.
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      if base.superclass.respond_to?(:routes)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        return route!(base.superclass, pass_block)
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>block in process_route</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="865" class="pre-context" id="pre-8" onclick="toggle(8);">
       +                
       +                <li class="pre-context-line"><code>      if values.any?
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        original, @params = params, params.merge('splat' =&gt; [], 'captures' =&gt; values)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        keys.zip(values) { |k,v| Array === @params[k] ? @params[k] &lt;&lt; v : @params[k] = v if v }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      catch(:pass) do
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        conditions.each { |c| throw :pass if c.bind(self).call == false }
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="872" class="context" id="8" onclick="toggle(8);">
       +                <li class="context-line" id="context-8"><code>        block ? block[self, values] : yield(self, values)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="873" class="post-context" id="post-8" onclick="toggle(8);">
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    ensure
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      @params = original if original
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    # No matching route was found or all routes passed. The default
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    # implementation is to forward the request downstream when running
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>catch</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="863" class="pre-context" id="pre-9" onclick="toggle(9);">
       +                
       +                <li class="pre-context-line"><code>      values += match.captures.to_a.map { |v| force_encoding URI.decode(v) if v }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      if values.any?
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        original, @params = params, params.merge('splat' =&gt; [], 'captures' =&gt; values)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        keys.zip(values) { |k,v| Array === @params[k] ? @params[k] &lt;&lt; v : @params[k] = v if v }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="870" class="context" id="9" onclick="toggle(9);">
       +                <li class="context-line" id="context-9"><code>      catch(:pass) do</code></li>
       +              </ol>
       +
       +              
       +              <ol start="871" class="post-context" id="post-9" onclick="toggle(9);">
       +                
       +                <li class="post-context-line"><code>        conditions.each { |c| throw :pass if c.bind(self).call == false }
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        block ? block[self, values] : yield(self, values)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    ensure
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      @params = original if original
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>process_route</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="863" class="pre-context" id="pre-10" onclick="toggle(10);">
       +                
       +                <li class="pre-context-line"><code>      values += match.captures.to_a.map { |v| force_encoding URI.decode(v) if v }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      if values.any?
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        original, @params = params, params.merge('splat' =&gt; [], 'captures' =&gt; values)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        keys.zip(values) { |k,v| Array === @params[k] ? @params[k] &lt;&lt; v : @params[k] = v if v }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="870" class="context" id="10" onclick="toggle(10);">
       +                <li class="context-line" id="context-10"><code>      catch(:pass) do</code></li>
       +              </ol>
       +
       +              
       +              <ol start="871" class="post-context" id="post-10" onclick="toggle(10);">
       +                
       +                <li class="post-context-line"><code>        conditions.each { |c| throw :pass if c.bind(self).call == false }
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        block ? block[self, values] : yield(self, values)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    ensure
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      @params = original if original
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>block in route!</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="827" class="pre-context" id="pre-11" onclick="toggle(11);">
       +                
       +                <li class="pre-context-line"><code>      base.filters[type].each { |args| process_route(*args) }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Run routes defined on the class and all superclasses.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def route!(base = settings, pass_block=nil)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      if routes = base.routes[@request.request_method]
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        routes.each do |pattern, keys, conditions, block|
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="834" class="context" id="11" onclick="toggle(11);">
       +                <li class="context-line" id="context-11"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|</code></li>
       +              </ol>
       +
       +              
       +              <ol start="835" class="post-context" id="post-11" onclick="toggle(11);">
       +                
       +                <li class="post-context-line"><code>            route_eval { block[*args] }
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      # Run routes defined in superclass.
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      if base.superclass.respond_to?(:routes)
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>each</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="826" class="pre-context" id="pre-12" onclick="toggle(12);">
       +                
       +                <li class="pre-context-line"><code>      filter! type, base.superclass if base.superclass.respond_to?(:filters)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      base.filters[type].each { |args| process_route(*args) }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Run routes defined on the class and all superclasses.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def route!(base = settings, pass_block=nil)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      if routes = base.routes[@request.request_method]
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="833" class="context" id="12" onclick="toggle(12);">
       +                <li class="context-line" id="context-12"><code>        routes.each do |pattern, keys, conditions, block|</code></li>
       +              </ol>
       +
       +              
       +              <ol start="834" class="post-context" id="post-12" onclick="toggle(12);">
       +                
       +                <li class="post-context-line"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|
       +</code></li>
       +                
       +                <li class="post-context-line"><code>            route_eval { block[*args] }
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      # Run routes defined in superclass.
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>route!</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="826" class="pre-context" id="pre-13" onclick="toggle(13);">
       +                
       +                <li class="pre-context-line"><code>      filter! type, base.superclass if base.superclass.respond_to?(:filters)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      base.filters[type].each { |args| process_route(*args) }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Run routes defined on the class and all superclasses.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def route!(base = settings, pass_block=nil)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      if routes = base.routes[@request.request_method]
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="833" class="context" id="13" onclick="toggle(13);">
       +                <li class="context-line" id="context-13"><code>        routes.each do |pattern, keys, conditions, block|</code></li>
       +              </ol>
       +
       +              
       +              <ol start="834" class="post-context" id="post-13" onclick="toggle(13);">
       +                
       +                <li class="post-context-line"><code>          pass_block = process_route(pattern, keys, conditions) do |*args|
       +</code></li>
       +                
       +                <li class="post-context-line"><code>            route_eval { block[*args] }
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      # Run routes defined in superclass.
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>dispatch!</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="929" class="pre-context" id="pre-14" onclick="toggle(14);">
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Dispatch a request with error handling.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def dispatch!
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      static! if settings.static? &amp;&amp; (request.get? || request.head?)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      filter! :before
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="936" class="context" id="14" onclick="toggle(14);">
       +                <li class="context-line" id="context-14"><code>      route!</code></li>
       +              </ol>
       +
       +              
       +              <ol start="937" class="post-context" id="post-14" onclick="toggle(14);">
       +                
       +                <li class="post-context-line"><code>    rescue ::Exception =&gt; boom
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      handle_exception!(boom)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    ensure
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      filter! :after unless env['sinatra.static_file']
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    # Error handling during requests.
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>block in call!</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="762" class="pre-context" id="pre-15" onclick="toggle(15);">
       +                
       +                <li class="pre-context-line"><code>      @request  = Request.new(env)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @response = Response.new
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @params   = indifferent_params(@request.params)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      template_cache.clear if settings.reload_templates
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      force_encoding(@params)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @response['Content-Type'] = nil
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="769" class="context" id="15" onclick="toggle(15);">
       +                <li class="context-line" id="context-15"><code>      invoke { dispatch! }</code></li>
       +              </ol>
       +
       +              
       +              <ol start="770" class="post-context" id="post-15" onclick="toggle(15);">
       +                
       +                <li class="post-context-line"><code>      invoke { error_block!(response.status) }
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      unless @response['Content-Type']
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        if Array === body and body[0].respond_to? :content_type
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          content_type body[0].content_type
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        else
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          content_type :html
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>block in invoke</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="914" class="pre-context" id="pre-16" onclick="toggle(16);">
       +                
       +                <li class="pre-context-line"><code>    # Creates a Hash with indifferent access.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def indifferent_hash
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      Hash.new {|hash,key| hash[key.to_s] if Symbol === key }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Run the block with 'throw :halt' support and apply result to the response.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def invoke
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="921" class="context" id="16" onclick="toggle(16);">
       +                <li class="context-line" id="context-16"><code>      res = catch(:halt) { yield }</code></li>
       +              </ol>
       +
       +              
       +              <ol start="922" class="post-context" id="post-16" onclick="toggle(16);">
       +                
       +                <li class="post-context-line"><code>      res = [res] if Fixnum === res or String === res
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      if Array === res and Fixnum === res.first
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        status(res.shift)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        body(res.pop)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        headers(*res)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      elsif res.respond_to? :each
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        body res
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>catch</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="914" class="pre-context" id="pre-17" onclick="toggle(17);">
       +                
       +                <li class="pre-context-line"><code>    # Creates a Hash with indifferent access.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def indifferent_hash
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      Hash.new {|hash,key| hash[key.to_s] if Symbol === key }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Run the block with 'throw :halt' support and apply result to the response.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def invoke
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="921" class="context" id="17" onclick="toggle(17);">
       +                <li class="context-line" id="context-17"><code>      res = catch(:halt) { yield }</code></li>
       +              </ol>
       +
       +              
       +              <ol start="922" class="post-context" id="post-17" onclick="toggle(17);">
       +                
       +                <li class="post-context-line"><code>      res = [res] if Fixnum === res or String === res
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      if Array === res and Fixnum === res.first
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        status(res.shift)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        body(res.pop)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        headers(*res)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      elsif res.respond_to? :each
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        body res
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>invoke</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="914" class="pre-context" id="pre-18" onclick="toggle(18);">
       +                
       +                <li class="pre-context-line"><code>    # Creates a Hash with indifferent access.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def indifferent_hash
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      Hash.new {|hash,key| hash[key.to_s] if Symbol === key }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Run the block with 'throw :halt' support and apply result to the response.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def invoke
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="921" class="context" id="18" onclick="toggle(18);">
       +                <li class="context-line" id="context-18"><code>      res = catch(:halt) { yield }</code></li>
       +              </ol>
       +
       +              
       +              <ol start="922" class="post-context" id="post-18" onclick="toggle(18);">
       +                
       +                <li class="post-context-line"><code>      res = [res] if Fixnum === res or String === res
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      if Array === res and Fixnum === res.first
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        status(res.shift)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        body(res.pop)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        headers(*res)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      elsif res.respond_to? :each
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        body res
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>call!</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="762" class="pre-context" id="pre-19" onclick="toggle(19);">
       +                
       +                <li class="pre-context-line"><code>      @request  = Request.new(env)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @response = Response.new
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @params   = indifferent_params(@request.params)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      template_cache.clear if settings.reload_templates
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      force_encoding(@params)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @response['Content-Type'] = nil
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="769" class="context" id="19" onclick="toggle(19);">
       +                <li class="context-line" id="context-19"><code>      invoke { dispatch! }</code></li>
       +              </ol>
       +
       +              
       +              <ol start="770" class="post-context" id="post-19" onclick="toggle(19);">
       +                
       +                <li class="post-context-line"><code>      invoke { error_block!(response.status) }
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      unless @response['Content-Type']
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        if Array === body and body[0].respond_to? :content_type
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          content_type body[0].content_type
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        else
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          content_type :html
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="748" class="pre-context" id="pre-20" onclick="toggle(20);">
       +                
       +                <li class="pre-context-line"><code>      @app = app
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @template_cache = Tilt::Cache.new
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      yield self if block_given?
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Rack call interface.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def call(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="755" class="context" id="20" onclick="toggle(20);">
       +                <li class="context-line" id="context-20"><code>      dup.call!(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="756" class="post-context" id="post-20" onclick="toggle(20);">
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    attr_accessor :env, :request, :response, :params
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    def call!(env) # :nodoc:
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      @env      = env
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      @request  = Request.new(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info system">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code system">
       +              
       +              <ol start="15" class="pre-context" id="pre-21" onclick="toggle(21);">
       +                
       +                <li class="pre-context-line"><code>      default_options :xss_mode =&gt; :block
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def header
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        { 'X-XSS-Protection' =&gt; "1; mode=#{options[:xss_mode]}" }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def call(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="22" class="context" id="21" onclick="toggle(21);">
       +                <li class="context-line" id="context-21"><code>        status, headers, body = @app.call(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="23" class="post-context" id="post-21" onclick="toggle(21);">
       +                
       +                <li class="post-context-line"><code>        [status, header.merge(headers), body]
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>  end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>end
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info system">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code system">
       +              
       +              <ol start="9" class="pre-context" id="pre-22" onclick="toggle(22);">
       +                
       +                <li class="pre-context-line"><code>    #
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Unescapes '/' and '.', expands +path_info+.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Thus &lt;tt&gt;GET /foo/%2e%2e%2fbar&lt;/tt&gt; becomes &lt;tt&gt;GET /bar&lt;/tt&gt;.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    class PathTraversal &lt; Base
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def call(env)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        path_was         = env["PATH_INFO"]
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        env["PATH_INFO"] = cleanup path_was if path_was
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="16" class="context" id="22" onclick="toggle(22);">
       +                <li class="context-line" id="context-22"><code>        app.call env</code></li>
       +              </ol>
       +
       +              
       +              <ol start="17" class="post-context" id="post-22" onclick="toggle(22);">
       +                
       +                <li class="post-context-line"><code>      ensure
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        env["PATH_INFO"] = path_was
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      def cleanup(path)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        parts     = []
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        unescaped = path.gsub('%2e', '.').gsub('%2f', '/')
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info system">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/json_csrf.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code system">
       +              
       +              <ol start="10" class="pre-context" id="pre-23" onclick="toggle(23);">
       +                
       +                <li class="pre-context-line"><code>    # JSON GET APIs are vulnerable to being embedded as JavaScript while the
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # Array prototype has been patched to track data. Checks the referrer
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    # even on GET requests if the content type is JSON.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    class JsonCsrf &lt; Base
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      default_reaction :deny
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def call(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="17" class="context" id="23" onclick="toggle(23);">
       +                <li class="context-line" id="context-23"><code>        status, headers, body = app.call(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="18" class="post-context" id="post-23" onclick="toggle(23);">
       +                
       +                <li class="post-context-line"><code>        if headers['Content-Type'].to_s.split(';', 2).first =~ /^\s*application\/json\s*$/
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          if referrer(env) != Request.new(env).host
       +</code></li>
       +                
       +                <li class="post-context-line"><code>            result = react(env)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>            warn env, "attack prevented by #{self.class}"
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        result or [status, headers, body]
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info system">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/base.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code system">
       +              
       +              <ol start="40" class="pre-context" id="pre-24" onclick="toggle(24);">
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def call(env)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        unless accepts? env
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          warn env, "attack prevented by #{self.class}"
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          result = react env
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        end
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="47" class="context" id="24" onclick="toggle(24);">
       +                <li class="context-line" id="context-24"><code>        result or app.call(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="48" class="post-context" id="post-24" onclick="toggle(24);">
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      def react(env)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        result = send(options[:reaction], env)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        result if Array === result and result.size == 3
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info system">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code system">
       +              
       +              <ol start="15" class="pre-context" id="pre-25" onclick="toggle(25);">
       +                
       +                <li class="pre-context-line"><code>      default_options :xss_mode =&gt; :block
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def header
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        { 'X-XSS-Protection' =&gt; "1; mode=#{options[:xss_mode]}" }
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def call(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="22" class="context" id="25" onclick="toggle(25);">
       +                <li class="context-line" id="context-25"><code>        status, headers, body = @app.call(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="23" class="post-context" id="post-25" onclick="toggle(25);">
       +                
       +                <li class="post-context-line"><code>        [status, header.merge(headers), body]
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>  end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>end
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info system">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/nulllogger.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code system">
       +              
       +              <ol start="2" class="pre-context" id="pre-26" onclick="toggle(26);">
       +                
       +                <li class="pre-context-line"><code>  class NullLogger
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def initialize(app)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @app = app
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def call(env)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      env['rack.logger'] = self
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="9" class="context" id="26" onclick="toggle(26);">
       +                <li class="context-line" id="context-26"><code>      @app.call(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="10" class="post-context" id="post-26" onclick="toggle(26);">
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    def info(progname = nil, &amp;block);  end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    def debug(progname = nil, &amp;block); end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    def warn(progname = nil, &amp;block);  end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    def error(progname = nil, &amp;block); end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    def fatal(progname = nil, &amp;block); end
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info system">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/head.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code system">
       +              
       +              <ol start="2" class="pre-context" id="pre-27" onclick="toggle(27);">
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>class Head
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  def initialize(app)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    @app = app
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  def call(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="9" class="context" id="27" onclick="toggle(27);">
       +                <li class="context-line" id="context-27"><code>    status, headers, body = @app.call(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="10" class="post-context" id="post-27" onclick="toggle(27);">
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    if env["REQUEST_METHOD"] == "HEAD"
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      [status, headers, []]
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    else
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      [status, headers, body]
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>  end
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/showexceptions.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="14" class="pre-context" id="pre-28" onclick="toggle(28);">
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def initialize(app)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @app      = app
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @template = ERB.new(TEMPLATE)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def call(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="21" class="context" id="28" onclick="toggle(28);">
       +                <li class="context-line" id="context-28"><code>      @app.call(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="22" class="post-context" id="post-28" onclick="toggle(28);">
       +                
       +                <li class="post-context-line"><code>    rescue Exception =&gt; e
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      errors, env["rack.errors"] = env["rack.errors"], @@eats_errors
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      if respond_to?(:prefers_plain_text?) and prefers_plain_text?(env)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        content_type = "text/plain"
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        body = [dump_exception(e)]
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      else
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="92" class="pre-context" id="pre-29" onclick="toggle(29);">
       +                
       +                <li class="pre-context-line"><code>  # Some Rack handlers (Thin, Rainbows!) implement an extended body object protocol, however,
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  # some middleware (namely Rack::Lint) will break it by not mirroring the methods in question.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  # This middleware will detect an extended body object and will make sure it reaches the
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  # handler directly. We do this here, so our middleware and middleware set up by the app will
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  # still be able to run.
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>  class ExtendedRack &lt; Struct.new(:app)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def call(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="99" class="context" id="29" onclick="toggle(29);">
       +                <li class="context-line" id="context-29"><code>      result, callback = app.call(env), env['async.callback']</code></li>
       +              </ol>
       +
       +              
       +              <ol start="100" class="post-context" id="post-29" onclick="toggle(29);">
       +                
       +                <li class="post-context-line"><code>      return result unless callback and async?(*result)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      after_response { callback.call result }
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      setup_close(env, *result)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      throw :async
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    private
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>block in call</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="1382" class="pre-context" id="pre-30" onclick="toggle(30);">
       +                
       +                <li class="pre-context-line"><code>        setup_default_middleware builder
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        setup_middleware builder
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        builder.run new!(*args, &amp;bk)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        builder
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def call(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="1389" class="context" id="30" onclick="toggle(30);">
       +                <li class="context-line" id="context-30"><code>        synchronize { prototype.call(env) }</code></li>
       +              </ol>
       +
       +              
       +              <ol start="1390" class="post-context" id="post-30" onclick="toggle(30);">
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    private
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      def setup_default_middleware(builder)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        builder.use ExtendedRack
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        builder.use ShowExceptions       if show_exceptions?
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        builder.use Rack::MethodOverride if method_override?
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>synchronize</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="1464" class="pre-context" id="pre-31" onclick="toggle(31);">
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @@mutex = Mutex.new
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def synchronize(&amp;block)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        if lock?
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          @@mutex.synchronize(&amp;block)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        else
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="1471" class="context" id="31" onclick="toggle(31);">
       +                <li class="context-line" id="context-31"><code>          yield</code></li>
       +              </ol>
       +
       +              
       +              <ol start="1472" class="post-context" id="post-31" onclick="toggle(31);">
       +                
       +                <li class="post-context-line"><code>        end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    public
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      CALLERS_TO_IGNORE = [ # :nodoc:
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        /\/sinatra(\/(base|main|showexceptions))?\.rb$/, # all sinatra code
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        /lib\/tilt.*\.rb$/,                              # all tilt code
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info framework">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code framework">
       +              
       +              <ol start="1382" class="pre-context" id="pre-32" onclick="toggle(32);">
       +                
       +                <li class="pre-context-line"><code>        setup_default_middleware builder
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        setup_middleware builder
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        builder.run new!(*args, &amp;bk)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        builder
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def call(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="1389" class="context" id="32" onclick="toggle(32);">
       +                <li class="context-line" id="context-32"><code>        synchronize { prototype.call(env) }</code></li>
       +              </ol>
       +
       +              
       +              <ol start="1390" class="post-context" id="post-32" onclick="toggle(32);">
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    private
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      def setup_default_middleware(builder)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        builder.use ExtendedRack
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        builder.use ShowExceptions       if show_exceptions?
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        builder.use Rack::MethodOverride if method_override?
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info app">
       +              <code>/home/james/projects/terminus/lib/terminus/proxy.rb</code> in
       +                <code><strong>forward_request</strong></code>
       +            </li>
       +
       +            <li class="code app">
       +              
       +              <ol start="81" class="pre-context" id="pre-33" onclick="toggle(33);">
       +                
       +                <li class="pre-context-line"><code>    def error_page(error)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      error_id = Terminus.save_error(error)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      [200, {'Content-Type' =&gt; 'text/html'}, [ERROR_PAGE.result(binding)]]
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def forward_request(env)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      env.delete('HTTP_REFERER') if Terminus.visited?(env['REQUEST_URI'])
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="88" class="context" id="33" onclick="toggle(33);">
       +                <li class="context-line" id="context-33"><code>      @app.call(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="89" class="post-context" id="post-33" onclick="toggle(33);">
       +                
       +                <li class="post-context-line"><code>    rescue =&gt; error
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      error_page(error)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    def detect_infinite_redirect(response)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      if REDIRECT_CODES.include?(response.first)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        @redirects += 1
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info app">
       +              <code>/home/james/projects/terminus/lib/terminus/proxy.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code app">
       +              
       +              <ol start="44" class="pre-context" id="pre-34" onclick="toggle(34);">
       +                
       +                <li class="pre-context-line"><code>      app = External.new(app) if Host === app
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @app = app
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @redirects = 0
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>    def call(env)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      add_cookies(env)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="51" class="context" id="34" onclick="toggle(34);">
       +                <li class="context-line" id="context-34"><code>      response = forward_request(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="52" class="post-context" id="post-34" onclick="toggle(34);">
       +                
       +                <li class="post-context-line"><code>      store_cookies(env, response)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      response = detect_infinite_redirect(response)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      rewrite_response(env, response)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    
       +</code></li>
       +                
       +                <li class="post-context-line"><code>  private
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info app">
       +              <code>/home/james/projects/terminus/vendor/capybara/1.1/lib/capybara/server.rb</code> in
       +                <code><strong>call</strong></code>
       +            </li>
       +
       +            <li class="code app">
       +              
       +              <ol start="10" class="pre-context" id="pre-35" onclick="toggle(35);">
       +                
       +                <li class="pre-context-line"><code>        @app = app
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      def call(env)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        if env["PATH_INFO"] == "/__identify__"
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          [200, {}, [@app.object_id.to_s]]
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        else
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="17" class="context" id="35" onclick="toggle(35);">
       +                <li class="context-line" id="context-35"><code>          @app.call(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="18" class="post-context" id="post-35" onclick="toggle(35);">
       +                
       +                <li class="post-context-line"><code>        end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    class &lt;&lt; self
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      def ports
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        @ports ||= {}
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info system">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb</code> in
       +                <code><strong>service</strong></code>
       +            </li>
       +
       +            <li class="code system">
       +              
       +              <ol start="52" class="pre-context" id="pre-36" onclick="toggle(36);">
       +                
       +                <li class="pre-context-line"><code>        env["QUERY_STRING"] ||= ""
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        unless env["PATH_INFO"] == ""
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          path, n = req.request_uri.path, env["SCRIPT_NAME"].length
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          env["PATH_INFO"] = path[n, path.length-n]
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>        env["REQUEST_PATH"] ||= [env["SCRIPT_NAME"], env["PATH_INFO"]].join
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="59" class="context" id="36" onclick="toggle(36);">
       +                <li class="context-line" id="context-36"><code>        status, headers, body = @app.call(env)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="60" class="post-context" id="post-36" onclick="toggle(36);">
       +                
       +                <li class="post-context-line"><code>        begin
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          res.status = status.to_i
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          headers.each { |k, vs|
       +</code></li>
       +                
       +                <li class="post-context-line"><code>            if k.downcase == "set-cookie"
       +</code></li>
       +                
       +                <li class="post-context-line"><code>              res.cookies.concat vs.split("\n")
       +</code></li>
       +                
       +                <li class="post-context-line"><code>            else
       +</code></li>
       +                
       +                <li class="post-context-line"><code>              # Since WEBrick won't accept repeated headers,
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info app">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/webrick/httpserver.rb</code> in
       +                <code><strong>service</strong></code>
       +            </li>
       +
       +            <li class="code app">
       +              
       +              <ol start="131" class="pre-context" id="pre-37" onclick="toggle(37);">
       +                
       +                <li class="pre-context-line"><code>
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      servlet, options, script_name, path_info = search_servlet(req.path)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      raise HTTPStatus::NotFound, "`#{req.path}' not found." unless servlet
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      req.script_name = script_name
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      req.path_info = path_info
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      si = servlet.get_instance(self, *options)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>      @logger.debug(format("%s is invoked.", si.class.name))
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="138" class="context" id="37" onclick="toggle(37);">
       +                <li class="context-line" id="context-37"><code>      si.service(req, res)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="139" class="post-context" id="post-37" onclick="toggle(37);">
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    def do_OPTIONS(req, res)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>      res["allow"] = "GET,HEAD,POST,OPTIONS"
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    end
       +</code></li>
       +                
       +                <li class="post-context-line"><code>
       +</code></li>
       +                
       +                <li class="post-context-line"><code>    ##
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info app">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/webrick/httpserver.rb</code> in
       +                <code><strong>run</strong></code>
       +            </li>
       +
       +            <li class="code app">
       +              
       +              <ol start="87" class="pre-context" id="pre-38" onclick="toggle(38);">
       +                
       +                <li class="pre-context-line"><code>          if callback = server[:RequestCallback]
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>            callback.call(req, res)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          elsif callback = server[:RequestHandler]
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>            msg = ":RequestHandler is deprecated, please use :RequestCallback"
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>            @logger.warn(msg)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>            callback.call(req, res)
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          end
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="94" class="context" id="38" onclick="toggle(38);">
       +                <li class="context-line" id="context-38"><code>          server.service(req, res)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="95" class="post-context" id="post-38" onclick="toggle(38);">
       +                
       +                <li class="post-context-line"><code>        rescue HTTPStatus::EOFError, HTTPStatus::RequestTimeout =&gt; ex
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          res.set_error(ex)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        rescue HTTPStatus::Error =&gt; ex
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          @logger.error(ex.message)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          res.set_error(ex)
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        rescue HTTPStatus::Status =&gt; ex
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          res.status = ex.code
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +          
       +
       +            <li class="frame-info app">
       +              <code>/home/james/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/webrick/server.rb</code> in
       +                <code><strong>block in start_thread</strong></code>
       +            </li>
       +
       +            <li class="code app">
       +              
       +              <ol start="184" class="pre-context" id="pre-39" onclick="toggle(39);">
       +                
       +                <li class="pre-context-line"><code>            addr = sock.peeraddr
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>            @logger.debug "accept: #{addr[3]}:#{addr[1]}"
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          rescue SocketError
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>            @logger.debug "accept: &lt;address unknown&gt;"
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>            raise
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          end
       +</code></li>
       +                
       +                <li class="pre-context-line"><code>          call_callback(:AcceptCallback, sock)
       +</code></li>
       +                
       +              </ol>
       +              
       +
       +              <ol start="191" class="context" id="39" onclick="toggle(39);">
       +                <li class="context-line" id="context-39"><code>          block ? block.call(sock) : run(sock)</code></li>
       +              </ol>
       +
       +              
       +              <ol start="192" class="post-context" id="post-39" onclick="toggle(39);">
       +                
       +                <li class="post-context-line"><code>        rescue Errno::ENOTCONN
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          @logger.debug "Errno::ENOTCONN raised"
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        rescue ServerError =&gt; ex
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          msg = "#{ex.class}: #{ex.message}\n\t#{ex.backtrace[0]}"
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          @logger.error msg
       +</code></li>
       +                
       +                <li class="post-context-line"><code>        rescue Exception =&gt; ex
       +</code></li>
       +                
       +                <li class="post-context-line"><code>          @logger.error ex
       +</code></li>
       +                
       +              </ol>
       +              
       +              <div class="clear"></div>
       +            </li>
       +
       +          
       +
       +        
       +      
       +
       +      </ul>
       +    </div> <!-- /BACKTRACE -->
       +
       +    <div id="get">
       +      <h3 id="get-info">GET</h3>
       +      
       +        <p class="no-data">No GET data.</p>
       +      
       +      <div class="clear"></div>
       +    </div> <!-- /GET -->
       +
       +    <div id="post">
       +      <h3 id="post-info">POST</h3>
       +      
       +        <p class="no-data">No POST data.</p>
       +      
       +      <div class="clear"></div>
       +    </div> <!-- /POST -->
       +
       +    <div id="cookies">
       +      <h3 id="cookie-info">COOKIES</h3>
       +      
       +        <p class="no-data">No cookie data.</p>
       +      
       +      <div class="clear"></div>
       +    </div> <!-- /COOKIES -->
       +
       +    <div id="rack">
       +      <h3 id="env-info">Rack ENV</h3>
       +      <table class="req">
       +        <tbody><tr>
       +          <th>Variable</th>
       +          <th>Value</th>
       +        </tr>
       +         
       +         <tr>
       +           <td>CONTENT_LENGTH</td>
       +           <td class="code"><div>194</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>CONTENT_TYPE</td>
       +           <td class="code"><div>multipart/form-data; boundary=----WebKitFormBoundary5hwDUCdhMcafVRCo</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>GATEWAY_INTERFACE</td>
       +           <td class="code"><div>CGI/1.1</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_ACCEPT</td>
       +           <td class="code"><div>text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_ACCEPT_CHARSET</td>
       +           <td class="code"><div>ISO-8859-1,utf-8;q=0.7,*;q=0.3</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_ACCEPT_ENCODING</td>
       +           <td class="code"><div>gzip,deflate,sdch</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_ACCEPT_LANGUAGE</td>
       +           <td class="code"><div>en-GB,en-US;q=0.8,en;q=0.6</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_CACHE_CONTROL</td>
       +           <td class="code"><div>max-age=0</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_CONNECTION</td>
       +           <td class="code"><div>keep-alive</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_HOST</td>
       +           <td class="code"><div>local.dev:33192</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_ORIGIN</td>
       +           <td class="code"><div>http://local.dev:33192</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_REFERER</td>
       +           <td class="code"><div>http://local.dev:33192/form</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_USER_AGENT</td>
       +           <td class="code"><div>Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>HTTP_VERSION</td>
       +           <td class="code"><div>HTTP/1.1</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>PATH_INFO</td>
       +           <td class="code"><div>/upload_empty</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>QUERY_STRING</td>
       +           <td class="code"><div></div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>REMOTE_ADDR</td>
       +           <td class="code"><div>127.0.0.1</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>REMOTE_HOST</td>
       +           <td class="code"><div>localhost</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>REQUEST_METHOD</td>
       +           <td class="code"><div>POST</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>REQUEST_PATH</td>
       +           <td class="code"><div>/upload_empty</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>REQUEST_URI</td>
       +           <td class="code"><div>http://local.dev:33192/upload_empty</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>SCRIPT_NAME</td>
       +           <td class="code"><div></div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>SERVER_NAME</td>
       +           <td class="code"><div>local.dev</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>SERVER_PORT</td>
       +           <td class="code"><div>33192</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>SERVER_PROTOCOL</td>
       +           <td class="code"><div>HTTP/1.1</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>SERVER_SOFTWARE</td>
       +           <td class="code"><div>WEBrick/1.3.1 (Ruby/1.9.3/2012-10-12)</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.errors</td>
       +           <td class="code"><div>#&lt;Object:0x00000001936718&gt;</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.input</td>
       +           <td class="code"><div>#&lt;StringIO:0x007f7ea00aa638&gt;</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.logger</td>
       +           <td class="code"><div>#&lt;Rack::NullLogger:0x00000001f6ea68 @app=#&lt;Rack::Protection::FrameOptions:0x00000001f6eb30 @app=#&lt;Rack::Protection::IPSpoofing:0x00000001f6eba8 @app=#&lt;Rack::Protection::JsonCsrf:0x00000001f6ec20 @app=#&lt;Rack::Protection::PathTraversal:0x00000001f6ec98 @app=#&lt;Rack::Protection::XSSHeader:0x00000001f6ed38 @app=#&lt;TestApp:0x00000002186eb8 @default_layout=:layout, @app=nil, @template_cache=#&lt;Tilt::Cache:0x00000002186e18 @cache={}&gt;&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;"Forbidden", :encryptor=&gt;Digest::SHA1, :session_key=&gt;"rack.session", :status=&gt;403, :allow_empty_referrer=&gt;true, :xss_mode=&gt;:block, :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;"Forbidden", :encryptor=&gt;Digest::SHA1, :session_key=&gt;"rack.session", :status=&gt;403, :allow_empty_referrer=&gt;true, :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;"Forbidden", :encryptor=&gt;Digest::SHA1, :session_key=&gt;"rack.session", :status=&gt;403, :allow_empty_referrer=&gt;true, :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;"Forbidden", :encryptor=&gt;Digest::SHA1, :session_key=&gt;"rack.session", :status=&gt;403, :allow_empty_referrer=&gt;true, :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;"Forbidden", :encryptor=&gt;Digest::SHA1, :session_key=&gt;"rack.session", :status=&gt;403, :allow_empty_referrer=&gt;true, :xss_mode=&gt;:block, :frame_options=&gt;:sameorigin, :except=&gt;[:session_hijacking, :remote_token]}&gt;&gt;</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.multiprocess</td>
       +           <td class="code"><div>false</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.multithread</td>
       +           <td class="code"><div>true</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.request.cookie_hash</td>
       +           <td class="code"><div>{}</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.request.form_hash</td>
       +           <td class="code"><div>{}</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.request.form_input</td>
       +           <td class="code"><div>#&lt;StringIO:0x007f7ea00aa638&gt;</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.request.query_hash</td>
       +           <td class="code"><div>{}</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.request.query_string</td>
       +           <td class="code"><div></div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.run_once</td>
       +           <td class="code"><div>false</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.url_scheme</td>
       +           <td class="code"><div>http</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>rack.version</td>
       +           <td class="code"><div>[1, 1]</div></td>
       +         </tr>
       +         
       +         <tr>
       +           <td>sinatra.error</td>
       +           <td class="code"><div>#&lt;NoMethodError: undefined method `[]' for nil:NilClass&gt;</div></td>
       +         </tr>
       +         
       +      </tbody></table>
       +      <div class="clear"></div>
       +    </div> <!-- /RACK ENV -->
       +
       +    <p id="explanation">You're seeing this error because you have
       +enabled the <code>show_exceptions</code> setting.</p>
       +  </div> <!-- /WRAP -->
       +        
       +        <script type="text/javascript">
       +          (function() {
       +            var terminusScript = document.getElementById('terminus-data');
       +            terminusScript.parentNode.removeChild(terminusScript);
       +          })();
       +        </script>
       +        
       +          <script type="text/javascript" src="http://local.dev:7004/messaging/client.js"></script>
       +          <script type="text/javascript" src="http://local.dev:7004/compiled/terminus-min.js"></script>
       +          <script type="text/javascript">
       +            setTimeout(function() {
       +              Terminus.connect('local.dev', 7004);
       +            }, 0);
       +          </script>
       +        
       +  
       +
       +</body></html>
     Shared Example Group: "attach_file" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:88
     # ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:39:in `block (4 levels) in <top (required)>'

  7) Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should send content type text/plain when uploading a text file
     Failure/Error: @session.attach_file "Document", @test_file_path
     Capybara::NotSupportedByDriverError:
       Capybara::NotSupportedByDriverError
     Shared Example Group: "attach_file" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:88
     # ./lib/terminus/node.rb:66:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `block in set'
     # ./vendor/capybara/1.1/lib/capybara/node/base.rb:46:in `wait_until'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/actions.rb:158:in `attach_file'
     # (eval):2:in `attach_file'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:43:in `block (4 levels) in <top (required)>'

  8) Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should send content type image/jpeg when uploading an image
     Failure/Error: @session.attach_file "Document", @test_jpg_file_path
     Capybara::NotSupportedByDriverError:
       Capybara::NotSupportedByDriverError
     Shared Example Group: "attach_file" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:88
     # ./lib/terminus/node.rb:66:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `block in set'
     # ./vendor/capybara/1.1/lib/capybara/node/base.rb:46:in `wait_until'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/actions.rb:158:in `attach_file'
     # (eval):2:in `attach_file'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:49:in `block (4 levels) in <top (required)>'

  9) Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should not break when using HTML5 multiple file input
     Failure/Error: @session.attach_file "Multiple Documents", @test_file_path
     Capybara::NotSupportedByDriverError:
       Capybara::NotSupportedByDriverError
     Shared Example Group: "attach_file" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:88
     # ./lib/terminus/node.rb:66:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `block in set'
     # ./vendor/capybara/1.1/lib/capybara/node/base.rb:46:in `wait_until'
     # ./vendor/capybara/1.1/lib/capybara/node/element.rb:75:in `set'
     # ./vendor/capybara/1.1/lib/capybara/node/actions.rb:158:in `attach_file'
     # (eval):2:in `attach_file'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:55:in `block (4 levels) in <top (required)>'

  10) Capybara::Session with terminus driver it should behave like session it should behave like click_button#click_button with text given on a button defined by <button> tag should prefer exact matches over partial matches
     Failure/Error: extract_results(@session)['button'].should == 'button_second'
       expected: "button_second"
            got: "button_first" (using ==)
     Shared Example Group: "click_button" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:92
     # ./vendor/capybara/1.1/lib/capybara/spec/session/click_button_spec.rb:210:in `block (4 levels) in <top (required)>'

  11) Capybara::Session with terminus driver it should behave like session it should behave like click_button#click_button with value given on a button defined by <button> tag should prefer exact matches over partial matches
     Failure/Error: extract_results(@session)['button'].should == 'Just a button'
       expected: "Just a button"
            got: "Just a button that came first" (using ==)
     Shared Example Group: "click_button" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:92
     # ./vendor/capybara/1.1/lib/capybara/spec/session/click_button_spec.rb:242:in `block (4 levels) in <top (required)>'

  12) Capybara::Session with terminus driver it should behave like session it should behave like click_link#click_link with text given should prefer exact matches over partial matches
     Failure/Error: @session.body.should include('Bar')
       expected "<html><head></head><body>You landed        \n        <script type=\"text/javascript\">\n          (function() {\n            var terminusScript = document.getElementById('terminus-data');\n            terminusScript.parentNode.removeChild(terminusScript);\n          })();\n        </script>\n        \n          <script type=\"text/javascript\" src=\"http://local.dev:7004/messaging/client.js\"></script>\n          <script type=\"text/javascript\" src=\"http://local.dev:7004/compiled/terminus-min.js\"></script>\n          <script type=\"text/javascript\">\n            setTimeout(function() {\n              Terminus.connect('local.dev', 7004);\n            }, 0);\n          </script>\n        \n</body></html>" to include "Bar"
       Diff:
       @@ -1,2 +1,18 @@
       -Bar
       +<html><head></head><body>You landed        
       +        <script type="text/javascript">
       +          (function() {
       +            var terminusScript = document.getElementById('terminus-data');
       +            terminusScript.parentNode.removeChild(terminusScript);
       +          })();
       +        </script>
       +        
       +          <script type="text/javascript" src="http://local.dev:7004/messaging/client.js"></script>
       +          <script type="text/javascript" src="http://local.dev:7004/compiled/terminus-min.js"></script>
       +          <script type="text/javascript">
       +            setTimeout(function() {
       +              Terminus.connect('local.dev', 7004);
       +            }, 0);
       +          </script>
       +        
       +</body></html>
     Shared Example Group: "click_link" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:93
     # ./vendor/capybara/1.1/lib/capybara/spec/session/click_link_spec.rb:27:in `block (4 levels) in <top (required)>'

  13) Capybara::Session with terminus driver it should behave like session it should behave like click_link#click_link with title given should prefer exact matches over partial matches
     Failure/Error: @session.body.should include('Bar')
       expected "<html><head></head><body>You landed        \n        <script type=\"text/javascript\">\n          (function() {\n            var terminusScript = document.getElementById('terminus-data');\n            terminusScript.parentNode.removeChild(terminusScript);\n          })();\n        </script>\n        \n          <script type=\"text/javascript\" src=\"http://local.dev:7004/messaging/client.js\"></script>\n          <script type=\"text/javascript\" src=\"http://local.dev:7004/compiled/terminus-min.js\"></script>\n          <script type=\"text/javascript\">\n            setTimeout(function() {\n              Terminus.connect('local.dev', 7004);\n            }, 0);\n          </script>\n        \n</body></html>" to include "Bar"
       Diff:
       @@ -1,2 +1,18 @@
       -Bar
       +<html><head></head><body>You landed        
       +        <script type="text/javascript">
       +          (function() {
       +            var terminusScript = document.getElementById('terminus-data');
       +            terminusScript.parentNode.removeChild(terminusScript);
       +          })();
       +        </script>
       +        
       +          <script type="text/javascript" src="http://local.dev:7004/messaging/client.js"></script>
       +          <script type="text/javascript" src="http://local.dev:7004/compiled/terminus-min.js"></script>
       +          <script type="text/javascript">
       +            setTimeout(function() {
       +              Terminus.connect('local.dev', 7004);
       +            }, 0);
       +          </script>
       +        
       +</body></html>
     Shared Example Group: "click_link" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:93
     # ./vendor/capybara/1.1/lib/capybara/spec/session/click_link_spec.rb:44:in `block (4 levels) in <top (required)>'

  14) Capybara::Session with terminus driver it should behave like session it should behave like click_link#click_link with alternative text given to a contained image should prefer exact matches over partial matches
     Failure/Error: @session.body.should include('Bar')
       expected "<html><head></head><body>You landed        \n        <script type=\"text/javascript\">\n          (function() {\n            var terminusScript = document.getElementById('terminus-data');\n            terminusScript.parentNode.removeChild(terminusScript);\n          })();\n        </script>\n        \n          <script type=\"text/javascript\" src=\"http://local.dev:7004/messaging/client.js\"></script>\n          <script type=\"text/javascript\" src=\"http://local.dev:7004/compiled/terminus-min.js\"></script>\n          <script type=\"text/javascript\">\n            setTimeout(function() {\n              Terminus.connect('local.dev', 7004);\n            }, 0);\n          </script>\n        \n</body></html>" to include "Bar"
       Diff:
       @@ -1,2 +1,18 @@
       -Bar
       +<html><head></head><body>You landed        
       +        <script type="text/javascript">
       +          (function() {
       +            var terminusScript = document.getElementById('terminus-data');
       +            terminusScript.parentNode.removeChild(terminusScript);
       +          })();
       +        </script>
       +        
       +          <script type="text/javascript" src="http://local.dev:7004/messaging/client.js"></script>
       +          <script type="text/javascript" src="http://local.dev:7004/compiled/terminus-min.js"></script>
       +          <script type="text/javascript">
       +            setTimeout(function() {
       +              Terminus.connect('local.dev', 7004);
       +            }, 0);
       +          </script>
       +        
       +</body></html>
     Shared Example Group: "click_link" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:93
     # ./vendor/capybara/1.1/lib/capybara/spec/session/click_link_spec.rb:61:in `block (4 levels) in <top (required)>'

  15) Capybara::Session with terminus driver it should behave like session it should behave like fill_in#fill_in should fill in a text field by label without for
     Failure/Error: extract_results(@session)['street'].should == 'Avenue Q'
       expected: "Avenue Q"
            got: "Sesame street 66" (using ==)
     Shared Example Group: "fill_in" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:94
     # ./vendor/capybara/1.1/lib/capybara/spec/session/fill_in_spec.rb:22:in `block (3 levels) in <top (required)>'

  16) Capybara::Session with terminus driver it should behave like session it should behave like fill_in#fill_in should favour exact label matches over partial matches
     Failure/Error: extract_results(@session)['name'].should == 'Harry Jones'
       expected: "Harry Jones"
            got: "John Smith" (using ==)
     Shared Example Group: "fill_in" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:94
     # ./vendor/capybara/1.1/lib/capybara/spec/session/fill_in_spec.rb:34:in `block (3 levels) in <top (required)>'

  17) Capybara::Session with terminus driver it should behave like session it should behave like fill_in#fill_in should prefer exact matches over partial matches
     Failure/Error: extract_results(@session)['name'].should == 'Ford Prefect'
       expected: "Ford Prefect"
            got: "John Smith" (using ==)
     Shared Example Group: "fill_in" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:94
     # ./vendor/capybara/1.1/lib/capybara/spec/session/fill_in_spec.rb:100:in `block (3 levels) in <top (required)>'

  18) Capybara::Session with terminus driver it should behave like session it should behave like find#find should accept an XPath instance and respect the order of paths
     Failure/Error: @session.find(@xpath).value.should == 'John Smith'
       expected: "John Smith"
            got: "John" (using ==)
     Shared Example Group: "find" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:99
     # ./vendor/capybara/1.1/lib/capybara/spec/session/find_spec.rb:134:in `block (3 levels) in <top (required)>'

  19) Capybara::Session with terminus driver it should behave like session it should behave like find#find the returned node should act like a session object
     Failure/Error: @form.should have_field('Middle Name')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "find" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:99
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:266:in `has_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/find_spec.rb:25:in `block (4 levels) in <top (required)>'

  20) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should be true if the given content is on the page at least once
     Failure/Error: @session.should have_content('est')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:5:in `block (3 levels) in <top (required)>'

  21) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should be true if scoped to an element which has the content
     Failure/Error: @session.should have_content('labore')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:13:in `block (4 levels) in <top (required)>'
     # ./vendor/capybara/1.1/lib/capybara/session.rb:192:in `within'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:12:in `block (3 levels) in <top (required)>'

  22) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should be false if scoped to an element which does not have the content
     Failure/Error: @session.should_not have_content('monkey')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:20:in `block (4 levels) in <top (required)>'
     # ./vendor/capybara/1.1/lib/capybara/session.rb:192:in `within'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:19:in `block (3 levels) in <top (required)>'

  23) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should ignore tags
     Failure/Error: @session.should_not have_content('exercitation <a href="/foo" id="foo">ullamco</a> laboris')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:26:in `block (3 levels) in <top (required)>'

  24) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should ignore extra whitespace and newlines
     Failure/Error: @session.should have_content('text with whitespace')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:32:in `block (3 levels) in <top (required)>'

  25) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should be false if the given content is not on the page
     Failure/Error: @session.should_not have_content('xxxxyzzz')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:37:in `block (3 levels) in <top (required)>'

  26) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should handle single quotes in the content
     Failure/Error: @session.should have_content("can't")
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:43:in `block (3 levels) in <top (required)>'

  27) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should handle double quotes in the content
     Failure/Error: @session.should have_content(%q{"No," he said})
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:48:in `block (3 levels) in <top (required)>'

  28) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should handle mixed single and double quotes in the content
     Failure/Error: @session.should have_content(%q{"you can't do that."})
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:53:in `block (3 levels) in <top (required)>'

  29) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should be false if the given content is on the page at least once
     Failure/Error: @session.should_not have_no_content('est')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:196:in `has_no_content?'
     # (eval):2:in `has_no_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:60:in `block (3 levels) in <top (required)>'

  30) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should be false if scoped to an element which has the content
     Failure/Error: @session.should_not have_no_content('labore')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:196:in `has_no_content?'
     # (eval):2:in `has_no_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:68:in `block (4 levels) in <top (required)>'
     # ./vendor/capybara/1.1/lib/capybara/session.rb:192:in `within'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:67:in `block (3 levels) in <top (required)>'

  31) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should be true if scoped to an element which does not have the content
     Failure/Error: @session.should have_no_content('monkey')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:196:in `has_no_content?'
     # (eval):2:in `has_no_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:75:in `block (4 levels) in <top (required)>'
     # ./vendor/capybara/1.1/lib/capybara/session.rb:192:in `within'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:74:in `block (3 levels) in <top (required)>'

  32) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should ignore tags
     Failure/Error: @session.should have_no_content('exercitation <a href="/foo" id="foo">ullamco</a> laboris')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:196:in `has_no_content?'
     # (eval):2:in `has_no_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:81:in `block (3 levels) in <top (required)>'

  33) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should be true if the given content is not on the page
     Failure/Error: @session.should have_no_content('xxxxyzzz')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:196:in `has_no_content?'
     # (eval):2:in `has_no_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:87:in `block (3 levels) in <top (required)>'

  34) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should handle single quotes in the content
     Failure/Error: @session.should_not have_no_content("can't")
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:196:in `has_no_content?'
     # (eval):2:in `has_no_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:93:in `block (3 levels) in <top (required)>'

  35) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should handle double quotes in the content
     Failure/Error: @session.should_not have_no_content(%q{"No," he said})
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:196:in `has_no_content?'
     # (eval):2:in `has_no_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:98:in `block (3 levels) in <top (required)>'

  36) Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should handle mixed single and double quotes in the content
     Failure/Error: @session.should_not have_no_content(%q{"you can't do that."})
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "has_content" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:100
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:196:in `has_no_content?'
     # (eval):2:in `has_no_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:103:in `block (3 levels) in <top (required)>'

  37) Capybara::Session with terminus driver it should behave like session it should behave like has_link#has_link? should be true if the given link is on the page
     Failure/Error: @session.should have_link('foo')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_link" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:105
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:210:in `has_link?'
     # (eval):2:in `has_link?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_link_spec.rb:9:in `block (3 levels) in <top (required)>'

  38) Capybara::Session with terminus driver it should behave like session it should behave like has_link#has_link? should be false if the given link is not on the page
     Failure/Error: @session.should_not have_link('monkey')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_link" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:105
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:210:in `has_link?'
     # (eval):2:in `has_link?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_link_spec.rb:15:in `block (3 levels) in <top (required)>'

  39) Capybara::Session with terminus driver it should behave like session it should behave like has_link#has_no_link? should be false if the given link is on the page
     Failure/Error: @session.should_not have_no_link('foo')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_link" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:105
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:222:in `has_no_link?'
     # (eval):2:in `has_no_link?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_link_spec.rb:26:in `block (3 levels) in <top (required)>'

  40) Capybara::Session with terminus driver it should behave like session it should behave like has_link#has_no_link? should be true if the given link is not on the page
     Failure/Error: @session.should have_no_link('monkey')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_link" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:105
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:222:in `has_no_link?'
     # (eval):2:in `has_no_link?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_link_spec.rb:32:in `block (3 levels) in <top (required)>'

  41) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field should be true if the field is on the page
     Failure/Error: @session.should have_field('Dog')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:266:in `has_field?'
     # (eval):2:in `has_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:6:in `block (3 levels) in <top (required)>'

  42) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field should be false if the field is not on the page
     Failure/Error: @session.should_not have_field('Monkey')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:266:in `has_field?'
     # (eval):2:in `has_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:12:in `block (3 levels) in <top (required)>'

  43) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field with value should be true if a field with the given value is on the page
     Failure/Error: @session.should have_field('First Name', :with => 'John')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:266:in `has_field?'
     # (eval):2:in `has_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:17:in `block (4 levels) in <top (required)>'

  44) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field with value should be false if the given field is not on the page
     Failure/Error: @session.should_not have_field('First Name', :with => 'Peter')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:266:in `has_field?'
     # (eval):2:in `has_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:24:in `block (4 levels) in <top (required)>'

  45) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field with value should be true after the field has been filled in with the given value
     Failure/Error: @session.should have_field('First Name', :with => 'Jonas')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:266:in `has_field?'
     # (eval):2:in `has_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:31:in `block (4 levels) in <top (required)>'

  46) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field with value should be false after the field has been filled in with a different value
     Failure/Error: @session.should_not have_field('First Name', :with => 'John')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:266:in `has_field?'
     # (eval):2:in `has_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:36:in `block (4 levels) in <top (required)>'

  47) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field should be false if the field is on the page
     Failure/Error: @session.should_not have_no_field('Dog')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:280:in `has_no_field?'
     # (eval):2:in `has_no_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:45:in `block (3 levels) in <top (required)>'

  48) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field should be true if the field is not on the page
     Failure/Error: @session.should have_no_field('Monkey')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:280:in `has_no_field?'
     # (eval):2:in `has_no_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:51:in `block (3 levels) in <top (required)>'

  49) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field with value should be false if a field with the given value is on the page
     Failure/Error: @session.should_not have_no_field('First Name', :with => 'John')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:280:in `has_no_field?'
     # (eval):2:in `has_no_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:56:in `block (4 levels) in <top (required)>'

  50) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field with value should be true if the given field is not on the page
     Failure/Error: @session.should have_no_field('First Name', :with => 'Peter')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:280:in `has_no_field?'
     # (eval):2:in `has_no_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:63:in `block (4 levels) in <top (required)>'

  51) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field with value should be false after the field has been filled in with the given value
     Failure/Error: @session.should_not have_no_field('First Name', :with => 'Jonas')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:280:in `has_no_field?'
     # (eval):2:in `has_no_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:70:in `block (4 levels) in <top (required)>'

  52) Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field with value should be true after the field has been filled in with a different value
     Failure/Error: @session.should have_no_field('First Name', :with => 'John')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_field" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:107
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:280:in `has_no_field?'
     # (eval):2:in `has_no_field?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:75:in `block (4 levels) in <top (required)>'

  53) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? should be true if the field is on the page
     Failure/Error: @session.should have_select('Locale')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:360:in `has_select?'
     # (eval):2:in `has_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:6:in `block (3 levels) in <top (required)>'

  54) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? should be false if the field is not on the page
     Failure/Error: @session.should_not have_select('Monkey')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:360:in `has_select?'
     # (eval):2:in `has_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:12:in `block (3 levels) in <top (required)>'

  55) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be true if a field with the given value is on the page
     Failure/Error: @session.should have_select('form_locale', :selected => 'English')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:360:in `has_select?'
     # (eval):2:in `has_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:17:in `block (4 levels) in <top (required)>'

  56) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be false if the given field is not on the page
     Failure/Error: @session.should_not have_select('Locale', :selected => 'Swedish')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:360:in `has_select?'
     # (eval):2:in `has_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:23:in `block (4 levels) in <top (required)>'

  57) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be true after the given value is selected
     Failure/Error: @session.should have_select('Locale', :selected => 'Swedish')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:360:in `has_select?'
     # (eval):2:in `has_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:32:in `block (4 levels) in <top (required)>'

  58) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be false after a different value is selected
     Failure/Error: @session.should_not have_select('Locale', :selected => 'English')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:360:in `has_select?'
     # (eval):2:in `has_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:37:in `block (4 levels) in <top (required)>'

  59) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be true after the given values are selected
     Failure/Error: @session.should have_select('Underwear', :selected => ['Briefs', 'Boxers', 'Commando'])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:360:in `has_select?'
     # (eval):2:in `has_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:42:in `block (4 levels) in <top (required)>'

  60) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be false after one of the values is unselected
     Failure/Error: @session.should_not have_select('Underwear', :selected => ['Briefs', 'Commando'])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:360:in `has_select?'
     # (eval):2:in `has_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:47:in `block (4 levels) in <top (required)>'

  61) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with options should be true if a field with the given options is on the page
     Failure/Error: @session.should have_select('form_locale', :options => ['English'])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:360:in `has_select?'
     # (eval):2:in `has_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:53:in `block (4 levels) in <top (required)>'

  62) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with options should be false if the given field is not on the page
     Failure/Error: @session.should_not have_select('Locale', :options => ['Not there'])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:360:in `has_select?'
     # (eval):2:in `has_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:58:in `block (4 levels) in <top (required)>'

  63) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? should be false if the field is on the page
     Failure/Error: @session.should_not have_no_select('Locale')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:373:in `has_no_select?'
     # (eval):2:in `has_no_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:69:in `block (3 levels) in <top (required)>'

  64) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? should be true if the field is not on the page
     Failure/Error: @session.should have_no_select('Monkey')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:373:in `has_no_select?'
     # (eval):2:in `has_no_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:75:in `block (3 levels) in <top (required)>'

  65) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be false if a field with the given value is on the page
     Failure/Error: @session.should_not have_no_select('form_locale', :selected => 'English')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:373:in `has_no_select?'
     # (eval):2:in `has_no_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:80:in `block (4 levels) in <top (required)>'

  66) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be true if the given field is not on the page
     Failure/Error: @session.should have_no_select('Locale', :selected => 'Swedish')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:373:in `has_no_select?'
     # (eval):2:in `has_no_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:86:in `block (4 levels) in <top (required)>'

  67) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be false after the given value is selected
     Failure/Error: @session.should_not have_no_select('Locale', :selected => 'Swedish')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:373:in `has_no_select?'
     # (eval):2:in `has_no_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:95:in `block (4 levels) in <top (required)>'

  68) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be true after a different value is selected
     Failure/Error: @session.should have_no_select('Locale', :selected => 'English')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:373:in `has_no_select?'
     # (eval):2:in `has_no_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:100:in `block (4 levels) in <top (required)>'

  69) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be false after the given values are selected
     Failure/Error: @session.should_not have_no_select('Underwear', :selected => ['Briefs', 'Boxers', 'Commando'])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:373:in `has_no_select?'
     # (eval):2:in `has_no_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:105:in `block (4 levels) in <top (required)>'

  70) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be true after one of the values is unselected
     Failure/Error: @session.should have_no_select('Underwear', :selected => ['Briefs', 'Commando'])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:373:in `has_no_select?'
     # (eval):2:in `has_no_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:110:in `block (4 levels) in <top (required)>'

  71) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with options should be false if a field with the given options is on the page
     Failure/Error: @session.should_not have_no_select('form_locale', :options => ['English'])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:373:in `has_no_select?'
     # (eval):2:in `has_no_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:116:in `block (4 levels) in <top (required)>'

  72) Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with options should be true if the given field is not on the page
     Failure/Error: @session.should have_no_select('Locale', :options => ['Not there'])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_select" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:108
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:373:in `has_no_select?'
     # (eval):2:in `has_no_select?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:121:in `block (4 levels) in <top (required)>'

  73) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? should be true if the field is on the page
     Failure/Error: @session.should have_table('Deaths')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:394:in `has_table?'
     # (eval):2:in `has_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:8:in `block (3 levels) in <top (required)>'

  74) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? should be false if the field is not on the page
     Failure/Error: @session.should_not have_table('Monkey')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:394:in `has_table?'
     # (eval):2:in `has_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:13:in `block (3 levels) in <top (required)>'

  75) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be true if a table with the given rows is on the page
     Failure/Error: @session.should have_table('Ransom', :rows => [['2007', '$300', '$100']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:394:in `has_table?'
     # (eval):2:in `has_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:18:in `block (4 levels) in <top (required)>'

  76) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be true if the given rows are incomplete
     Failure/Error: @session.should have_table('Ransom', :rows => [['$300', '$100']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:394:in `has_table?'
     # (eval):2:in `has_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:23:in `block (4 levels) in <top (required)>'

  77) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be false if the given table is not on the page
     Failure/Error: @session.should_not have_table('Does not exist', :selected => 'John')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:394:in `has_table?'
     # (eval):2:in `has_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:27:in `block (4 levels) in <top (required)>'

  78) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be false if the given rows contain incorrect elements
     Failure/Error: @session.should_not have_table('Ransom', :rows => [['2007', '$1000000000', '$100']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:394:in `has_table?'
     # (eval):2:in `has_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:31:in `block (4 levels) in <top (required)>'

  79) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be false if the given rows are incorrectly ordered
     Failure/Error: @session.should_not have_table('Ransom', :rows => [['2007', '$100', '$300']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:394:in `has_table?'
     # (eval):2:in `has_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:35:in `block (4 levels) in <top (required)>'

  80) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be false if the only some of the given rows are correct
     Failure/Error: @session.should_not have_table('Deaths', :rows => [['2007', '66', '7'], ['2007', '99999999', '12']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:394:in `has_table?'
     # (eval):2:in `has_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:39:in `block (4 levels) in <top (required)>'

  81) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be false if the given rows are out of order
     Failure/Error: @session.should_not have_table('Deaths', :rows => [['2007', '123', '12'], ['2007', '66', '7']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:394:in `has_table?'
     # (eval):2:in `has_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:43:in `block (4 levels) in <top (required)>'

  82) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? should be false if the field is on the page
     Failure/Error: @session.should_not have_no_table('Deaths')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:406:in `has_no_table?'
     # (eval):2:in `has_no_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:54:in `block (3 levels) in <top (required)>'

  83) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? should be true if the field is not on the page
     Failure/Error: @session.should have_no_table('Monkey')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:406:in `has_no_table?'
     # (eval):2:in `has_no_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:59:in `block (3 levels) in <top (required)>'

  84) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be false if a table with the given rows is on the page
     Failure/Error: @session.should_not have_no_table('Ransom', :rows => [['2007', '$300', '$100']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:406:in `has_no_table?'
     # (eval):2:in `has_no_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:64:in `block (4 levels) in <top (required)>'

  85) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be false if the given rows are incomplete
     Failure/Error: @session.should_not have_no_table('Ransom', :rows => [['$300', '$100']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:406:in `has_no_table?'
     # (eval):2:in `has_no_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:69:in `block (4 levels) in <top (required)>'

  86) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be true if the given table is not on the page
     Failure/Error: @session.should have_no_table('Does not exist', :selected => 'John')
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:406:in `has_no_table?'
     # (eval):2:in `has_no_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:73:in `block (4 levels) in <top (required)>'

  87) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be true if the given rows contain incorrect elements
     Failure/Error: @session.should have_no_table('Ransom', :rows => [['2007', '$1000000000', '$100']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:406:in `has_no_table?'
     # (eval):2:in `has_no_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:77:in `block (4 levels) in <top (required)>'

  88) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be true if the given rows are incorrectly ordered
     Failure/Error: @session.should have_no_table('Ransom', :rows => [['2007', '$100', '$300']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:406:in `has_no_table?'
     # (eval):2:in `has_no_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:81:in `block (4 levels) in <top (required)>'

  89) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be true if the only some of the given rows are correct
     Failure/Error: @session.should have_no_table('Deaths', :rows => [['2007', '66', '7'], ['2007', '99999999', '12']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:406:in `has_no_table?'
     # (eval):2:in `has_no_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:85:in `block (4 levels) in <top (required)>'

  90) Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be true if the given rows are out of order
     Failure/Error: @session.should have_no_table('Deaths', :rows => [['2007', '123', '12'], ['2007', '66', '7']])
     ArgumentError:
       wrong number of arguments (2 for 1)
     Shared Example Group: "has_table" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:109
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:406:in `has_no_table?'
     # (eval):2:in `has_no_table?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:89:in `block (4 levels) in <top (required)>'

  91) Capybara::Session with terminus driver it should behave like session it should behave like within#within with CSS selector should assert content in the given scope
     Failure/Error: @session.should_not have_content('First Name')
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "within" called from ./vendor/capybara/1.1/lib/capybara/spec/session.rb:114
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/within_spec.rb:17:in `block (5 levels) in <top (required)>'
     # ./vendor/capybara/1.1/lib/capybara/session.rb:192:in `within'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/within_spec.rb:16:in `block (4 levels) in <top (required)>'

  92) Capybara::Session with terminus driver it should behave like session with javascript support all JS specs#has_content? should wait for content to appear
     Failure/Error: @session.should have_content("Has been clicked")
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "session with javascript support" called from ./spec/1.1/terminus_session_spec.rb:16
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:184:in `has_content?'
     # (eval):2:in `has_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/javascript.rb:265:in `block (4 levels) in <top (required)>'

  93) Capybara::Session with terminus driver it should behave like session with javascript support all JS specs#has_no_content? should wait for content to disappear
     Failure/Error: @session.should have_no_content("I changed it")
     NoMethodError:
       undefined method `content' for XPath::HTML:Module
     Shared Example Group: "session with javascript support" called from ./spec/1.1/terminus_session_spec.rb:16
     # ./vendor/capybara/1.1/lib/capybara/node/matchers.rb:196:in `has_no_content?'
     # (eval):2:in `has_no_content?'
     # ./vendor/capybara/1.1/lib/capybara/spec/session/javascript.rb:273:in `block (4 levels) in <top (required)>'

Finished in 2 minutes 45.05 seconds
510 examples, 93 failures

Failed examples:

rspec ./vendor/capybara/1.1/lib/capybara/spec/session/first_spec.rb:16 # Capybara::Session with terminus driver it should behave like session it should behave like first#first should accept an XPath instance
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:11 # Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with normal form should set a file path by id
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:17 # Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with normal form should set a file path by label
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:25 # Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should set a file path by id
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:31 # Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should set a file path by label
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:37 # Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should not break if no file is submitted
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:42 # Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should send content type text/plain when uploading a text file
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:48 # Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should send content type image/jpeg when uploading an image
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/attach_file_spec.rb:54 # Capybara::Session with terminus driver it should behave like session it should behave like attach_file#attach_file with multipart form should not break when using HTML5 multiple file input
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/click_button_spec.rb:208 # Capybara::Session with terminus driver it should behave like session it should behave like click_button#click_button with text given on a button defined by <button> tag should prefer exact matches over partial matches
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/click_button_spec.rb:240 # Capybara::Session with terminus driver it should behave like session it should behave like click_button#click_button with value given on a button defined by <button> tag should prefer exact matches over partial matches
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/click_link_spec.rb:25 # Capybara::Session with terminus driver it should behave like session it should behave like click_link#click_link with text given should prefer exact matches over partial matches
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/click_link_spec.rb:42 # Capybara::Session with terminus driver it should behave like session it should behave like click_link#click_link with title given should prefer exact matches over partial matches
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/click_link_spec.rb:59 # Capybara::Session with terminus driver it should behave like session it should behave like click_link#click_link with alternative text given to a contained image should prefer exact matches over partial matches
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/fill_in_spec.rb:19 # Capybara::Session with terminus driver it should behave like session it should behave like fill_in#fill_in should fill in a text field by label without for
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/fill_in_spec.rb:31 # Capybara::Session with terminus driver it should behave like session it should behave like fill_in#fill_in should favour exact label matches over partial matches
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/fill_in_spec.rb:97 # Capybara::Session with terminus driver it should behave like session it should behave like fill_in#fill_in should prefer exact matches over partial matches
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/find_spec.rb:131 # Capybara::Session with terminus driver it should behave like session it should behave like find#find should accept an XPath instance and respect the order of paths
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/find_spec.rb:22 # Capybara::Session with terminus driver it should behave like session it should behave like find#find the returned node should act like a session object
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:3 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should be true if the given content is on the page at least once
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:10 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should be true if scoped to an element which has the content
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:17 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should be false if scoped to an element which does not have the content
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:24 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should ignore tags
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:30 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should ignore extra whitespace and newlines
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:35 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should be false if the given content is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:41 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should handle single quotes in the content
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:46 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should handle double quotes in the content
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:51 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_content? should handle mixed single and double quotes in the content
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:58 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should be false if the given content is on the page at least once
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:65 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should be false if scoped to an element which has the content
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:72 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should be true if scoped to an element which does not have the content
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:79 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should ignore tags
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:85 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should be true if the given content is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:91 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should handle single quotes in the content
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:96 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should handle double quotes in the content
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_content_spec.rb:101 # Capybara::Session with terminus driver it should behave like session it should behave like has_content#has_no_content? should handle mixed single and double quotes in the content
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_link_spec.rb:8 # Capybara::Session with terminus driver it should behave like session it should behave like has_link#has_link? should be true if the given link is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_link_spec.rb:14 # Capybara::Session with terminus driver it should behave like session it should behave like has_link#has_link? should be false if the given link is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_link_spec.rb:25 # Capybara::Session with terminus driver it should behave like session it should behave like has_link#has_no_link? should be false if the given link is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_link_spec.rb:31 # Capybara::Session with terminus driver it should behave like session it should behave like has_link#has_no_link? should be true if the given link is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:5 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field should be true if the field is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:11 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field should be false if the field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:16 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field with value should be true if a field with the given value is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:23 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field with value should be false if the given field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:29 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field with value should be true after the field has been filled in with the given value
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:34 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_field with value should be false after the field has been filled in with a different value
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:44 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field should be false if the field is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:50 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field should be true if the field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:55 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field with value should be false if a field with the given value is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:62 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field with value should be true if the given field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:68 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field with value should be false after the field has been filled in with the given value
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_field_spec.rb:73 # Capybara::Session with terminus driver it should behave like session it should behave like has_field#has_no_field with value should be true after the field has been filled in with a different value
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:5 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? should be true if the field is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:11 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? should be false if the field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:16 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be true if a field with the given value is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:22 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be false if the given field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:30 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be true after the given value is selected
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:35 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be false after a different value is selected
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:40 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be true after the given values are selected
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:45 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with selected value should be false after one of the values is unselected
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:52 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with options should be true if a field with the given options is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:57 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_select? with options should be false if the given field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:68 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? should be false if the field is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:74 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? should be true if the field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:79 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be false if a field with the given value is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:85 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be true if the given field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:93 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be false after the given value is selected
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:98 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be true after a different value is selected
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:103 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be false after the given values are selected
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:108 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with selected value should be true after one of the values is unselected
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:115 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with options should be false if a field with the given options is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_select_spec.rb:120 # Capybara::Session with terminus driver it should behave like session it should behave like has_select#has_no_select? with options should be true if the given field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:7 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? should be true if the field is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:12 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? should be false if the field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:17 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be true if a table with the given rows is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:22 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be true if the given rows are incomplete
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:26 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be false if the given table is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:30 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be false if the given rows contain incorrect elements
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:34 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be false if the given rows are incorrectly ordered
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:38 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be false if the only some of the given rows are correct
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:42 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_table? with rows should be false if the given rows are out of order
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:53 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? should be false if the field is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:58 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? should be true if the field is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:63 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be false if a table with the given rows is on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:68 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be false if the given rows are incomplete
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:72 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be true if the given table is not on the page
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:76 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be true if the given rows contain incorrect elements
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:80 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be true if the given rows are incorrectly ordered
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:84 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be true if the only some of the given rows are correct
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/has_table_spec.rb:88 # Capybara::Session with terminus driver it should behave like session it should behave like has_table#has_no_table? with rows should be true if the given rows are out of order
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/within_spec.rb:15 # Capybara::Session with terminus driver it should behave like session it should behave like within#within with CSS selector should assert content in the given scope
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/javascript.rb:262 # Capybara::Session with terminus driver it should behave like session with javascript support all JS specs#has_content? should wait for content to appear
rspec ./vendor/capybara/1.1/lib/capybara/spec/session/javascript.rb:270 # Capybara::Session with terminus driver it should behave like session with javascript support all JS specs#has_no_content? should wait for content to disappear
